import{c as bi,g as Al,a as ue,e as mr,b as V0,w as Rl,r as Tl,f as vc,t as da,d as G0,h as wi,V as W0,M as J0,N as ie,k as Y0,i as oc,j as Q0,K as X0,A as Z0,q as Oh,x as em,H as tm,F as rm,l as Ch,$ as im,p as nm,J as sm,u as Gn,m as Ah,X as am,n as om,_ as Nl,o as Lr,I as cm,s as Rh,v as ln,y as Ft,U as Wt,z as _i,B as lr,C as um,D as fn,E as Fl,G as hm,L as lm,O as fm,P as $l,Q as pm,R as Dl,S as Ll,T as dn,W as cc,Y as ca,Z as gn,a0 as ua,a1 as dm,a2 as gm,a3 as ym,a4 as vm,a5 as ra,a6 as mm,a7 as _m,a8 as Ko,a9 as Th,aa as wm,ab as bm,ac as Em,ad as Nh,ae as Im,af as xm,ag as Pm,ah as Sm,ai as Om,aj as Cm,ak as Am,al as Rm,am as kn,an as jl,ao as Bo,ap as Tm,aq as Nm,ar as Fm}from"./index.b91f8118.js";import{s as Wn,a as ga,i as Fh,c as $m,b as Dm,f as mc,p as Lm,J as si,d as _c,e as wc,g as ya,h as mi,j as ni,k as Vn,l as jm,m as qm,H as xi}from"./http.e4aa1ac8.js";const Mm=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,zm=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,Um=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function Hm(c,i){if(c==="__proto__"||c==="constructor"&&i&&typeof i=="object"&&"prototype"in i){km(c);return}return i}function km(c){console.warn(`[destr] Dropping "${c}" key to prevent prototype pollution.`)}function ia(c,i={}){if(typeof c!="string")return c;const r=c.trim();if(c[0]==='"'&&c.at(-1)==='"'&&!c.includes("\\"))return r.slice(1,-1);if(r.length<=9){const s=r.toLowerCase();if(s==="true")return!0;if(s==="false")return!1;if(s==="undefined")return;if(s==="null")return null;if(s==="nan")return Number.NaN;if(s==="infinity")return Number.POSITIVE_INFINITY;if(s==="-infinity")return Number.NEGATIVE_INFINITY}if(!Um.test(c)){if(i.strict)throw new SyntaxError("[destr] Invalid JSON");return c}try{if(Mm.test(c)||zm.test(c)){if(i.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(c,Hm)}return JSON.parse(c)}catch(s){if(i.strict)throw s;return c}}function Km(c){return!c||typeof c.then!="function"?Promise.resolve(c):c}function Ut(c,...i){try{return Km(c(...i))}catch(r){return Promise.reject(r)}}function Bm(c){const i=typeof c;return c===null||i!=="object"&&i!=="function"}function Vm(c){const i=Object.getPrototypeOf(c);return!i||i.isPrototypeOf(Object)}function ha(c){if(Bm(c))return String(c);if(Vm(c)||Array.isArray(c))return JSON.stringify(c);if(typeof c.toJSON=="function")return ha(c.toJSON());throw new Error("[unstorage] Cannot stringify value!")}function ql(){if(typeof Buffer===void 0)throw new TypeError("[unstorage] Buffer is not supported!")}const uc="base64:";function Gm(c){if(typeof c=="string")return c;ql();const i=Buffer.from(c).toString("base64");return uc+i}function Wm(c){return typeof c!="string"||!c.startsWith(uc)?c:(ql(),Buffer.from(c.slice(uc.length),"base64"))}function hr(c){return c?c.split("?")[0].replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""):""}function Jm(...c){return hr(c.join(":"))}function na(c){return c=hr(c),c?c+":":""}const Ym="memory",Qm=()=>{const c=new Map;return{name:Ym,options:{},hasItem(i){return c.has(i)},getItem(i){return c.get(i)??null},getItemRaw(i){return c.get(i)??null},setItem(i,r){c.set(i,r)},setItemRaw(i,r){c.set(i,r)},removeItem(i){c.delete(i)},getKeys(){return Array.from(c.keys())},clear(){c.clear()},dispose(){c.clear()}}};function Xm(c={}){const i={mounts:{"":c.driver||Qm()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},r=y=>{for(const S of i.mountpoints)if(y.startsWith(S))return{base:S,relativeKey:y.slice(S.length),driver:i.mounts[S]};return{base:"",relativeKey:y,driver:i.mounts[""]}},s=(y,S)=>i.mountpoints.filter(T=>T.startsWith(y)||S&&y.startsWith(T)).map(T=>({relativeBase:y.length>T.length?y.slice(T.length):void 0,mountpoint:T,driver:i.mounts[T]})),a=(y,S)=>{if(!!i.watching){S=hr(S);for(const T of i.watchListeners)T(y,S)}},l=async()=>{if(!i.watching){i.watching=!0;for(const y in i.mounts)i.unwatch[y]=await $h(i.mounts[y],a,y)}},d=async()=>{if(!!i.watching){for(const y in i.unwatch)await i.unwatch[y]();i.unwatch={},i.watching=!1}},g=(y,S,T)=>{const $=new Map,B=j=>{let Q=$.get(j.base);return Q||(Q={driver:j.driver,base:j.base,items:[]},$.set(j.base,Q)),Q};for(const j of y){const Q=typeof j=="string",ae=hr(Q?j:j.key),he=Q?void 0:j.value,le=Q||!j.options?S:{...S,...j.options},fe=r(ae);B(fe).items.push({key:ae,value:he,relativeKey:fe.relativeKey,options:le})}return Promise.all([...$.values()].map(j=>T(j))).then(j=>j.flat())},E={hasItem(y,S={}){y=hr(y);const{relativeKey:T,driver:$}=r(y);return Ut($.hasItem,T,S)},getItem(y,S={}){y=hr(y);const{relativeKey:T,driver:$}=r(y);return Ut($.getItem,T,S).then(B=>ia(B))},getItems(y,S){return g(y,S,T=>T.driver.getItems?Ut(T.driver.getItems,T.items.map($=>({key:$.relativeKey,options:$.options})),S).then($=>$.map(B=>({key:Jm(T.base,B.key),value:ia(B.value)}))):Promise.all(T.items.map($=>Ut(T.driver.getItem,$.relativeKey,$.options).then(B=>({key:$.key,value:ia(B)})))))},getItemRaw(y,S={}){y=hr(y);const{relativeKey:T,driver:$}=r(y);return $.getItemRaw?Ut($.getItemRaw,T,S):Ut($.getItem,T,S).then(B=>Wm(B))},async setItem(y,S,T={}){if(S===void 0)return E.removeItem(y);y=hr(y);const{relativeKey:$,driver:B}=r(y);!B.setItem||(await Ut(B.setItem,$,ha(S),T),B.watch||a("update",y))},async setItems(y,S){await g(y,S,async T=>{T.driver.setItems&&await Ut(T.driver.setItems,T.items.map($=>({key:$.relativeKey,value:ha($.value),options:$.options})),S),T.driver.setItem&&await Promise.all(T.items.map($=>Ut(T.driver.setItem,$.relativeKey,ha($.value),$.options)))})},async setItemRaw(y,S,T={}){if(S===void 0)return E.removeItem(y,T);y=hr(y);const{relativeKey:$,driver:B}=r(y);if(B.setItemRaw)await Ut(B.setItemRaw,$,S,T);else if(B.setItem)await Ut(B.setItem,$,Gm(S),T);else return;B.watch||a("update",y)},async removeItem(y,S={}){typeof S=="boolean"&&(S={removeMeta:S}),y=hr(y);const{relativeKey:T,driver:$}=r(y);!$.removeItem||(await Ut($.removeItem,T,S),(S.removeMeta||S.removeMata)&&await Ut($.removeItem,T+"$",S),$.watch||a("remove",y))},async getMeta(y,S={}){typeof S=="boolean"&&(S={nativeOnly:S}),y=hr(y);const{relativeKey:T,driver:$}=r(y),B=Object.create(null);if($.getMeta&&Object.assign(B,await Ut($.getMeta,T,S)),!S.nativeOnly){const j=await Ut($.getItem,T+"$",S).then(Q=>ia(Q));j&&typeof j=="object"&&(typeof j.atime=="string"&&(j.atime=new Date(j.atime)),typeof j.mtime=="string"&&(j.mtime=new Date(j.mtime)),Object.assign(B,j))}return B},setMeta(y,S,T={}){return this.setItem(y+"$",S,T)},removeMeta(y,S={}){return this.removeItem(y+"$",S)},async getKeys(y,S={}){y=na(y);const T=s(y,!0);let $=[];const B=[];for(const j of T){const ae=(await Ut(j.driver.getKeys,j.relativeBase,S)).map(he=>j.mountpoint+hr(he)).filter(he=>!$.some(le=>he.startsWith(le)));B.push(...ae),$=[j.mountpoint,...$.filter(he=>!he.startsWith(j.mountpoint))]}return y?B.filter(j=>j.startsWith(y)&&!j.endsWith("$")):B.filter(j=>!j.endsWith("$"))},async clear(y,S={}){y=na(y),await Promise.all(s(y,!1).map(async T=>{if(T.driver.clear)return Ut(T.driver.clear,T.relativeBase,S);if(T.driver.removeItem){const $=await T.driver.getKeys(T.relativeBase||"",S);return Promise.all($.map(B=>T.driver.removeItem(B,S)))}}))},async dispose(){await Promise.all(Object.values(i.mounts).map(y=>Dh(y)))},async watch(y){return await l(),i.watchListeners.push(y),async()=>{i.watchListeners=i.watchListeners.filter(S=>S!==y),i.watchListeners.length===0&&await d()}},async unwatch(){i.watchListeners=[],await d()},mount(y,S){if(y=na(y),y&&i.mounts[y])throw new Error(`already mounted at ${y}`);return y&&(i.mountpoints.push(y),i.mountpoints.sort((T,$)=>$.length-T.length)),i.mounts[y]=S,i.watching&&Promise.resolve($h(S,a,y)).then(T=>{i.unwatch[y]=T}).catch(console.error),E},async unmount(y,S=!0){y=na(y),!(!y||!i.mounts[y])&&(i.watching&&y in i.unwatch&&(i.unwatch[y](),delete i.unwatch[y]),S&&await Dh(i.mounts[y]),i.mountpoints=i.mountpoints.filter(T=>T!==y),delete i.mounts[y])},getMount(y=""){y=hr(y)+":";const S=r(y);return{driver:S.driver,base:S.base}},getMounts(y="",S={}){return y=hr(y),s(y,S.parents).map($=>({driver:$.driver,base:$.mountpoint}))}};return E}function $h(c,i,r){return c.watch?c.watch((s,a)=>i(s,r+a)):()=>{}}async function Dh(c){typeof c.dispose=="function"&&await Ut(c.dispose)}function Ui(c){return new Promise((i,r)=>{c.oncomplete=c.onsuccess=()=>i(c.result),c.onabort=c.onerror=()=>r(c.error)})}function Ml(c,i){const r=indexedDB.open(c);r.onupgradeneeded=()=>r.result.createObjectStore(i);const s=Ui(r);return(a,l)=>s.then(d=>l(d.transaction(i,a).objectStore(i)))}let Vo;function Jn(){return Vo||(Vo=Ml("keyval-store","keyval")),Vo}function Lh(c,i=Jn()){return i("readonly",r=>Ui(r.get(c)))}function Zm(c,i,r=Jn()){return r("readwrite",s=>(s.put(i,c),Ui(s.transaction)))}function e1(c,i=Jn()){return i("readwrite",r=>(r.delete(c),Ui(r.transaction)))}function t1(c=Jn()){return c("readwrite",i=>(i.clear(),Ui(i.transaction)))}function r1(c,i){return c.openCursor().onsuccess=function(){!this.result||(i(this.result),this.result.continue())},Ui(c.transaction)}function i1(c=Jn()){return c("readonly",i=>{if(i.getAllKeys)return Ui(i.getAllKeys());const r=[];return r1(i,s=>r.push(s.key)).then(()=>r)})}const n1="idb-keyval";var s1=(c={})=>{const i=c.base&&c.base.length>0?`${c.base}:`:"",r=a=>i+a;let s;return c.dbName&&c.storeName&&(s=Ml(c.dbName,c.storeName)),{name:n1,options:c,async hasItem(a){return!(typeof await Lh(r(a),s)>"u")},async getItem(a){return await Lh(r(a),s)??null},setItem(a,l){return Zm(r(a),l,s)},removeItem(a){return e1(r(a),s)},getKeys(){return i1(s)},clear(){return t1(s)}}};const a1="WALLET_CONNECT_V2_INDEXED_DB",o1="keyvaluestorage";class c1{constructor(){this.indexedDb=Xm({driver:s1({dbName:a1,storeName:o1})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(i=>[i.key,i.value])}async getItem(i){const r=await this.indexedDb.getItem(i);if(r!==null)return r}async setItem(i,r){await this.indexedDb.setItem(i,Wn(r))}async removeItem(i){await this.indexedDb.removeItem(i)}}var Go=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},la={exports:{}};(function(){let c;function i(){}c=i,c.prototype.getItem=function(r){return this.hasOwnProperty(r)?String(this[r]):null},c.prototype.setItem=function(r,s){this[r]=String(s)},c.prototype.removeItem=function(r){delete this[r]},c.prototype.clear=function(){const r=this;Object.keys(r).forEach(function(s){r[s]=void 0,delete r[s]})},c.prototype.key=function(r){return r=r||0,Object.keys(this)[r]},c.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof Go<"u"&&Go.localStorage?la.exports=Go.localStorage:typeof window<"u"&&window.localStorage?la.exports=window.localStorage:la.exports=new i})();function u1(c){var i;return[c[0],ga((i=c[1])!=null?i:"")]}class h1{constructor(){this.localStorage=la.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(u1)}async getItem(i){const r=this.localStorage.getItem(i);if(r!==null)return ga(r)}async setItem(i,r){this.localStorage.setItem(i,Wn(r))}async removeItem(i){this.localStorage.removeItem(i)}}const l1="wc_storage_version",jh=1,f1=async(c,i,r)=>{const s=l1,a=await i.getItem(s);if(a&&a>=jh){r(i);return}const l=await c.getKeys();if(!l.length){r(i);return}const d=[];for(;l.length;){const g=l.shift();if(!g)continue;const E=g.toLowerCase();if(E.includes("wc@")||E.includes("walletconnect")||E.includes("wc_")||E.includes("wallet_connect")){const y=await c.getItem(g);await i.setItem(g,y),d.push(g)}}await i.setItem(s,jh),r(i),p1(c,d)},p1=async(c,i)=>{i.length&&i.forEach(async r=>{await c.removeItem(r)})};class d1{constructor(){this.initialized=!1,this.setInitialized=r=>{this.storage=r,this.initialized=!0};const i=new h1;this.storage=i;try{const r=new c1;f1(i,r,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(i){return await this.initialize(),this.storage.getItem(i)}async setItem(i,r){return await this.initialize(),this.storage.setItem(i,r)}async removeItem(i){return await this.initialize(),this.storage.removeItem(i)}async initialize(){this.initialized||await new Promise(i=>{const r=setInterval(()=>{this.initialized&&(clearInterval(r),i())},20)})}}var yn={},Yn={exports:{}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */(function(c){var i,r,s,a,l,d,g,E,y,S,T,$,B,j,Q,ae,he,le,fe,ve,me,M,G;(function(U){var pe=typeof bi=="object"?bi:typeof self=="object"?self:typeof this=="object"?this:{};U(m(pe,m(c.exports)));function m(I,P){return I!==pe&&(typeof Object.create=="function"?Object.defineProperty(I,"__esModule",{value:!0}):I.__esModule=!0),function(L,_){return I[L]=P?P(L,_):_}}})(function(U){var pe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,I){m.__proto__=I}||function(m,I){for(var P in I)I.hasOwnProperty(P)&&(m[P]=I[P])};i=function(m,I){pe(m,I);function P(){this.constructor=m}m.prototype=I===null?Object.create(I):(P.prototype=I.prototype,new P)},r=Object.assign||function(m){for(var I,P=1,L=arguments.length;P<L;P++){I=arguments[P];for(var _ in I)Object.prototype.hasOwnProperty.call(I,_)&&(m[_]=I[_])}return m},s=function(m,I){var P={};for(var L in m)Object.prototype.hasOwnProperty.call(m,L)&&I.indexOf(L)<0&&(P[L]=m[L]);if(m!=null&&typeof Object.getOwnPropertySymbols=="function")for(var _=0,L=Object.getOwnPropertySymbols(m);_<L.length;_++)I.indexOf(L[_])<0&&Object.prototype.propertyIsEnumerable.call(m,L[_])&&(P[L[_]]=m[L[_]]);return P},a=function(m,I,P,L){var _=arguments.length,w=_<3?I:L===null?L=Object.getOwnPropertyDescriptor(I,P):L,Y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(m,I,P,L);else for(var ee=m.length-1;ee>=0;ee--)(Y=m[ee])&&(w=(_<3?Y(w):_>3?Y(I,P,w):Y(I,P))||w);return _>3&&w&&Object.defineProperty(I,P,w),w},l=function(m,I){return function(P,L){I(P,L,m)}},d=function(m,I){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(m,I)},g=function(m,I,P,L){function _(w){return w instanceof P?w:new P(function(Y){Y(w)})}return new(P||(P=Promise))(function(w,Y){function ee(k){try{F(L.next(k))}catch(X){Y(X)}}function Z(k){try{F(L.throw(k))}catch(X){Y(X)}}function F(k){k.done?w(k.value):_(k.value).then(ee,Z)}F((L=L.apply(m,I||[])).next())})},E=function(m,I){var P={label:0,sent:function(){if(w[0]&1)throw w[1];return w[1]},trys:[],ops:[]},L,_,w,Y;return Y={next:ee(0),throw:ee(1),return:ee(2)},typeof Symbol=="function"&&(Y[Symbol.iterator]=function(){return this}),Y;function ee(F){return function(k){return Z([F,k])}}function Z(F){if(L)throw new TypeError("Generator is already executing.");for(;P;)try{if(L=1,_&&(w=F[0]&2?_.return:F[0]?_.throw||((w=_.return)&&w.call(_),0):_.next)&&!(w=w.call(_,F[1])).done)return w;switch(_=0,w&&(F=[F[0]&2,w.value]),F[0]){case 0:case 1:w=F;break;case 4:return P.label++,{value:F[1],done:!1};case 5:P.label++,_=F[1],F=[0];continue;case 7:F=P.ops.pop(),P.trys.pop();continue;default:if(w=P.trys,!(w=w.length>0&&w[w.length-1])&&(F[0]===6||F[0]===2)){P=0;continue}if(F[0]===3&&(!w||F[1]>w[0]&&F[1]<w[3])){P.label=F[1];break}if(F[0]===6&&P.label<w[1]){P.label=w[1],w=F;break}if(w&&P.label<w[2]){P.label=w[2],P.ops.push(F);break}w[2]&&P.ops.pop(),P.trys.pop();continue}F=I.call(m,P)}catch(k){F=[6,k],_=0}finally{L=w=0}if(F[0]&5)throw F[1];return{value:F[0]?F[1]:void 0,done:!0}}},G=function(m,I,P,L){L===void 0&&(L=P),m[L]=I[P]},y=function(m,I){for(var P in m)P!=="default"&&!I.hasOwnProperty(P)&&(I[P]=m[P])},S=function(m){var I=typeof Symbol=="function"&&Symbol.iterator,P=I&&m[I],L=0;if(P)return P.call(m);if(m&&typeof m.length=="number")return{next:function(){return m&&L>=m.length&&(m=void 0),{value:m&&m[L++],done:!m}}};throw new TypeError(I?"Object is not iterable.":"Symbol.iterator is not defined.")},T=function(m,I){var P=typeof Symbol=="function"&&m[Symbol.iterator];if(!P)return m;var L=P.call(m),_,w=[],Y;try{for(;(I===void 0||I-- >0)&&!(_=L.next()).done;)w.push(_.value)}catch(ee){Y={error:ee}}finally{try{_&&!_.done&&(P=L.return)&&P.call(L)}finally{if(Y)throw Y.error}}return w},$=function(){for(var m=[],I=0;I<arguments.length;I++)m=m.concat(T(arguments[I]));return m},B=function(){for(var m=0,I=0,P=arguments.length;I<P;I++)m+=arguments[I].length;for(var L=Array(m),_=0,I=0;I<P;I++)for(var w=arguments[I],Y=0,ee=w.length;Y<ee;Y++,_++)L[_]=w[Y];return L},j=function(m){return this instanceof j?(this.v=m,this):new j(m)},Q=function(m,I,P){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var L=P.apply(m,I||[]),_,w=[];return _={},Y("next"),Y("throw"),Y("return"),_[Symbol.asyncIterator]=function(){return this},_;function Y(ce){L[ce]&&(_[ce]=function(xe){return new Promise(function(jt,be){w.push([ce,xe,jt,be])>1||ee(ce,xe)})})}function ee(ce,xe){try{Z(L[ce](xe))}catch(jt){X(w[0][3],jt)}}function Z(ce){ce.value instanceof j?Promise.resolve(ce.value.v).then(F,k):X(w[0][2],ce)}function F(ce){ee("next",ce)}function k(ce){ee("throw",ce)}function X(ce,xe){ce(xe),w.shift(),w.length&&ee(w[0][0],w[0][1])}},ae=function(m){var I,P;return I={},L("next"),L("throw",function(_){throw _}),L("return"),I[Symbol.iterator]=function(){return this},I;function L(_,w){I[_]=m[_]?function(Y){return(P=!P)?{value:j(m[_](Y)),done:_==="return"}:w?w(Y):Y}:w}},he=function(m){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var I=m[Symbol.asyncIterator],P;return I?I.call(m):(m=typeof S=="function"?S(m):m[Symbol.iterator](),P={},L("next"),L("throw"),L("return"),P[Symbol.asyncIterator]=function(){return this},P);function L(w){P[w]=m[w]&&function(Y){return new Promise(function(ee,Z){Y=m[w](Y),_(ee,Z,Y.done,Y.value)})}}function _(w,Y,ee,Z){Promise.resolve(Z).then(function(F){w({value:F,done:ee})},Y)}},le=function(m,I){return Object.defineProperty?Object.defineProperty(m,"raw",{value:I}):m.raw=I,m},fe=function(m){if(m&&m.__esModule)return m;var I={};if(m!=null)for(var P in m)Object.hasOwnProperty.call(m,P)&&(I[P]=m[P]);return I.default=m,I},ve=function(m){return m&&m.__esModule?m:{default:m}},me=function(m,I){if(!I.has(m))throw new TypeError("attempted to get private field on non-instance");return I.get(m)},M=function(m,I,P){if(!I.has(m))throw new TypeError("attempted to set private field on non-instance");return I.set(m,P),P},U("__extends",i),U("__assign",r),U("__rest",s),U("__decorate",a),U("__param",l),U("__metadata",d),U("__awaiter",g),U("__generator",E),U("__exportStar",y),U("__createBinding",G),U("__values",S),U("__read",T),U("__spread",$),U("__spreadArrays",B),U("__await",j),U("__asyncGenerator",Q),U("__asyncDelegator",ae),U("__asyncValues",he),U("__makeTemplateObject",le),U("__importStar",fe),U("__importDefault",ve),U("__classPrivateFieldGet",me),U("__classPrivateFieldSet",M)})})(Yn);var Ln={},Wo={},jn={};class Hi{}const g1=Object.freeze(Object.defineProperty({__proto__:null,IEvents:Hi},Symbol.toStringTag,{value:"Module"})),y1=Al(g1);var qh;function v1(){if(qh)return jn;qh=1,Object.defineProperty(jn,"__esModule",{value:!0}),jn.IHeartBeat=void 0;const c=y1;class i extends c.IEvents{constructor(s){super()}}return jn.IHeartBeat=i,jn}var Mh;function zl(){return Mh||(Mh=1,function(c){Object.defineProperty(c,"__esModule",{value:!0}),Yn.exports.__exportStar(v1(),c)}(Wo)),Wo}var Jo={},Mi={},zh;function m1(){if(zh)return Mi;zh=1,Object.defineProperty(Mi,"__esModule",{value:!0}),Mi.HEARTBEAT_EVENTS=Mi.HEARTBEAT_INTERVAL=void 0;const c=ue;return Mi.HEARTBEAT_INTERVAL=c.FIVE_SECONDS,Mi.HEARTBEAT_EVENTS={pulse:"heartbeat_pulse"},Mi}var Uh;function Ul(){return Uh||(Uh=1,function(c){Object.defineProperty(c,"__esModule",{value:!0}),Yn.exports.__exportStar(m1(),c)}(Jo)),Jo}var Hh;function _1(){if(Hh)return Ln;Hh=1,Object.defineProperty(Ln,"__esModule",{value:!0}),Ln.HeartBeat=void 0;const c=Yn.exports,i=mr.exports,r=ue,s=zl(),a=Ul();class l extends s.IHeartBeat{constructor(g){super(g),this.events=new i.EventEmitter,this.interval=a.HEARTBEAT_INTERVAL,this.interval=g?.interval||a.HEARTBEAT_INTERVAL}static init(g){return c.__awaiter(this,void 0,void 0,function*(){const E=new l(g);return yield E.init(),E})}init(){return c.__awaiter(this,void 0,void 0,function*(){yield this.initialize()})}stop(){clearInterval(this.intervalRef)}on(g,E){this.events.on(g,E)}once(g,E){this.events.once(g,E)}off(g,E){this.events.off(g,E)}removeListener(g,E){this.events.removeListener(g,E)}initialize(){return c.__awaiter(this,void 0,void 0,function*(){this.intervalRef=setInterval(()=>this.pulse(),r.toMiliseconds(this.interval))})}pulse(){this.events.emit(a.HEARTBEAT_EVENTS.pulse)}}return Ln.HeartBeat=l,Ln}(function(c){Object.defineProperty(c,"__esModule",{value:!0});const i=Yn.exports;i.__exportStar(_1(),c),i.__exportStar(zl(),c),i.__exportStar(Ul(),c)})(yn);var Ne={},Hl={exports:{}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */(function(c){var i,r,s,a,l,d,g,E,y,S,T,$,B,j,Q,ae,he,le,fe,ve,me,M,G;(function(U){var pe=typeof bi=="object"?bi:typeof self=="object"?self:typeof this=="object"?this:{};U(m(pe,m(c.exports)));function m(I,P){return I!==pe&&(typeof Object.create=="function"?Object.defineProperty(I,"__esModule",{value:!0}):I.__esModule=!0),function(L,_){return I[L]=P?P(L,_):_}}})(function(U){var pe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,I){m.__proto__=I}||function(m,I){for(var P in I)I.hasOwnProperty(P)&&(m[P]=I[P])};i=function(m,I){pe(m,I);function P(){this.constructor=m}m.prototype=I===null?Object.create(I):(P.prototype=I.prototype,new P)},r=Object.assign||function(m){for(var I,P=1,L=arguments.length;P<L;P++){I=arguments[P];for(var _ in I)Object.prototype.hasOwnProperty.call(I,_)&&(m[_]=I[_])}return m},s=function(m,I){var P={};for(var L in m)Object.prototype.hasOwnProperty.call(m,L)&&I.indexOf(L)<0&&(P[L]=m[L]);if(m!=null&&typeof Object.getOwnPropertySymbols=="function")for(var _=0,L=Object.getOwnPropertySymbols(m);_<L.length;_++)I.indexOf(L[_])<0&&Object.prototype.propertyIsEnumerable.call(m,L[_])&&(P[L[_]]=m[L[_]]);return P},a=function(m,I,P,L){var _=arguments.length,w=_<3?I:L===null?L=Object.getOwnPropertyDescriptor(I,P):L,Y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(m,I,P,L);else for(var ee=m.length-1;ee>=0;ee--)(Y=m[ee])&&(w=(_<3?Y(w):_>3?Y(I,P,w):Y(I,P))||w);return _>3&&w&&Object.defineProperty(I,P,w),w},l=function(m,I){return function(P,L){I(P,L,m)}},d=function(m,I){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(m,I)},g=function(m,I,P,L){function _(w){return w instanceof P?w:new P(function(Y){Y(w)})}return new(P||(P=Promise))(function(w,Y){function ee(k){try{F(L.next(k))}catch(X){Y(X)}}function Z(k){try{F(L.throw(k))}catch(X){Y(X)}}function F(k){k.done?w(k.value):_(k.value).then(ee,Z)}F((L=L.apply(m,I||[])).next())})},E=function(m,I){var P={label:0,sent:function(){if(w[0]&1)throw w[1];return w[1]},trys:[],ops:[]},L,_,w,Y;return Y={next:ee(0),throw:ee(1),return:ee(2)},typeof Symbol=="function"&&(Y[Symbol.iterator]=function(){return this}),Y;function ee(F){return function(k){return Z([F,k])}}function Z(F){if(L)throw new TypeError("Generator is already executing.");for(;P;)try{if(L=1,_&&(w=F[0]&2?_.return:F[0]?_.throw||((w=_.return)&&w.call(_),0):_.next)&&!(w=w.call(_,F[1])).done)return w;switch(_=0,w&&(F=[F[0]&2,w.value]),F[0]){case 0:case 1:w=F;break;case 4:return P.label++,{value:F[1],done:!1};case 5:P.label++,_=F[1],F=[0];continue;case 7:F=P.ops.pop(),P.trys.pop();continue;default:if(w=P.trys,!(w=w.length>0&&w[w.length-1])&&(F[0]===6||F[0]===2)){P=0;continue}if(F[0]===3&&(!w||F[1]>w[0]&&F[1]<w[3])){P.label=F[1];break}if(F[0]===6&&P.label<w[1]){P.label=w[1],w=F;break}if(w&&P.label<w[2]){P.label=w[2],P.ops.push(F);break}w[2]&&P.ops.pop(),P.trys.pop();continue}F=I.call(m,P)}catch(k){F=[6,k],_=0}finally{L=w=0}if(F[0]&5)throw F[1];return{value:F[0]?F[1]:void 0,done:!0}}},G=function(m,I,P,L){L===void 0&&(L=P),m[L]=I[P]},y=function(m,I){for(var P in m)P!=="default"&&!I.hasOwnProperty(P)&&(I[P]=m[P])},S=function(m){var I=typeof Symbol=="function"&&Symbol.iterator,P=I&&m[I],L=0;if(P)return P.call(m);if(m&&typeof m.length=="number")return{next:function(){return m&&L>=m.length&&(m=void 0),{value:m&&m[L++],done:!m}}};throw new TypeError(I?"Object is not iterable.":"Symbol.iterator is not defined.")},T=function(m,I){var P=typeof Symbol=="function"&&m[Symbol.iterator];if(!P)return m;var L=P.call(m),_,w=[],Y;try{for(;(I===void 0||I-- >0)&&!(_=L.next()).done;)w.push(_.value)}catch(ee){Y={error:ee}}finally{try{_&&!_.done&&(P=L.return)&&P.call(L)}finally{if(Y)throw Y.error}}return w},$=function(){for(var m=[],I=0;I<arguments.length;I++)m=m.concat(T(arguments[I]));return m},B=function(){for(var m=0,I=0,P=arguments.length;I<P;I++)m+=arguments[I].length;for(var L=Array(m),_=0,I=0;I<P;I++)for(var w=arguments[I],Y=0,ee=w.length;Y<ee;Y++,_++)L[_]=w[Y];return L},j=function(m){return this instanceof j?(this.v=m,this):new j(m)},Q=function(m,I,P){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var L=P.apply(m,I||[]),_,w=[];return _={},Y("next"),Y("throw"),Y("return"),_[Symbol.asyncIterator]=function(){return this},_;function Y(ce){L[ce]&&(_[ce]=function(xe){return new Promise(function(jt,be){w.push([ce,xe,jt,be])>1||ee(ce,xe)})})}function ee(ce,xe){try{Z(L[ce](xe))}catch(jt){X(w[0][3],jt)}}function Z(ce){ce.value instanceof j?Promise.resolve(ce.value.v).then(F,k):X(w[0][2],ce)}function F(ce){ee("next",ce)}function k(ce){ee("throw",ce)}function X(ce,xe){ce(xe),w.shift(),w.length&&ee(w[0][0],w[0][1])}},ae=function(m){var I,P;return I={},L("next"),L("throw",function(_){throw _}),L("return"),I[Symbol.iterator]=function(){return this},I;function L(_,w){I[_]=m[_]?function(Y){return(P=!P)?{value:j(m[_](Y)),done:_==="return"}:w?w(Y):Y}:w}},he=function(m){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var I=m[Symbol.asyncIterator],P;return I?I.call(m):(m=typeof S=="function"?S(m):m[Symbol.iterator](),P={},L("next"),L("throw"),L("return"),P[Symbol.asyncIterator]=function(){return this},P);function L(w){P[w]=m[w]&&function(Y){return new Promise(function(ee,Z){Y=m[w](Y),_(ee,Z,Y.done,Y.value)})}}function _(w,Y,ee,Z){Promise.resolve(Z).then(function(F){w({value:F,done:ee})},Y)}},le=function(m,I){return Object.defineProperty?Object.defineProperty(m,"raw",{value:I}):m.raw=I,m},fe=function(m){if(m&&m.__esModule)return m;var I={};if(m!=null)for(var P in m)Object.hasOwnProperty.call(m,P)&&(I[P]=m[P]);return I.default=m,I},ve=function(m){return m&&m.__esModule?m:{default:m}},me=function(m,I){if(!I.has(m))throw new TypeError("attempted to get private field on non-instance");return I.get(m)},M=function(m,I,P){if(!I.has(m))throw new TypeError("attempted to set private field on non-instance");return I.set(m,P),P},U("__extends",i),U("__assign",r),U("__rest",s),U("__decorate",a),U("__param",l),U("__metadata",d),U("__awaiter",g),U("__generator",E),U("__exportStar",y),U("__createBinding",G),U("__values",S),U("__read",T),U("__spread",$),U("__spreadArrays",B),U("__await",j),U("__asyncGenerator",Q),U("__asyncDelegator",ae),U("__asyncValues",he),U("__makeTemplateObject",le),U("__importStar",fe),U("__importDefault",ve),U("__classPrivateFieldGet",me),U("__classPrivateFieldSet",M)})})(Hl);var Yo,kh;function w1(){if(kh)return Yo;kh=1;function c(r){try{return JSON.stringify(r)}catch{return'"[Circular]"'}}Yo=i;function i(r,s,a){var l=a&&a.stringify||c,d=1;if(typeof r=="object"&&r!==null){var g=s.length+d;if(g===1)return r;var E=new Array(g);E[0]=l(r);for(var y=1;y<g;y++)E[y]=l(s[y]);return E.join(" ")}if(typeof r!="string")return r;var S=s.length;if(S===0)return r;for(var T="",$=1-d,B=-1,j=r&&r.length||0,Q=0;Q<j;){if(r.charCodeAt(Q)===37&&Q+1<j){switch(B=B>-1?B:0,r.charCodeAt(Q+1)){case 100:case 102:if($>=S||s[$]==null)break;B<Q&&(T+=r.slice(B,Q)),T+=Number(s[$]),B=Q+2,Q++;break;case 105:if($>=S||s[$]==null)break;B<Q&&(T+=r.slice(B,Q)),T+=Math.floor(Number(s[$])),B=Q+2,Q++;break;case 79:case 111:case 106:if($>=S||s[$]===void 0)break;B<Q&&(T+=r.slice(B,Q));var ae=typeof s[$];if(ae==="string"){T+="'"+s[$]+"'",B=Q+2,Q++;break}if(ae==="function"){T+=s[$].name||"<anonymous>",B=Q+2,Q++;break}T+=l(s[$]),B=Q+2,Q++;break;case 115:if($>=S)break;B<Q&&(T+=r.slice(B,Q)),T+=String(s[$]),B=Q+2,Q++;break;case 37:B<Q&&(T+=r.slice(B,Q)),T+="%",B=Q+2,Q++,$--;break}++$}++Q}return B===-1?r:(B<j&&(T+=r.slice(B)),T)}return Yo}var Qo,Kh;function b1(){if(Kh)return Qo;Kh=1;const c=w1();Qo=a;const i=me().console||{},r={mapHttpRequest:j,mapHttpResponse:j,wrapRequestSerializer:Q,wrapResponseSerializer:Q,wrapErrorSerializer:Q,req:j,res:j,err:$};function s(M,G){return Array.isArray(M)?M.filter(function(pe){return pe!=="!stdSerializers.err"}):M===!0?Object.keys(G):!1}function a(M){M=M||{},M.browser=M.browser||{};const G=M.browser.transmit;if(G&&typeof G.send!="function")throw Error("pino: transmit option must have a send function");const U=M.browser.write||i;M.browser.write&&(M.browser.asObject=!0);const pe=M.serializers||{},m=s(M.browser.serialize,pe);let I=M.browser.serialize;Array.isArray(M.browser.serialize)&&M.browser.serialize.indexOf("!stdSerializers.err")>-1&&(I=!1);const P=["error","fatal","warn","info","debug","trace"];typeof U=="function"&&(U.error=U.fatal=U.warn=U.info=U.debug=U.trace=U),M.enabled===!1&&(M.level="silent");const L=M.level||"info",_=Object.create(U);_.log||(_.log=ae),Object.defineProperty(_,"levelVal",{get:Y}),Object.defineProperty(_,"level",{get:ee,set:Z});const w={transmit:G,serialize:m,asObject:M.browser.asObject,levels:P,timestamp:B(M)};_.levels=a.levels,_.level=L,_.setMaxListeners=_.getMaxListeners=_.emit=_.addListener=_.on=_.prependListener=_.once=_.prependOnceListener=_.removeListener=_.removeAllListeners=_.listeners=_.listenerCount=_.eventNames=_.write=_.flush=ae,_.serializers=pe,_._serialize=m,_._stdErrSerialize=I,_.child=F,G&&(_._logEvent=T());function Y(){return this.level==="silent"?1/0:this.levels.values[this.level]}function ee(){return this._level}function Z(k){if(k!=="silent"&&!this.levels.values[k])throw Error("unknown level "+k);this._level=k,l(w,_,"error","log"),l(w,_,"fatal","error"),l(w,_,"warn","error"),l(w,_,"info","log"),l(w,_,"debug","log"),l(w,_,"trace","log")}function F(k,X){if(!k)throw new Error("missing bindings for child Pino");X=X||{},m&&k.serializers&&(X.serializers=k.serializers);const ce=X.serializers;if(m&&ce){var xe=Object.assign({},pe,ce),jt=M.browser.serialize===!0?Object.keys(xe):m;delete k.serializers,E([k],jt,xe,this._stdErrSerialize)}function be(It){this._childLevel=(It._childLevel|0)+1,this.error=y(It,k,"error"),this.fatal=y(It,k,"fatal"),this.warn=y(It,k,"warn"),this.info=y(It,k,"info"),this.debug=y(It,k,"debug"),this.trace=y(It,k,"trace"),xe&&(this.serializers=xe,this._serialize=jt),G&&(this._logEvent=T([].concat(It._logEvent.bindings,k)))}return be.prototype=this,new be(this)}return _}a.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},a.stdSerializers=r,a.stdTimeFunctions=Object.assign({},{nullTime:he,epochTime:le,unixTime:fe,isoTime:ve});function l(M,G,U,pe){const m=Object.getPrototypeOf(G);G[U]=G.levelVal>G.levels.values[U]?ae:m[U]?m[U]:i[U]||i[pe]||ae,d(M,G,U)}function d(M,G,U){!M.transmit&&G[U]===ae||(G[U]=function(pe){return function(){const I=M.timestamp(),P=new Array(arguments.length),L=Object.getPrototypeOf&&Object.getPrototypeOf(this)===i?i:this;for(var _=0;_<P.length;_++)P[_]=arguments[_];if(M.serialize&&!M.asObject&&E(P,this._serialize,this.serializers,this._stdErrSerialize),M.asObject?pe.call(L,g(this,U,P,I)):pe.apply(L,P),M.transmit){const w=M.transmit.level||G.level,Y=a.levels.values[w],ee=a.levels.values[U];if(ee<Y)return;S(this,{ts:I,methodLevel:U,methodValue:ee,transmitLevel:w,transmitValue:a.levels.values[M.transmit.level||G.level],send:M.transmit.send,val:G.levelVal},P)}}}(G[U]))}function g(M,G,U,pe){M._serialize&&E(U,M._serialize,M.serializers,M._stdErrSerialize);const m=U.slice();let I=m[0];const P={};pe&&(P.time=pe),P.level=a.levels.values[G];let L=(M._childLevel|0)+1;if(L<1&&(L=1),I!==null&&typeof I=="object"){for(;L--&&typeof m[0]=="object";)Object.assign(P,m.shift());I=m.length?c(m.shift(),m):void 0}else typeof I=="string"&&(I=c(m.shift(),m));return I!==void 0&&(P.msg=I),P}function E(M,G,U,pe){for(const m in M)if(pe&&M[m]instanceof Error)M[m]=a.stdSerializers.err(M[m]);else if(typeof M[m]=="object"&&!Array.isArray(M[m]))for(const I in M[m])G&&G.indexOf(I)>-1&&I in U&&(M[m][I]=U[I](M[m][I]))}function y(M,G,U){return function(){const pe=new Array(1+arguments.length);pe[0]=G;for(var m=1;m<pe.length;m++)pe[m]=arguments[m-1];return M[U].apply(this,pe)}}function S(M,G,U){const pe=G.send,m=G.ts,I=G.methodLevel,P=G.methodValue,L=G.val,_=M._logEvent.bindings;E(U,M._serialize||Object.keys(M.serializers),M.serializers,M._stdErrSerialize===void 0?!0:M._stdErrSerialize),M._logEvent.ts=m,M._logEvent.messages=U.filter(function(w){return _.indexOf(w)===-1}),M._logEvent.level.label=I,M._logEvent.level.value=P,pe(I,M._logEvent,L),M._logEvent=T(_)}function T(M){return{ts:0,messages:[],bindings:M||[],level:{label:"",value:0}}}function $(M){const G={type:M.constructor.name,msg:M.message,stack:M.stack};for(const U in M)G[U]===void 0&&(G[U]=M[U]);return G}function B(M){return typeof M.timestamp=="function"?M.timestamp:M.timestamp===!1?he:le}function j(){return{}}function Q(M){return M}function ae(){}function he(){return!1}function le(){return Date.now()}function fe(){return Math.round(Date.now()/1e3)}function ve(){return new Date(Date.now()).toISOString()}function me(){function M(G){return typeof G<"u"&&G}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return M(self)||M(window)||M(this)||{}}}return Qo}var zi={},Bh;function kl(){return Bh||(Bh=1,Object.defineProperty(zi,"__esModule",{value:!0}),zi.PINO_CUSTOM_CONTEXT_KEY=zi.PINO_LOGGER_DEFAULTS=void 0,zi.PINO_LOGGER_DEFAULTS={level:"info"},zi.PINO_CUSTOM_CONTEXT_KEY="custom_context"),zi}var rr={},Vh;function E1(){if(Vh)return rr;Vh=1,Object.defineProperty(rr,"__esModule",{value:!0}),rr.generateChildLogger=rr.formatChildLoggerContext=rr.getLoggerContext=rr.setBrowserLoggerContext=rr.getBrowserLoggerContext=rr.getDefaultLoggerOptions=void 0;const c=kl();function i(g){return Object.assign(Object.assign({},g),{level:g?.level||c.PINO_LOGGER_DEFAULTS.level})}rr.getDefaultLoggerOptions=i;function r(g,E=c.PINO_CUSTOM_CONTEXT_KEY){return g[E]||""}rr.getBrowserLoggerContext=r;function s(g,E,y=c.PINO_CUSTOM_CONTEXT_KEY){return g[y]=E,g}rr.setBrowserLoggerContext=s;function a(g,E=c.PINO_CUSTOM_CONTEXT_KEY){let y="";return typeof g.bindings>"u"?y=r(g,E):y=g.bindings().context||"",y}rr.getLoggerContext=a;function l(g,E,y=c.PINO_CUSTOM_CONTEXT_KEY){const S=a(g,y);return S.trim()?`${S}/${E}`:E}rr.formatChildLoggerContext=l;function d(g,E,y=c.PINO_CUSTOM_CONTEXT_KEY){const S=l(g,E,y),T=g.child({context:S});return s(T,S,y)}return rr.generateChildLogger=d,rr}(function(c){Object.defineProperty(c,"__esModule",{value:!0}),c.pino=void 0;const i=Hl.exports,r=i.__importDefault(b1());Object.defineProperty(c,"pino",{enumerable:!0,get:function(){return r.default}}),i.__exportStar(kl(),c),i.__exportStar(E1(),c)})(Ne);class I1 extends Hi{constructor(i){super(),this.opts=i,this.protocol="wc",this.version=2}}class x1 extends Hi{constructor(i,r){super(),this.core=i,this.logger=r,this.records=new Map}}class P1{constructor(i,r){this.logger=i,this.core=r}}class S1 extends Hi{constructor(i,r){super(),this.relayer=i,this.logger=r}}class O1 extends Hi{constructor(i){super()}}class C1{constructor(i,r,s,a){this.core=i,this.logger=r,this.name=s}}class A1 extends Hi{constructor(i,r){super(),this.relayer=i,this.logger=r}}class R1 extends Hi{constructor(i,r){super(),this.core=i,this.logger=r}}class T1{constructor(i,r){this.projectId=i,this.logger=r}}class N1{constructor(i,r){this.projectId=i,this.logger=r}}class F1{constructor(i){this.opts=i,this.protocol="wc",this.version=2}}class $1{constructor(i){this.client=i}}var bc={},Kl={};(function(c){Object.defineProperty(c,"__esModule",{value:!0});var i=V0,r=Rl;c.DIGEST_LENGTH=64,c.BLOCK_SIZE=128;var s=function(){function g(){this.digestLength=c.DIGEST_LENGTH,this.blockSize=c.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return g.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},g.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},g.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._tempHi),r.wipe(this._tempLo),this.reset()},g.prototype.update=function(E,y){if(y===void 0&&(y=E.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var S=0;if(this._bytesHashed+=y,this._bufferLength>0){for(;this._bufferLength<c.BLOCK_SIZE&&y>0;)this._buffer[this._bufferLength++]=E[S++],y--;this._bufferLength===this.blockSize&&(l(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(y>=this.blockSize&&(S=l(this._tempHi,this._tempLo,this._stateHi,this._stateLo,E,S,y),y%=this.blockSize);y>0;)this._buffer[this._bufferLength++]=E[S++],y--;return this},g.prototype.finish=function(E){if(!this._finished){var y=this._bytesHashed,S=this._bufferLength,T=y/536870912|0,$=y<<3,B=y%128<112?128:256;this._buffer[S]=128;for(var j=S+1;j<B-8;j++)this._buffer[j]=0;i.writeUint32BE(T,this._buffer,B-8),i.writeUint32BE($,this._buffer,B-4),l(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,B),this._finished=!0}for(var j=0;j<this.digestLength/8;j++)i.writeUint32BE(this._stateHi[j],E,j*8),i.writeUint32BE(this._stateLo[j],E,j*8+4);return this},g.prototype.digest=function(){var E=new Uint8Array(this.digestLength);return this.finish(E),E},g.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},g.prototype.restoreState=function(E){return this._stateHi.set(E.stateHi),this._stateLo.set(E.stateLo),this._bufferLength=E.bufferLength,E.buffer&&this._buffer.set(E.buffer),this._bytesHashed=E.bytesHashed,this._finished=!1,this},g.prototype.cleanSavedState=function(E){r.wipe(E.stateHi),r.wipe(E.stateLo),E.buffer&&r.wipe(E.buffer),E.bufferLength=0,E.bytesHashed=0},g}();c.SHA512=s;var a=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function l(g,E,y,S,T,$,B){for(var j=y[0],Q=y[1],ae=y[2],he=y[3],le=y[4],fe=y[5],ve=y[6],me=y[7],M=S[0],G=S[1],U=S[2],pe=S[3],m=S[4],I=S[5],P=S[6],L=S[7],_,w,Y,ee,Z,F,k,X;B>=128;){for(var ce=0;ce<16;ce++){var xe=8*ce+$;g[ce]=i.readUint32BE(T,xe),E[ce]=i.readUint32BE(T,xe+4)}for(var ce=0;ce<80;ce++){var jt=j,be=Q,It=ae,z=he,q=le,N=fe,u=ve,O=me,se=M,_e=G,Se=U,De=pe,je=m,Re=I,xt=P,mt=L;if(_=me,w=L,Z=w&65535,F=w>>>16,k=_&65535,X=_>>>16,_=(le>>>14|m<<32-14)^(le>>>18|m<<32-18)^(m>>>41-32|le<<32-(41-32)),w=(m>>>14|le<<32-14)^(m>>>18|le<<32-18)^(le>>>41-32|m<<32-(41-32)),Z+=w&65535,F+=w>>>16,k+=_&65535,X+=_>>>16,_=le&fe^~le&ve,w=m&I^~m&P,Z+=w&65535,F+=w>>>16,k+=_&65535,X+=_>>>16,_=a[ce*2],w=a[ce*2+1],Z+=w&65535,F+=w>>>16,k+=_&65535,X+=_>>>16,_=g[ce%16],w=E[ce%16],Z+=w&65535,F+=w>>>16,k+=_&65535,X+=_>>>16,F+=Z>>>16,k+=F>>>16,X+=k>>>16,Y=k&65535|X<<16,ee=Z&65535|F<<16,_=Y,w=ee,Z=w&65535,F=w>>>16,k=_&65535,X=_>>>16,_=(j>>>28|M<<32-28)^(M>>>34-32|j<<32-(34-32))^(M>>>39-32|j<<32-(39-32)),w=(M>>>28|j<<32-28)^(j>>>34-32|M<<32-(34-32))^(j>>>39-32|M<<32-(39-32)),Z+=w&65535,F+=w>>>16,k+=_&65535,X+=_>>>16,_=j&Q^j&ae^Q&ae,w=M&G^M&U^G&U,Z+=w&65535,F+=w>>>16,k+=_&65535,X+=_>>>16,F+=Z>>>16,k+=F>>>16,X+=k>>>16,O=k&65535|X<<16,mt=Z&65535|F<<16,_=z,w=De,Z=w&65535,F=w>>>16,k=_&65535,X=_>>>16,_=Y,w=ee,Z+=w&65535,F+=w>>>16,k+=_&65535,X+=_>>>16,F+=Z>>>16,k+=F>>>16,X+=k>>>16,z=k&65535|X<<16,De=Z&65535|F<<16,Q=jt,ae=be,he=It,le=z,fe=q,ve=N,me=u,j=O,G=se,U=_e,pe=Se,m=De,I=je,P=Re,L=xt,M=mt,ce%16===15)for(var xe=0;xe<16;xe++)_=g[xe],w=E[xe],Z=w&65535,F=w>>>16,k=_&65535,X=_>>>16,_=g[(xe+9)%16],w=E[(xe+9)%16],Z+=w&65535,F+=w>>>16,k+=_&65535,X+=_>>>16,Y=g[(xe+1)%16],ee=E[(xe+1)%16],_=(Y>>>1|ee<<32-1)^(Y>>>8|ee<<32-8)^Y>>>7,w=(ee>>>1|Y<<32-1)^(ee>>>8|Y<<32-8)^(ee>>>7|Y<<32-7),Z+=w&65535,F+=w>>>16,k+=_&65535,X+=_>>>16,Y=g[(xe+14)%16],ee=E[(xe+14)%16],_=(Y>>>19|ee<<32-19)^(ee>>>61-32|Y<<32-(61-32))^Y>>>6,w=(ee>>>19|Y<<32-19)^(Y>>>61-32|ee<<32-(61-32))^(ee>>>6|Y<<32-6),Z+=w&65535,F+=w>>>16,k+=_&65535,X+=_>>>16,F+=Z>>>16,k+=F>>>16,X+=k>>>16,g[xe]=k&65535|X<<16,E[xe]=Z&65535|F<<16}_=j,w=M,Z=w&65535,F=w>>>16,k=_&65535,X=_>>>16,_=y[0],w=S[0],Z+=w&65535,F+=w>>>16,k+=_&65535,X+=_>>>16,F+=Z>>>16,k+=F>>>16,X+=k>>>16,y[0]=j=k&65535|X<<16,S[0]=M=Z&65535|F<<16,_=Q,w=G,Z=w&65535,F=w>>>16,k=_&65535,X=_>>>16,_=y[1],w=S[1],Z+=w&65535,F+=w>>>16,k+=_&65535,X+=_>>>16,F+=Z>>>16,k+=F>>>16,X+=k>>>16,y[1]=Q=k&65535|X<<16,S[1]=G=Z&65535|F<<16,_=ae,w=U,Z=w&65535,F=w>>>16,k=_&65535,X=_>>>16,_=y[2],w=S[2],Z+=w&65535,F+=w>>>16,k+=_&65535,X+=_>>>16,F+=Z>>>16,k+=F>>>16,X+=k>>>16,y[2]=ae=k&65535|X<<16,S[2]=U=Z&65535|F<<16,_=he,w=pe,Z=w&65535,F=w>>>16,k=_&65535,X=_>>>16,_=y[3],w=S[3],Z+=w&65535,F+=w>>>16,k+=_&65535,X+=_>>>16,F+=Z>>>16,k+=F>>>16,X+=k>>>16,y[3]=he=k&65535|X<<16,S[3]=pe=Z&65535|F<<16,_=le,w=m,Z=w&65535,F=w>>>16,k=_&65535,X=_>>>16,_=y[4],w=S[4],Z+=w&65535,F+=w>>>16,k+=_&65535,X+=_>>>16,F+=Z>>>16,k+=F>>>16,X+=k>>>16,y[4]=le=k&65535|X<<16,S[4]=m=Z&65535|F<<16,_=fe,w=I,Z=w&65535,F=w>>>16,k=_&65535,X=_>>>16,_=y[5],w=S[5],Z+=w&65535,F+=w>>>16,k+=_&65535,X+=_>>>16,F+=Z>>>16,k+=F>>>16,X+=k>>>16,y[5]=fe=k&65535|X<<16,S[5]=I=Z&65535|F<<16,_=ve,w=P,Z=w&65535,F=w>>>16,k=_&65535,X=_>>>16,_=y[6],w=S[6],Z+=w&65535,F+=w>>>16,k+=_&65535,X+=_>>>16,F+=Z>>>16,k+=F>>>16,X+=k>>>16,y[6]=ve=k&65535|X<<16,S[6]=P=Z&65535|F<<16,_=me,w=L,Z=w&65535,F=w>>>16,k=_&65535,X=_>>>16,_=y[7],w=S[7],Z+=w&65535,F+=w>>>16,k+=_&65535,X+=_>>>16,F+=Z>>>16,k+=F>>>16,X+=k>>>16,y[7]=me=k&65535|X<<16,S[7]=L=Z&65535|F<<16,$+=128,B-=128}return $}function d(g){var E=new s;E.update(g);var y=E.digest();return E.clean(),y}c.hash=d})(Kl);(function(c){Object.defineProperty(c,"__esModule",{value:!0}),c.convertSecretKeyToX25519=c.convertPublicKeyToX25519=c.verify=c.sign=c.extractPublicKeyFromSecretKey=c.generateKeyPair=c.generateKeyPairFromSeed=c.SEED_LENGTH=c.SECRET_KEY_LENGTH=c.PUBLIC_KEY_LENGTH=c.SIGNATURE_LENGTH=void 0;const i=Tl,r=Kl,s=Rl;c.SIGNATURE_LENGTH=64,c.PUBLIC_KEY_LENGTH=32,c.SECRET_KEY_LENGTH=64,c.SEED_LENGTH=32;function a(z){const q=new Float64Array(16);if(z)for(let N=0;N<z.length;N++)q[N]=z[N];return q}const l=new Uint8Array(32);l[0]=9;const d=a(),g=a([1]),E=a([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),y=a([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),S=a([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),T=a([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),$=a([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function B(z,q){for(let N=0;N<16;N++)z[N]=q[N]|0}function j(z){let q=1;for(let N=0;N<16;N++){let u=z[N]+q+65535;q=Math.floor(u/65536),z[N]=u-q*65536}z[0]+=q-1+37*(q-1)}function Q(z,q,N){const u=~(N-1);for(let O=0;O<16;O++){const se=u&(z[O]^q[O]);z[O]^=se,q[O]^=se}}function ae(z,q){const N=a(),u=a();for(let O=0;O<16;O++)u[O]=q[O];j(u),j(u),j(u);for(let O=0;O<2;O++){N[0]=u[0]-65517;for(let _e=1;_e<15;_e++)N[_e]=u[_e]-65535-(N[_e-1]>>16&1),N[_e-1]&=65535;N[15]=u[15]-32767-(N[14]>>16&1);const se=N[15]>>16&1;N[14]&=65535,Q(u,N,1-se)}for(let O=0;O<16;O++)z[2*O]=u[O]&255,z[2*O+1]=u[O]>>8}function he(z,q){let N=0;for(let u=0;u<32;u++)N|=z[u]^q[u];return(1&N-1>>>8)-1}function le(z,q){const N=new Uint8Array(32),u=new Uint8Array(32);return ae(N,z),ae(u,q),he(N,u)}function fe(z){const q=new Uint8Array(32);return ae(q,z),q[0]&1}function ve(z,q){for(let N=0;N<16;N++)z[N]=q[2*N]+(q[2*N+1]<<8);z[15]&=32767}function me(z,q,N){for(let u=0;u<16;u++)z[u]=q[u]+N[u]}function M(z,q,N){for(let u=0;u<16;u++)z[u]=q[u]-N[u]}function G(z,q,N){let u,O,se=0,_e=0,Se=0,De=0,je=0,Re=0,xt=0,mt=0,at=0,Me=0,Qe=0,Xe=0,ot=0,ke=0,Ze=0,Le=0,Be=0,ht=0,Ue=0,Pt=0,$t=0,Ht=0,kt=0,qt=0,Yt=0,ir=0,jr=0,Qt=0,Kr=0,oi=0,Pi=0,lt=N[0],rt=N[1],ft=N[2],pt=N[3],ct=N[4],it=N[5],St=N[6],Ot=N[7],dt=N[8],Ct=N[9],gt=N[10],_t=N[11],yt=N[12],Ye=N[13],At=N[14],Rt=N[15];u=q[0],se+=u*lt,_e+=u*rt,Se+=u*ft,De+=u*pt,je+=u*ct,Re+=u*it,xt+=u*St,mt+=u*Ot,at+=u*dt,Me+=u*Ct,Qe+=u*gt,Xe+=u*_t,ot+=u*yt,ke+=u*Ye,Ze+=u*At,Le+=u*Rt,u=q[1],_e+=u*lt,Se+=u*rt,De+=u*ft,je+=u*pt,Re+=u*ct,xt+=u*it,mt+=u*St,at+=u*Ot,Me+=u*dt,Qe+=u*Ct,Xe+=u*gt,ot+=u*_t,ke+=u*yt,Ze+=u*Ye,Le+=u*At,Be+=u*Rt,u=q[2],Se+=u*lt,De+=u*rt,je+=u*ft,Re+=u*pt,xt+=u*ct,mt+=u*it,at+=u*St,Me+=u*Ot,Qe+=u*dt,Xe+=u*Ct,ot+=u*gt,ke+=u*_t,Ze+=u*yt,Le+=u*Ye,Be+=u*At,ht+=u*Rt,u=q[3],De+=u*lt,je+=u*rt,Re+=u*ft,xt+=u*pt,mt+=u*ct,at+=u*it,Me+=u*St,Qe+=u*Ot,Xe+=u*dt,ot+=u*Ct,ke+=u*gt,Ze+=u*_t,Le+=u*yt,Be+=u*Ye,ht+=u*At,Ue+=u*Rt,u=q[4],je+=u*lt,Re+=u*rt,xt+=u*ft,mt+=u*pt,at+=u*ct,Me+=u*it,Qe+=u*St,Xe+=u*Ot,ot+=u*dt,ke+=u*Ct,Ze+=u*gt,Le+=u*_t,Be+=u*yt,ht+=u*Ye,Ue+=u*At,Pt+=u*Rt,u=q[5],Re+=u*lt,xt+=u*rt,mt+=u*ft,at+=u*pt,Me+=u*ct,Qe+=u*it,Xe+=u*St,ot+=u*Ot,ke+=u*dt,Ze+=u*Ct,Le+=u*gt,Be+=u*_t,ht+=u*yt,Ue+=u*Ye,Pt+=u*At,$t+=u*Rt,u=q[6],xt+=u*lt,mt+=u*rt,at+=u*ft,Me+=u*pt,Qe+=u*ct,Xe+=u*it,ot+=u*St,ke+=u*Ot,Ze+=u*dt,Le+=u*Ct,Be+=u*gt,ht+=u*_t,Ue+=u*yt,Pt+=u*Ye,$t+=u*At,Ht+=u*Rt,u=q[7],mt+=u*lt,at+=u*rt,Me+=u*ft,Qe+=u*pt,Xe+=u*ct,ot+=u*it,ke+=u*St,Ze+=u*Ot,Le+=u*dt,Be+=u*Ct,ht+=u*gt,Ue+=u*_t,Pt+=u*yt,$t+=u*Ye,Ht+=u*At,kt+=u*Rt,u=q[8],at+=u*lt,Me+=u*rt,Qe+=u*ft,Xe+=u*pt,ot+=u*ct,ke+=u*it,Ze+=u*St,Le+=u*Ot,Be+=u*dt,ht+=u*Ct,Ue+=u*gt,Pt+=u*_t,$t+=u*yt,Ht+=u*Ye,kt+=u*At,qt+=u*Rt,u=q[9],Me+=u*lt,Qe+=u*rt,Xe+=u*ft,ot+=u*pt,ke+=u*ct,Ze+=u*it,Le+=u*St,Be+=u*Ot,ht+=u*dt,Ue+=u*Ct,Pt+=u*gt,$t+=u*_t,Ht+=u*yt,kt+=u*Ye,qt+=u*At,Yt+=u*Rt,u=q[10],Qe+=u*lt,Xe+=u*rt,ot+=u*ft,ke+=u*pt,Ze+=u*ct,Le+=u*it,Be+=u*St,ht+=u*Ot,Ue+=u*dt,Pt+=u*Ct,$t+=u*gt,Ht+=u*_t,kt+=u*yt,qt+=u*Ye,Yt+=u*At,ir+=u*Rt,u=q[11],Xe+=u*lt,ot+=u*rt,ke+=u*ft,Ze+=u*pt,Le+=u*ct,Be+=u*it,ht+=u*St,Ue+=u*Ot,Pt+=u*dt,$t+=u*Ct,Ht+=u*gt,kt+=u*_t,qt+=u*yt,Yt+=u*Ye,ir+=u*At,jr+=u*Rt,u=q[12],ot+=u*lt,ke+=u*rt,Ze+=u*ft,Le+=u*pt,Be+=u*ct,ht+=u*it,Ue+=u*St,Pt+=u*Ot,$t+=u*dt,Ht+=u*Ct,kt+=u*gt,qt+=u*_t,Yt+=u*yt,ir+=u*Ye,jr+=u*At,Qt+=u*Rt,u=q[13],ke+=u*lt,Ze+=u*rt,Le+=u*ft,Be+=u*pt,ht+=u*ct,Ue+=u*it,Pt+=u*St,$t+=u*Ot,Ht+=u*dt,kt+=u*Ct,qt+=u*gt,Yt+=u*_t,ir+=u*yt,jr+=u*Ye,Qt+=u*At,Kr+=u*Rt,u=q[14],Ze+=u*lt,Le+=u*rt,Be+=u*ft,ht+=u*pt,Ue+=u*ct,Pt+=u*it,$t+=u*St,Ht+=u*Ot,kt+=u*dt,qt+=u*Ct,Yt+=u*gt,ir+=u*_t,jr+=u*yt,Qt+=u*Ye,Kr+=u*At,oi+=u*Rt,u=q[15],Le+=u*lt,Be+=u*rt,ht+=u*ft,Ue+=u*pt,Pt+=u*ct,$t+=u*it,Ht+=u*St,kt+=u*Ot,qt+=u*dt,Yt+=u*Ct,ir+=u*gt,jr+=u*_t,Qt+=u*yt,Kr+=u*Ye,oi+=u*At,Pi+=u*Rt,se+=38*Be,_e+=38*ht,Se+=38*Ue,De+=38*Pt,je+=38*$t,Re+=38*Ht,xt+=38*kt,mt+=38*qt,at+=38*Yt,Me+=38*ir,Qe+=38*jr,Xe+=38*Qt,ot+=38*Kr,ke+=38*oi,Ze+=38*Pi,O=1,u=se+O+65535,O=Math.floor(u/65536),se=u-O*65536,u=_e+O+65535,O=Math.floor(u/65536),_e=u-O*65536,u=Se+O+65535,O=Math.floor(u/65536),Se=u-O*65536,u=De+O+65535,O=Math.floor(u/65536),De=u-O*65536,u=je+O+65535,O=Math.floor(u/65536),je=u-O*65536,u=Re+O+65535,O=Math.floor(u/65536),Re=u-O*65536,u=xt+O+65535,O=Math.floor(u/65536),xt=u-O*65536,u=mt+O+65535,O=Math.floor(u/65536),mt=u-O*65536,u=at+O+65535,O=Math.floor(u/65536),at=u-O*65536,u=Me+O+65535,O=Math.floor(u/65536),Me=u-O*65536,u=Qe+O+65535,O=Math.floor(u/65536),Qe=u-O*65536,u=Xe+O+65535,O=Math.floor(u/65536),Xe=u-O*65536,u=ot+O+65535,O=Math.floor(u/65536),ot=u-O*65536,u=ke+O+65535,O=Math.floor(u/65536),ke=u-O*65536,u=Ze+O+65535,O=Math.floor(u/65536),Ze=u-O*65536,u=Le+O+65535,O=Math.floor(u/65536),Le=u-O*65536,se+=O-1+37*(O-1),O=1,u=se+O+65535,O=Math.floor(u/65536),se=u-O*65536,u=_e+O+65535,O=Math.floor(u/65536),_e=u-O*65536,u=Se+O+65535,O=Math.floor(u/65536),Se=u-O*65536,u=De+O+65535,O=Math.floor(u/65536),De=u-O*65536,u=je+O+65535,O=Math.floor(u/65536),je=u-O*65536,u=Re+O+65535,O=Math.floor(u/65536),Re=u-O*65536,u=xt+O+65535,O=Math.floor(u/65536),xt=u-O*65536,u=mt+O+65535,O=Math.floor(u/65536),mt=u-O*65536,u=at+O+65535,O=Math.floor(u/65536),at=u-O*65536,u=Me+O+65535,O=Math.floor(u/65536),Me=u-O*65536,u=Qe+O+65535,O=Math.floor(u/65536),Qe=u-O*65536,u=Xe+O+65535,O=Math.floor(u/65536),Xe=u-O*65536,u=ot+O+65535,O=Math.floor(u/65536),ot=u-O*65536,u=ke+O+65535,O=Math.floor(u/65536),ke=u-O*65536,u=Ze+O+65535,O=Math.floor(u/65536),Ze=u-O*65536,u=Le+O+65535,O=Math.floor(u/65536),Le=u-O*65536,se+=O-1+37*(O-1),z[0]=se,z[1]=_e,z[2]=Se,z[3]=De,z[4]=je,z[5]=Re,z[6]=xt,z[7]=mt,z[8]=at,z[9]=Me,z[10]=Qe,z[11]=Xe,z[12]=ot,z[13]=ke,z[14]=Ze,z[15]=Le}function U(z,q){G(z,q,q)}function pe(z,q){const N=a();let u;for(u=0;u<16;u++)N[u]=q[u];for(u=253;u>=0;u--)U(N,N),u!==2&&u!==4&&G(N,N,q);for(u=0;u<16;u++)z[u]=N[u]}function m(z,q){const N=a();let u;for(u=0;u<16;u++)N[u]=q[u];for(u=250;u>=0;u--)U(N,N),u!==1&&G(N,N,q);for(u=0;u<16;u++)z[u]=N[u]}function I(z,q){const N=a(),u=a(),O=a(),se=a(),_e=a(),Se=a(),De=a(),je=a(),Re=a();M(N,z[1],z[0]),M(Re,q[1],q[0]),G(N,N,Re),me(u,z[0],z[1]),me(Re,q[0],q[1]),G(u,u,Re),G(O,z[3],q[3]),G(O,O,y),G(se,z[2],q[2]),me(se,se,se),M(_e,u,N),M(Se,se,O),me(De,se,O),me(je,u,N),G(z[0],_e,Se),G(z[1],je,De),G(z[2],De,Se),G(z[3],_e,je)}function P(z,q,N){for(let u=0;u<4;u++)Q(z[u],q[u],N)}function L(z,q){const N=a(),u=a(),O=a();pe(O,q[2]),G(N,q[0],O),G(u,q[1],O),ae(z,u),z[31]^=fe(N)<<7}function _(z,q,N){B(z[0],d),B(z[1],g),B(z[2],g),B(z[3],d);for(let u=255;u>=0;--u){const O=N[u/8|0]>>(u&7)&1;P(z,q,O),I(q,z),I(z,z),P(z,q,O)}}function w(z,q){const N=[a(),a(),a(),a()];B(N[0],S),B(N[1],T),B(N[2],g),G(N[3],S,T),_(z,N,q)}function Y(z){if(z.length!==c.SEED_LENGTH)throw new Error(`ed25519: seed must be ${c.SEED_LENGTH} bytes`);const q=(0,r.hash)(z);q[0]&=248,q[31]&=127,q[31]|=64;const N=new Uint8Array(32),u=[a(),a(),a(),a()];w(u,q),L(N,u);const O=new Uint8Array(64);return O.set(z),O.set(N,32),{publicKey:N,secretKey:O}}c.generateKeyPairFromSeed=Y;function ee(z){const q=(0,i.randomBytes)(32,z),N=Y(q);return(0,s.wipe)(q),N}c.generateKeyPair=ee;function Z(z){if(z.length!==c.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${c.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(z.subarray(32))}c.extractPublicKeyFromSecretKey=Z;const F=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function k(z,q){let N,u,O,se;for(u=63;u>=32;--u){for(N=0,O=u-32,se=u-12;O<se;++O)q[O]+=N-16*q[u]*F[O-(u-32)],N=Math.floor((q[O]+128)/256),q[O]-=N*256;q[O]+=N,q[u]=0}for(N=0,O=0;O<32;O++)q[O]+=N-(q[31]>>4)*F[O],N=q[O]>>8,q[O]&=255;for(O=0;O<32;O++)q[O]-=N*F[O];for(u=0;u<32;u++)q[u+1]+=q[u]>>8,z[u]=q[u]&255}function X(z){const q=new Float64Array(64);for(let N=0;N<64;N++)q[N]=z[N];for(let N=0;N<64;N++)z[N]=0;k(z,q)}function ce(z,q){const N=new Float64Array(64),u=[a(),a(),a(),a()],O=(0,r.hash)(z.subarray(0,32));O[0]&=248,O[31]&=127,O[31]|=64;const se=new Uint8Array(64);se.set(O.subarray(32),32);const _e=new r.SHA512;_e.update(se.subarray(32)),_e.update(q);const Se=_e.digest();_e.clean(),X(Se),w(u,Se),L(se,u),_e.reset(),_e.update(se.subarray(0,32)),_e.update(z.subarray(32)),_e.update(q);const De=_e.digest();X(De);for(let je=0;je<32;je++)N[je]=Se[je];for(let je=0;je<32;je++)for(let Re=0;Re<32;Re++)N[je+Re]+=De[je]*O[Re];return k(se.subarray(32),N),se}c.sign=ce;function xe(z,q){const N=a(),u=a(),O=a(),se=a(),_e=a(),Se=a(),De=a();return B(z[2],g),ve(z[1],q),U(O,z[1]),G(se,O,E),M(O,O,z[2]),me(se,z[2],se),U(_e,se),U(Se,_e),G(De,Se,_e),G(N,De,O),G(N,N,se),m(N,N),G(N,N,O),G(N,N,se),G(N,N,se),G(z[0],N,se),U(u,z[0]),G(u,u,se),le(u,O)&&G(z[0],z[0],$),U(u,z[0]),G(u,u,se),le(u,O)?-1:(fe(z[0])===q[31]>>7&&M(z[0],d,z[0]),G(z[3],z[0],z[1]),0)}function jt(z,q,N){const u=new Uint8Array(32),O=[a(),a(),a(),a()],se=[a(),a(),a(),a()];if(N.length!==c.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${c.SIGNATURE_LENGTH} bytes`);if(xe(se,z))return!1;const _e=new r.SHA512;_e.update(N.subarray(0,32)),_e.update(z),_e.update(q);const Se=_e.digest();return X(Se),_(O,se,Se),w(se,N.subarray(32)),I(O,se),L(u,O),!he(N,u)}c.verify=jt;function be(z){let q=[a(),a(),a(),a()];if(xe(q,z))throw new Error("Ed25519: invalid public key");let N=a(),u=a(),O=q[1];me(N,g,O),M(u,g,O),pe(u,u),G(N,N,u);let se=new Uint8Array(32);return ae(se,N),se}c.convertPublicKeyToX25519=be;function It(z){const q=(0,r.hash)(z.subarray(0,32));q[0]&=248,q[31]&=127,q[31]|=64;const N=new Uint8Array(q.subarray(0,32));return(0,s.wipe)(q),N}c.convertSecretKeyToX25519=It})(bc);const D1="EdDSA",L1="JWT",Bl=".",Vl="base64url",j1="utf8",q1="utf8",M1=":",z1="did",U1="key",Gh="base58btc",H1="z",k1="K36",K1=32;function fa(c){return da(vc(Wn(c),j1),Vl)}function Gl(c){const i=vc(k1,Gh),r=H1+da(G0([i,c]),Gh);return[z1,U1,r].join(M1)}function B1(c){return da(c,Vl)}function V1(c){return vc([fa(c.header),fa(c.payload)].join(Bl),q1)}function G1(c){return[fa(c.header),fa(c.payload),B1(c.signature)].join(Bl)}function Wh(c=Tl.randomBytes(K1)){return bc.generateKeyPairFromSeed(c)}async function W1(c,i,r,s,a=ue.fromMiliseconds(Date.now())){const l={alg:D1,typ:L1},d=Gl(s.publicKey),g=a+r,E={iss:d,sub:c,aud:i,iat:a,exp:g},y=V1({header:l,payload:E}),S=bc.sign(s.secretKey,y);return G1({header:l,payload:E,signature:S})}const J1=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),Y1=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",Jh=c=>c.split("?")[0],Yh=10,Q1=J1();class X1{constructor(i){if(this.url=i,this.events=new mr.exports.EventEmitter,this.registering=!1,!Fh(i))throw new Error(`Provided URL is not compatible with WebSocket connection: ${i}`);this.url=i}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(i,r){this.events.on(i,r)}once(i,r){this.events.once(i,r)}off(i,r){this.events.off(i,r)}removeListener(i,r){this.events.removeListener(i,r)}async open(i=this.url){await this.register(i)}async close(){return new Promise((i,r)=>{if(typeof this.socket>"u"){r(new Error("Connection already closed"));return}this.socket.onclose=s=>{this.onClose(s),i()},this.socket.close()})}async send(i){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(Wn(i))}catch(r){this.onError(i.id,r)}}register(i=this.url){if(!Fh(i))throw new Error(`Provided URL is not compatible with WebSocket connection: ${i}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((s,a)=>{this.events.once("register_error",l=>{this.resetMaxListeners(),a(l)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return a(new Error("WebSocket connection is missing or invalid"));s(this.socket)})})}return this.url=i,this.registering=!0,new Promise((r,s)=>{const a=new URLSearchParams(i).get("origin"),l=$m.isReactNative()?{headers:{origin:a}}:{rejectUnauthorized:!Dm(i)},d=new Q1(i,[],l);Y1()?d.onerror=g=>{const E=g;s(this.emitError(E.error))}:d.on("error",g=>{s(this.emitError(g))}),d.onopen=()=>{this.onOpen(d),r(d)}})}onOpen(i){i.onmessage=r=>this.onPayload(r),i.onclose=r=>this.onClose(r),this.socket=i,this.registering=!1,this.events.emit("open")}onClose(i){this.socket=void 0,this.registering=!1,this.events.emit("close",i)}onPayload(i){if(typeof i.data>"u")return;const r=typeof i.data=="string"?ga(i.data):i.data;this.events.emit("payload",r)}onError(i,r){const s=this.parseError(r),a=s.message||s.toString(),l=mc(i,a);this.events.emit("payload",l)}parseError(i,r=this.url){return Lm(i,Jh(r),"WS")}resetMaxListeners(){this.events.getMaxListeners()>Yh&&this.events.setMaxListeners(Yh)}emitError(i){const r=this.parseError(new Error(i?.message||`WebSocket connection failed for host: ${Jh(this.url)}`));return this.events.emit("register_error",r),r}}var hc={exports:{}};(function(c,i){var r=200,s="__lodash_hash_undefined__",a=1,l=2,d=9007199254740991,g="[object Arguments]",E="[object Array]",y="[object AsyncFunction]",S="[object Boolean]",T="[object Date]",$="[object Error]",B="[object Function]",j="[object GeneratorFunction]",Q="[object Map]",ae="[object Number]",he="[object Null]",le="[object Object]",fe="[object Promise]",ve="[object Proxy]",me="[object RegExp]",M="[object Set]",G="[object String]",U="[object Symbol]",pe="[object Undefined]",m="[object WeakMap]",I="[object ArrayBuffer]",P="[object DataView]",L="[object Float32Array]",_="[object Float64Array]",w="[object Int8Array]",Y="[object Int16Array]",ee="[object Int32Array]",Z="[object Uint8Array]",F="[object Uint8ClampedArray]",k="[object Uint16Array]",X="[object Uint32Array]",ce=/[\\^$.*+?()[\]{}|]/g,xe=/^\[object .+?Constructor\]$/,jt=/^(?:0|[1-9]\d*)$/,be={};be[L]=be[_]=be[w]=be[Y]=be[ee]=be[Z]=be[F]=be[k]=be[X]=!0,be[g]=be[E]=be[I]=be[S]=be[P]=be[T]=be[$]=be[B]=be[Q]=be[ae]=be[le]=be[me]=be[M]=be[G]=be[m]=!1;var It=typeof bi=="object"&&bi&&bi.Object===Object&&bi,z=typeof self=="object"&&self&&self.Object===Object&&self,q=It||z||Function("return this")(),N=i&&!i.nodeType&&i,u=N&&!0&&c&&!c.nodeType&&c,O=u&&u.exports===N,se=O&&It.process,_e=function(){try{return se&&se.binding&&se.binding("util")}catch{}}(),Se=_e&&_e.isTypedArray;function De(v,C){for(var W=-1,re=v==null?0:v.length,Ge=0,Ee=[];++W<re;){var et=v[W];C(et,W,v)&&(Ee[Ge++]=et)}return Ee}function je(v,C){for(var W=-1,re=C.length,Ge=v.length;++W<re;)v[Ge+W]=C[W];return v}function Re(v,C){for(var W=-1,re=v==null?0:v.length;++W<re;)if(C(v[W],W,v))return!0;return!1}function xt(v,C){for(var W=-1,re=Array(v);++W<v;)re[W]=C(W);return re}function mt(v){return function(C){return v(C)}}function at(v,C){return v.has(C)}function Me(v,C){return v?.[C]}function Qe(v){var C=-1,W=Array(v.size);return v.forEach(function(re,Ge){W[++C]=[Ge,re]}),W}function Xe(v,C){return function(W){return v(C(W))}}function ot(v){var C=-1,W=Array(v.size);return v.forEach(function(re){W[++C]=re}),W}var ke=Array.prototype,Ze=Function.prototype,Le=Object.prototype,Be=q["__core-js_shared__"],ht=Ze.toString,Ue=Le.hasOwnProperty,Pt=function(){var v=/[^.]+$/.exec(Be&&Be.keys&&Be.keys.IE_PROTO||"");return v?"Symbol(src)_1."+v:""}(),$t=Le.toString,Ht=RegExp("^"+ht.call(Ue).replace(ce,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),kt=O?q.Buffer:void 0,qt=q.Symbol,Yt=q.Uint8Array,ir=Le.propertyIsEnumerable,jr=ke.splice,Qt=qt?qt.toStringTag:void 0,Kr=Object.getOwnPropertySymbols,oi=kt?kt.isBuffer:void 0,Pi=Xe(Object.keys,Object),lt=fr(q,"DataView"),rt=fr(q,"Map"),ft=fr(q,"Promise"),pt=fr(q,"Set"),ct=fr(q,"WeakMap"),it=fr(Object,"create"),St=Vr(lt),Ot=Vr(rt),dt=Vr(ft),Ct=Vr(pt),gt=Vr(ct),_t=qt?qt.prototype:void 0,yt=_t?_t.valueOf:void 0;function Ye(v){var C=-1,W=v==null?0:v.length;for(this.clear();++C<W;){var re=v[C];this.set(re[0],re[1])}}function At(){this.__data__=it?it(null):{},this.size=0}function Rt(v){var C=this.has(v)&&delete this.__data__[v];return this.size-=C?1:0,C}function _a(v){var C=this.__data__;if(it){var W=C[v];return W===s?void 0:W}return Ue.call(C,v)?C[v]:void 0}function wa(v){var C=this.__data__;return it?C[v]!==void 0:Ue.call(C,v)}function ba(v,C){var W=this.__data__;return this.size+=this.has(v)?0:1,W[v]=it&&C===void 0?s:C,this}Ye.prototype.clear=At,Ye.prototype.delete=Rt,Ye.prototype.get=_a,Ye.prototype.has=wa,Ye.prototype.set=ba;function _r(v){var C=-1,W=v==null?0:v.length;for(this.clear();++C<W;){var re=v[C];this.set(re[0],re[1])}}function Ea(){this.__data__=[],this.size=0}function Ia(v){var C=this.__data__,W=Si(C,v);if(W<0)return!1;var re=C.length-1;return W==re?C.pop():jr.call(C,W,1),--this.size,!0}function xa(v){var C=this.__data__,W=Si(C,v);return W<0?void 0:C[W][1]}function Pa(v){return Si(this.__data__,v)>-1}function Sa(v,C){var W=this.__data__,re=Si(W,v);return re<0?(++this.size,W.push([v,C])):W[re][1]=C,this}_r.prototype.clear=Ea,_r.prototype.delete=Ia,_r.prototype.get=xa,_r.prototype.has=Pa,_r.prototype.set=Sa;function Br(v){var C=-1,W=v==null?0:v.length;for(this.clear();++C<W;){var re=v[C];this.set(re[0],re[1])}}function Ki(){this.size=0,this.__data__={hash:new Ye,map:new(rt||_r),string:new Ye}}function Oa(v){var C=ci(this,v).delete(v);return this.size-=C?1:0,C}function Bi(v){return ci(this,v).get(v)}function Ca(v){return ci(this,v).has(v)}function Aa(v,C){var W=ci(this,v),re=W.size;return W.set(v,C),this.size+=W.size==re?0:1,this}Br.prototype.clear=Ki,Br.prototype.delete=Oa,Br.prototype.get=Bi,Br.prototype.has=Ca,Br.prototype.set=Aa;function Vi(v){var C=-1,W=v==null?0:v.length;for(this.__data__=new Br;++C<W;)this.add(v[C])}function Xn(v){return this.__data__.set(v,s),this}function Zn(v){return this.__data__.has(v)}Vi.prototype.add=Vi.prototype.push=Xn,Vi.prototype.has=Zn;function Ar(v){var C=this.__data__=new _r(v);this.size=C.size}function Ra(){this.__data__=new _r,this.size=0}function Ta(v){var C=this.__data__,W=C.delete(v);return this.size=C.size,W}function Na(v){return this.__data__.get(v)}function Fa(v){return this.__data__.has(v)}function es(v,C){var W=this.__data__;if(W instanceof _r){var re=W.__data__;if(!rt||re.length<r-1)return re.push([v,C]),this.size=++W.size,this;W=this.__data__=new Br(re)}return W.set(v,C),this.size=W.size,this}Ar.prototype.clear=Ra,Ar.prototype.delete=Ta,Ar.prototype.get=Na,Ar.prototype.has=Fa,Ar.prototype.set=es;function ts(v,C){var W=Ji(v),re=!W&&ps(v),Ge=!W&&!re&&_n(v),Ee=!W&&!re&&!Ge&&ys(v),et=W||re||Ge||Ee,Tt=et?xt(v.length,String):[],Fe=Tt.length;for(var We in v)(C||Ue.call(v,We))&&!(et&&(We=="length"||Ge&&(We=="offset"||We=="parent")||Ee&&(We=="buffer"||We=="byteLength"||We=="byteOffset")||cs(We,Fe)))&&Tt.push(We);return Tt}function Si(v,C){for(var W=v.length;W--;)if(fs(v[W][0],C))return W;return-1}function vn(v,C,W){var re=C(v);return Ji(v)?re:je(re,W(v))}function Oi(v){return v==null?v===void 0?pe:he:Qt&&Qt in Object(v)?as(v):La(v)}function mn(v){return Ai(v)&&Oi(v)==g}function Ci(v,C,W,re,Ge){return v===C?!0:v==null||C==null||!Ai(v)&&!Ai(C)?v!==v&&C!==C:rs(v,C,W,re,Ci,Ge)}function rs(v,C,W,re,Ge,Ee){var et=Ji(v),Tt=Ji(C),Fe=et?E:qr(v),We=Tt?E:qr(C);Fe=Fe==g?le:Fe,We=We==g?le:We;var wt=Fe==le,nr=We==le,Nt=Fe==We;if(Nt&&_n(v)){if(!_n(C))return!1;et=!0,wt=!1}if(Nt&&!wt)return Ee||(Ee=new Ar),et||ys(v)?Gi(v,C,W,re,Ge,Ee):Da(v,C,Fe,W,re,Ge,Ee);if(!(W&a)){var tt=wt&&Ue.call(v,"__wrapped__"),Xt=nr&&Ue.call(C,"__wrapped__");if(tt||Xt){var Rr=tt?v.value():v,wr=Xt?C.value():C;return Ee||(Ee=new Ar),Ge(Rr,wr,W,re,Ee)}}return Nt?(Ee||(Ee=new Ar),ss(v,C,W,re,Ge,Ee)):!1}function $a(v){if(!gs(v)||hs(v))return!1;var C=Yi(v)?Ht:xe;return C.test(Vr(v))}function is(v){return Ai(v)&&ds(v.length)&&!!be[Oi(v)]}function ns(v){if(!ls(v))return Pi(v);var C=[];for(var W in Object(v))Ue.call(v,W)&&W!="constructor"&&C.push(W);return C}function Gi(v,C,W,re,Ge,Ee){var et=W&a,Tt=v.length,Fe=C.length;if(Tt!=Fe&&!(et&&Fe>Tt))return!1;var We=Ee.get(v);if(We&&Ee.get(C))return We==C;var wt=-1,nr=!0,Nt=W&l?new Vi:void 0;for(Ee.set(v,C),Ee.set(C,v);++wt<Tt;){var tt=v[wt],Xt=C[wt];if(re)var Rr=et?re(Xt,tt,wt,C,v,Ee):re(tt,Xt,wt,v,C,Ee);if(Rr!==void 0){if(Rr)continue;nr=!1;break}if(Nt){if(!Re(C,function(wr,Mr){if(!at(Nt,Mr)&&(tt===wr||Ge(tt,wr,W,re,Ee)))return Nt.push(Mr)})){nr=!1;break}}else if(!(tt===Xt||Ge(tt,Xt,W,re,Ee))){nr=!1;break}}return Ee.delete(v),Ee.delete(C),nr}function Da(v,C,W,re,Ge,Ee,et){switch(W){case P:if(v.byteLength!=C.byteLength||v.byteOffset!=C.byteOffset)return!1;v=v.buffer,C=C.buffer;case I:return!(v.byteLength!=C.byteLength||!Ee(new Yt(v),new Yt(C)));case S:case T:case ae:return fs(+v,+C);case $:return v.name==C.name&&v.message==C.message;case me:case G:return v==C+"";case Q:var Tt=Qe;case M:var Fe=re&a;if(Tt||(Tt=ot),v.size!=C.size&&!Fe)return!1;var We=et.get(v);if(We)return We==C;re|=l,et.set(v,C);var wt=Gi(Tt(v),Tt(C),re,Ge,Ee,et);return et.delete(v),wt;case U:if(yt)return yt.call(v)==yt.call(C)}return!1}function ss(v,C,W,re,Ge,Ee){var et=W&a,Tt=Wi(v),Fe=Tt.length,We=Wi(C),wt=We.length;if(Fe!=wt&&!et)return!1;for(var nr=Fe;nr--;){var Nt=Tt[nr];if(!(et?Nt in C:Ue.call(C,Nt)))return!1}var tt=Ee.get(v);if(tt&&Ee.get(C))return tt==C;var Xt=!0;Ee.set(v,C),Ee.set(C,v);for(var Rr=et;++nr<Fe;){Nt=Tt[nr];var wr=v[Nt],Mr=C[Nt];if(re)var wn=et?re(Mr,wr,Nt,C,v,Ee):re(wr,Mr,Nt,v,C,Ee);if(!(wn===void 0?wr===Mr||Ge(wr,Mr,W,re,Ee):wn)){Xt=!1;break}Rr||(Rr=Nt=="constructor")}if(Xt&&!Rr){var Ri=v.constructor,Mt=C.constructor;Ri!=Mt&&"constructor"in v&&"constructor"in C&&!(typeof Ri=="function"&&Ri instanceof Ri&&typeof Mt=="function"&&Mt instanceof Mt)&&(Xt=!1)}return Ee.delete(v),Ee.delete(C),Xt}function Wi(v){return vn(v,Ma,os)}function ci(v,C){var W=v.__data__;return us(C)?W[typeof C=="string"?"string":"hash"]:W.map}function fr(v,C){var W=Me(v,C);return $a(W)?W:void 0}function as(v){var C=Ue.call(v,Qt),W=v[Qt];try{v[Qt]=void 0;var re=!0}catch{}var Ge=$t.call(v);return re&&(C?v[Qt]=W:delete v[Qt]),Ge}var os=Kr?function(v){return v==null?[]:(v=Object(v),De(Kr(v),function(C){return ir.call(v,C)}))}:Ve,qr=Oi;(lt&&qr(new lt(new ArrayBuffer(1)))!=P||rt&&qr(new rt)!=Q||ft&&qr(ft.resolve())!=fe||pt&&qr(new pt)!=M||ct&&qr(new ct)!=m)&&(qr=function(v){var C=Oi(v),W=C==le?v.constructor:void 0,re=W?Vr(W):"";if(re)switch(re){case St:return P;case Ot:return Q;case dt:return fe;case Ct:return M;case gt:return m}return C});function cs(v,C){return C=C??d,!!C&&(typeof v=="number"||jt.test(v))&&v>-1&&v%1==0&&v<C}function us(v){var C=typeof v;return C=="string"||C=="number"||C=="symbol"||C=="boolean"?v!=="__proto__":v===null}function hs(v){return!!Pt&&Pt in v}function ls(v){var C=v&&v.constructor,W=typeof C=="function"&&C.prototype||Le;return v===W}function La(v){return $t.call(v)}function Vr(v){if(v!=null){try{return ht.call(v)}catch{}try{return v+""}catch{}}return""}function fs(v,C){return v===C||v!==v&&C!==C}var ps=mn(function(){return arguments}())?mn:function(v){return Ai(v)&&Ue.call(v,"callee")&&!ir.call(v,"callee")},Ji=Array.isArray;function ja(v){return v!=null&&ds(v.length)&&!Yi(v)}var _n=oi||Ke;function qa(v,C){return Ci(v,C)}function Yi(v){if(!gs(v))return!1;var C=Oi(v);return C==B||C==j||C==y||C==ve}function ds(v){return typeof v=="number"&&v>-1&&v%1==0&&v<=d}function gs(v){var C=typeof v;return v!=null&&(C=="object"||C=="function")}function Ai(v){return v!=null&&typeof v=="object"}var ys=Se?mt(Se):is;function Ma(v){return ja(v)?ts(v):ns(v)}function Ve(){return[]}function Ke(){return!1}c.exports=qa})(hc,hc.exports);const Z1=hc.exports;function e_(c,i){return i=i||{},new Promise(function(r,s){var a=new XMLHttpRequest,l=[],d=[],g={},E=function(){return{ok:(a.status/100|0)==2,statusText:a.statusText,status:a.status,url:a.responseURL,text:function(){return Promise.resolve(a.responseText)},json:function(){return Promise.resolve(a.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([a.response]))},clone:E,headers:{keys:function(){return l},entries:function(){return d},get:function(S){return g[S.toLowerCase()]},has:function(S){return S.toLowerCase()in g}}}};for(var y in a.open(i.method||"get",c,!0),a.onload=function(){a.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,function(S,T,$){l.push(T=T.toLowerCase()),d.push([T,$]),g[T]=g[T]?g[T]+","+$:$}),r(E())},a.onerror=s,a.withCredentials=i.credentials=="include",i.headers)a.setRequestHeader(y,i.headers[y]);a.send(i.body||null)})}const t_=Object.freeze(Object.defineProperty({__proto__:null,default:e_},Symbol.toStringTag,{value:"Module"})),Qh=Al(t_);var r_=self.fetch||(self.fetch=Qh.default||Qh);function i_(c,i){if(c.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),s=0;s<r.length;s++)r[s]=255;for(var a=0;a<c.length;a++){var l=c.charAt(a),d=l.charCodeAt(0);if(r[d]!==255)throw new TypeError(l+" is ambiguous");r[d]=a}var g=c.length,E=c.charAt(0),y=Math.log(g)/Math.log(256),S=Math.log(256)/Math.log(g);function T(j){if(j instanceof Uint8Array||(ArrayBuffer.isView(j)?j=new Uint8Array(j.buffer,j.byteOffset,j.byteLength):Array.isArray(j)&&(j=Uint8Array.from(j))),!(j instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(j.length===0)return"";for(var Q=0,ae=0,he=0,le=j.length;he!==le&&j[he]===0;)he++,Q++;for(var fe=(le-he)*S+1>>>0,ve=new Uint8Array(fe);he!==le;){for(var me=j[he],M=0,G=fe-1;(me!==0||M<ae)&&G!==-1;G--,M++)me+=256*ve[G]>>>0,ve[G]=me%g>>>0,me=me/g>>>0;if(me!==0)throw new Error("Non-zero carry");ae=M,he++}for(var U=fe-ae;U!==fe&&ve[U]===0;)U++;for(var pe=E.repeat(Q);U<fe;++U)pe+=c.charAt(ve[U]);return pe}function $(j){if(typeof j!="string")throw new TypeError("Expected String");if(j.length===0)return new Uint8Array;var Q=0;if(j[Q]!==" "){for(var ae=0,he=0;j[Q]===E;)ae++,Q++;for(var le=(j.length-Q)*y+1>>>0,fe=new Uint8Array(le);j[Q];){var ve=r[j.charCodeAt(Q)];if(ve===255)return;for(var me=0,M=le-1;(ve!==0||me<he)&&M!==-1;M--,me++)ve+=g*fe[M]>>>0,fe[M]=ve%256>>>0,ve=ve/256>>>0;if(ve!==0)throw new Error("Non-zero carry");he=me,Q++}if(j[Q]!==" "){for(var G=le-he;G!==le&&fe[G]===0;)G++;for(var U=new Uint8Array(ae+(le-G)),pe=ae;G!==le;)U[pe++]=fe[G++];return U}}}function B(j){var Q=$(j);if(Q)return Q;throw new Error(`Non-${i} character`)}return{encode:T,decodeUnsafe:$,decode:B}}var n_=i_,s_=n_;const Wl=c=>{if(c instanceof Uint8Array&&c.constructor.name==="Uint8Array")return c;if(c instanceof ArrayBuffer)return new Uint8Array(c);if(ArrayBuffer.isView(c))return new Uint8Array(c.buffer,c.byteOffset,c.byteLength);throw new Error("Unknown type, must be binary type")},a_=c=>new TextEncoder().encode(c),o_=c=>new TextDecoder().decode(c);class c_{constructor(i,r,s){this.name=i,this.prefix=r,this.baseEncode=s}encode(i){if(i instanceof Uint8Array)return`${this.prefix}${this.baseEncode(i)}`;throw Error("Unknown type, must be binary type")}}class u_{constructor(i,r,s){if(this.name=i,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=s}decode(i){if(typeof i=="string"){if(i.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(i)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(i.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(i){return Jl(this,i)}}class h_{constructor(i){this.decoders=i}or(i){return Jl(this,i)}decode(i){const r=i[0],s=this.decoders[r];if(s)return s.decode(i);throw RangeError(`Unable to decode multibase string ${JSON.stringify(i)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Jl=(c,i)=>new h_({...c.decoders||{[c.prefix]:c},...i.decoders||{[i.prefix]:i}});class l_{constructor(i,r,s,a){this.name=i,this.prefix=r,this.baseEncode=s,this.baseDecode=a,this.encoder=new c_(i,r,s),this.decoder=new u_(i,r,a)}encode(i){return this.encoder.encode(i)}decode(i){return this.decoder.decode(i)}}const va=({name:c,prefix:i,encode:r,decode:s})=>new l_(c,i,r,s),Qn=({prefix:c,name:i,alphabet:r})=>{const{encode:s,decode:a}=s_(r,i);return va({prefix:c,name:i,encode:s,decode:l=>Wl(a(l))})},f_=(c,i,r,s)=>{const a={};for(let S=0;S<i.length;++S)a[i[S]]=S;let l=c.length;for(;c[l-1]==="=";)--l;const d=new Uint8Array(l*r/8|0);let g=0,E=0,y=0;for(let S=0;S<l;++S){const T=a[c[S]];if(T===void 0)throw new SyntaxError(`Non-${s} character`);E=E<<r|T,g+=r,g>=8&&(g-=8,d[y++]=255&E>>g)}if(g>=r||255&E<<8-g)throw new SyntaxError("Unexpected end of data");return d},p_=(c,i,r)=>{const s=i[i.length-1]==="=",a=(1<<r)-1;let l="",d=0,g=0;for(let E=0;E<c.length;++E)for(g=g<<8|c[E],d+=8;d>r;)d-=r,l+=i[a&g>>d];if(d&&(l+=i[a&g<<r-d]),s)for(;l.length*r&7;)l+="=";return l},Bt=({name:c,prefix:i,bitsPerChar:r,alphabet:s})=>va({prefix:i,name:c,encode(a){return p_(a,s,r)},decode(a){return f_(a,s,r,c)}}),d_=va({prefix:"\0",name:"identity",encode:c=>o_(c),decode:c=>a_(c)});var g_=Object.freeze({__proto__:null,identity:d_});const y_=Bt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var v_=Object.freeze({__proto__:null,base2:y_});const m_=Bt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var __=Object.freeze({__proto__:null,base8:m_});const w_=Qn({prefix:"9",name:"base10",alphabet:"0123456789"});var b_=Object.freeze({__proto__:null,base10:w_});const E_=Bt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),I_=Bt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var x_=Object.freeze({__proto__:null,base16:E_,base16upper:I_});const P_=Bt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),S_=Bt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),O_=Bt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),C_=Bt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),A_=Bt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),R_=Bt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),T_=Bt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),N_=Bt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),F_=Bt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var $_=Object.freeze({__proto__:null,base32:P_,base32upper:S_,base32pad:O_,base32padupper:C_,base32hex:A_,base32hexupper:R_,base32hexpad:T_,base32hexpadupper:N_,base32z:F_});const D_=Qn({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),L_=Qn({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var j_=Object.freeze({__proto__:null,base36:D_,base36upper:L_});const q_=Qn({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),M_=Qn({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var z_=Object.freeze({__proto__:null,base58btc:q_,base58flickr:M_});const U_=Bt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),H_=Bt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),k_=Bt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),K_=Bt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var B_=Object.freeze({__proto__:null,base64:U_,base64pad:H_,base64url:k_,base64urlpad:K_});const Yl=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),V_=Yl.reduce((c,i,r)=>(c[r]=i,c),[]),G_=Yl.reduce((c,i,r)=>(c[i.codePointAt(0)]=r,c),[]);function W_(c){return c.reduce((i,r)=>(i+=V_[r],i),"")}function J_(c){const i=[];for(const r of c){const s=G_[r.codePointAt(0)];if(s===void 0)throw new Error(`Non-base256emoji character: ${r}`);i.push(s)}return new Uint8Array(i)}const Y_=va({prefix:"\u{1F680}",name:"base256emoji",encode:W_,decode:J_});var Q_=Object.freeze({__proto__:null,base256emoji:Y_}),X_=Ql,Xh=128,Z_=127,ew=~Z_,tw=Math.pow(2,31);function Ql(c,i,r){i=i||[],r=r||0;for(var s=r;c>=tw;)i[r++]=c&255|Xh,c/=128;for(;c&ew;)i[r++]=c&255|Xh,c>>>=7;return i[r]=c|0,Ql.bytes=r-s+1,i}var rw=lc,iw=128,Zh=127;function lc(c,s){var r=0,s=s||0,a=0,l=s,d,g=c.length;do{if(l>=g)throw lc.bytes=0,new RangeError("Could not decode varint");d=c[l++],r+=a<28?(d&Zh)<<a:(d&Zh)*Math.pow(2,a),a+=7}while(d>=iw);return lc.bytes=l-s,r}var nw=Math.pow(2,7),sw=Math.pow(2,14),aw=Math.pow(2,21),ow=Math.pow(2,28),cw=Math.pow(2,35),uw=Math.pow(2,42),hw=Math.pow(2,49),lw=Math.pow(2,56),fw=Math.pow(2,63),pw=function(c){return c<nw?1:c<sw?2:c<aw?3:c<ow?4:c<cw?5:c<uw?6:c<hw?7:c<lw?8:c<fw?9:10},dw={encode:X_,decode:rw,encodingLength:pw},Xl=dw;const el=(c,i,r=0)=>(Xl.encode(c,i,r),i),tl=c=>Xl.encodingLength(c),fc=(c,i)=>{const r=i.byteLength,s=tl(c),a=s+tl(r),l=new Uint8Array(a+r);return el(c,l,0),el(r,l,s),l.set(i,a),new gw(c,r,i,l)};class gw{constructor(i,r,s,a){this.code=i,this.size=r,this.digest=s,this.bytes=a}}const Zl=({name:c,code:i,encode:r})=>new yw(c,i,r);class yw{constructor(i,r,s){this.name=i,this.code=r,this.encode=s}digest(i){if(i instanceof Uint8Array){const r=this.encode(i);return r instanceof Uint8Array?fc(this.code,r):r.then(s=>fc(this.code,s))}else throw Error("Unknown type, must be binary type")}}const ef=c=>async i=>new Uint8Array(await crypto.subtle.digest(c,i)),vw=Zl({name:"sha2-256",code:18,encode:ef("SHA-256")}),mw=Zl({name:"sha2-512",code:19,encode:ef("SHA-512")});var _w=Object.freeze({__proto__:null,sha256:vw,sha512:mw});const tf=0,ww="identity",rf=Wl,bw=c=>fc(tf,rf(c)),Ew={code:tf,name:ww,encode:rf,digest:bw};var Iw=Object.freeze({__proto__:null,identity:Ew});new TextEncoder,new TextDecoder;const rl={...g_,...v_,...__,...b_,...x_,...$_,...j_,...z_,...B_,...Q_};({..._w,...Iw});function nf(c){return globalThis.Buffer!=null?new Uint8Array(c.buffer,c.byteOffset,c.byteLength):c}function xw(c=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?nf(globalThis.Buffer.allocUnsafe(c)):new Uint8Array(c)}function sf(c,i,r,s){return{name:c,prefix:i,encoder:{name:c,prefix:i,encode:r},decoder:{decode:s}}}const il=sf("utf8","u",c=>"u"+new TextDecoder("utf8").decode(c),c=>new TextEncoder().encode(c.substring(1))),Xo=sf("ascii","a",c=>{let i="a";for(let r=0;r<c.length;r++)i+=String.fromCharCode(c[r]);return i},c=>{c=c.substring(1);const i=xw(c.length);for(let r=0;r<c.length;r++)i[r]=c.charCodeAt(r);return i}),Pw={utf8:il,"utf-8":il,hex:rl.base16,latin1:Xo,ascii:Xo,binary:Xo,...rl};function Sw(c,i="utf8"){const r=Pw[i];if(!r)throw new Error(`Unsupported encoding "${i}"`);return(i==="utf8"||i==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?nf(globalThis.Buffer.from(c,"utf-8")):r.decoder.decode(`${r.prefix}${c}`)}const af="wc",Ow=2,Ec="core",Ei=`${af}@2:${Ec}:`,Cw={name:Ec,logger:"error"},Aw={database:":memory:"},Rw="crypto",nl="client_ed25519_seed",Tw=ue.ONE_DAY,Nw="keychain",Fw="0.3",$w="messages",Dw="0.3",Lw=ue.SIX_HOURS,jw="publisher",of="irn",qw="error",cf="wss://relay.walletconnect.com",sl="wss://relay.walletconnect.org",Mw="relayer",Jt={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},zw="_subscription",ri={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},Uw=ue.ONE_SECOND,Hw="2.11.0",kw=1e4,Kw="0.3",Bw="WALLETCONNECT_CLIENT_ID",Dr={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},Vw="subscription",Gw="0.3",Ww=ue.FIVE_SECONDS*1e3,Jw="pairing",Yw="0.3",qn={wc_pairingDelete:{req:{ttl:ue.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:ue.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:ue.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:ue.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:ue.ONE_DAY,prompt:!1,tag:0},res:{ttl:ue.ONE_DAY,prompt:!1,tag:0}}},Kn={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},kr={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},Qw="history",Xw="0.3",Zw="expirer",Cr={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},eb="0.3",Zo="verify-api",pn="https://verify.walletconnect.com",pc="https://verify.walletconnect.org",tb=[pn,pc],rb="echo",ib="https://echo.walletconnect.com";class nb{constructor(i,r){this.core=i,this.logger=r,this.keychain=new Map,this.name=Nw,this.version=Fw,this.initialized=!1,this.storagePrefix=Ei,this.init=async()=>{if(!this.initialized){const s=await this.getKeyChain();typeof s<"u"&&(this.keychain=s),this.initialized=!0}},this.has=s=>(this.isInitialized(),this.keychain.has(s)),this.set=async(s,a)=>{this.isInitialized(),this.keychain.set(s,a),await this.persist()},this.get=s=>{this.isInitialized();const a=this.keychain.get(s);if(typeof a>"u"){const{message:l}=ie("NO_MATCHING_KEY",`${this.name}: ${s}`);throw new Error(l)}return a},this.del=async s=>{this.isInitialized(),this.keychain.delete(s),await this.persist()},this.core=i,this.logger=Ne.generateChildLogger(r,this.name)}get context(){return Ne.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(i){await this.core.storage.setItem(this.storageKey,Dl(i))}async getKeyChain(){const i=await this.core.storage.getItem(this.storageKey);return typeof i<"u"?Ll(i):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:i}=ie("NOT_INITIALIZED",this.name);throw new Error(i)}}}class sb{constructor(i,r,s){this.core=i,this.logger=r,this.name=Rw,this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=a=>(this.isInitialized(),this.keychain.has(a)),this.getClientId=async()=>{this.isInitialized();const a=await this.getClientSeed(),l=Wh(a);return Gl(l.publicKey)},this.generateKeyPair=()=>{this.isInitialized();const a=Y0();return this.setPrivateKey(a.publicKey,a.privateKey)},this.signJWT=async a=>{this.isInitialized();const l=await this.getClientSeed(),d=Wh(l),g=oc();return await W1(g,a,Tw,d)},this.generateSharedKey=(a,l,d)=>{this.isInitialized();const g=this.getPrivateKey(a),E=Q0(g,l);return this.setSymKey(E,d)},this.setSymKey=async(a,l)=>{this.isInitialized();const d=l||X0(a);return await this.keychain.set(d,a),d},this.deleteKeyPair=async a=>{this.isInitialized(),await this.keychain.del(a)},this.deleteSymKey=async a=>{this.isInitialized(),await this.keychain.del(a)},this.encode=async(a,l,d)=>{this.isInitialized();const g=Z0(d),E=Wn(l);if(Oh(g)){const $=g.senderPublicKey,B=g.receiverPublicKey;a=await this.generateSharedKey($,B)}const y=this.getSymKey(a),{type:S,senderPublicKey:T}=g;return em({type:S,symKey:y,message:E,senderPublicKey:T})},this.decode=async(a,l,d)=>{this.isInitialized();const g=tm(l,d);if(Oh(g)){const E=g.receiverPublicKey,y=g.senderPublicKey;a=await this.generateSharedKey(E,y)}try{const E=this.getSymKey(a),y=rm({symKey:E,encoded:l});return ga(y)}catch(E){this.logger.error(`Failed to decode message from topic: '${a}', clientId: '${await this.getClientId()}'`),this.logger.error(E)}},this.getPayloadType=a=>{const l=Ch(a);return im(l.type)},this.getPayloadSenderPublicKey=a=>{const l=Ch(a);return l.senderPublicKey?da(l.senderPublicKey,nm):void 0},this.core=i,this.logger=Ne.generateChildLogger(r,this.name),this.keychain=s||new nb(this.core,this.logger)}get context(){return Ne.getLoggerContext(this.logger)}async setPrivateKey(i,r){return await this.keychain.set(i,r),i}getPrivateKey(i){return this.keychain.get(i)}async getClientSeed(){let i="";try{i=this.keychain.get(nl)}catch{i=oc(),await this.keychain.set(nl,i)}return Sw(i,"base16")}getSymKey(i){return this.keychain.get(i)}isInitialized(){if(!this.initialized){const{message:i}=ie("NOT_INITIALIZED",this.name);throw new Error(i)}}}class ab extends P1{constructor(i,r){super(i,r),this.logger=i,this.core=r,this.messages=new Map,this.name=$w,this.version=Dw,this.initialized=!1,this.storagePrefix=Ei,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const s=await this.getRelayerMessages();typeof s<"u"&&(this.messages=s),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(s){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(s)}finally{this.initialized=!0}}},this.set=async(s,a)=>{this.isInitialized();const l=dn(a);let d=this.messages.get(s);return typeof d>"u"&&(d={}),typeof d[l]<"u"||(d[l]=a,this.messages.set(s,d),await this.persist()),l},this.get=s=>{this.isInitialized();let a=this.messages.get(s);return typeof a>"u"&&(a={}),a},this.has=(s,a)=>{this.isInitialized();const l=this.get(s),d=dn(a);return typeof l[d]<"u"},this.del=async s=>{this.isInitialized(),this.messages.delete(s),await this.persist()},this.logger=Ne.generateChildLogger(i,this.name),this.core=r}get context(){return Ne.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setRelayerMessages(i){await this.core.storage.setItem(this.storageKey,Dl(i))}async getRelayerMessages(){const i=await this.core.storage.getItem(this.storageKey);return typeof i<"u"?Ll(i):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:i}=ie("NOT_INITIALIZED",this.name);throw new Error(i)}}}class ob extends S1{constructor(i,r){super(i,r),this.relayer=i,this.logger=r,this.events=new mr.exports.EventEmitter,this.name=jw,this.queue=new Map,this.publishTimeout=ue.toMiliseconds(ue.TEN_SECONDS),this.needsTransportRestart=!1,this.publish=async(s,a,l)=>{var d;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:s,message:a,opts:l}});try{const g=l?.ttl||Lw,E=cc(l),y=l?.prompt||!1,S=l?.tag||0,T=l?.id||jm().toString(),$={topic:s,message:a,opts:{ttl:g,relay:E,prompt:y,tag:S,id:T}},B=setTimeout(()=>this.queue.set(T,$),this.publishTimeout);try{await await Gn(this.rpcPublish(s,a,g,E,y,S,T),this.publishTimeout,"Failed to publish payload, please try again."),this.removeRequestFromQueue(T),this.relayer.events.emit(Jt.publish,$)}catch(j){if(this.logger.debug("Publishing Payload stalled"),this.needsTransportRestart=!0,(d=l?.internal)!=null&&d.throwOnFailedPublish)throw this.removeRequestFromQueue(T),j;return}finally{clearTimeout(B)}this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:s,message:a,opts:l}})}catch(g){throw this.logger.debug("Failed to Publish Payload"),this.logger.error(g),g}},this.on=(s,a)=>{this.events.on(s,a)},this.once=(s,a)=>{this.events.once(s,a)},this.off=(s,a)=>{this.events.off(s,a)},this.removeListener=(s,a)=>{this.events.removeListener(s,a)},this.relayer=i,this.logger=Ne.generateChildLogger(r,this.name),this.registerEventListeners()}get context(){return Ne.getLoggerContext(this.logger)}rpcPublish(i,r,s,a,l,d,g){var E,y,S,T;const $={method:ca(a.protocol).publish,params:{topic:i,message:r,ttl:s,prompt:l,tag:d},id:g};return wi((E=$.params)==null?void 0:E.prompt)&&((y=$.params)==null||delete y.prompt),wi((S=$.params)==null?void 0:S.tag)&&((T=$.params)==null||delete T.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:$}),this.relayer.request($)}removeRequestFromQueue(i){this.queue.delete(i)}checkQueue(){this.queue.forEach(async i=>{const{topic:r,message:s,opts:a}=i;await this.publish(r,s,a)})}registerEventListeners(){this.relayer.core.heartbeat.on(yn.HEARTBEAT_EVENTS.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(Jt.connection_stalled);return}this.checkQueue()}),this.relayer.on(Jt.message_ack,i=>{this.removeRequestFromQueue(i.id.toString())})}}class cb{constructor(){this.map=new Map,this.set=(i,r)=>{const s=this.get(i);this.exists(i,r)||this.map.set(i,[...s,r])},this.get=i=>this.map.get(i)||[],this.exists=(i,r)=>this.get(i).includes(r),this.delete=(i,r)=>{if(typeof r>"u"){this.map.delete(i);return}if(!this.map.has(i))return;const s=this.get(i);if(!this.exists(i,r))return;const a=s.filter(l=>l!==r);if(!a.length){this.map.delete(i);return}this.map.set(i,a)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var ub=Object.defineProperty,hb=Object.defineProperties,lb=Object.getOwnPropertyDescriptors,al=Object.getOwnPropertySymbols,fb=Object.prototype.hasOwnProperty,pb=Object.prototype.propertyIsEnumerable,ol=(c,i,r)=>i in c?ub(c,i,{enumerable:!0,configurable:!0,writable:!0,value:r}):c[i]=r,Mn=(c,i)=>{for(var r in i||(i={}))fb.call(i,r)&&ol(c,r,i[r]);if(al)for(var r of al(i))pb.call(i,r)&&ol(c,r,i[r]);return c},ec=(c,i)=>hb(c,lb(i));class db extends A1{constructor(i,r){super(i,r),this.relayer=i,this.logger=r,this.subscriptions=new Map,this.topicMap=new cb,this.events=new mr.exports.EventEmitter,this.name=Vw,this.version=Gw,this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=Ei,this.subscribeTimeout=1e4,this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),this.clientId=await this.relayer.core.crypto.getClientId())},this.subscribe=async(s,a)=>{await this.restartToComplete(),this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:s,opts:a}});try{const l=cc(a),d={topic:s,relay:l};this.pending.set(s,d);const g=await this.rpcSubscribe(s,l);return this.onSubscribe(g,d),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:s,opts:a}}),g}catch(l){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(l),l}},this.unsubscribe=async(s,a)=>{await this.restartToComplete(),this.isInitialized(),typeof a?.id<"u"?await this.unsubscribeById(s,a.id,a):await this.unsubscribeByTopic(s,a)},this.isSubscribed=async s=>this.topics.includes(s)?!0:await new Promise((a,l)=>{const d=new ue.Watch;d.start(this.pendingSubscriptionWatchLabel);const g=setInterval(()=>{!this.pending.has(s)&&this.topics.includes(s)&&(clearInterval(g),d.stop(this.pendingSubscriptionWatchLabel),a(!0)),d.elapsed(this.pendingSubscriptionWatchLabel)>=Ww&&(clearInterval(g),d.stop(this.pendingSubscriptionWatchLabel),l(new Error("Subscription resolution timeout")))},this.pollingInterval)}).catch(()=>!1),this.on=(s,a)=>{this.events.on(s,a)},this.once=(s,a)=>{this.events.once(s,a)},this.off=(s,a)=>{this.events.off(s,a)},this.removeListener=(s,a)=>{this.events.removeListener(s,a)},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=i,this.logger=Ne.generateChildLogger(r,this.name),this.clientId=""}get context(){return Ne.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(i,r){let s=!1;try{s=this.getSubscription(i).topic===r}catch{}return s}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(i,r){const s=this.topicMap.get(i);await Promise.all(s.map(async a=>await this.unsubscribeById(i,a,r)))}async unsubscribeById(i,r,s){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:i,id:r,opts:s}});try{const a=cc(s);await this.rpcUnsubscribe(i,r,a);const l=Wt("USER_DISCONNECTED",`${this.name}, ${i}`);await this.onUnsubscribe(i,r,l),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:i,id:r,opts:s}})}catch(a){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(a),a}}async rpcSubscribe(i,r){const s={method:ca(r.protocol).subscribe,params:{topic:i}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s});try{await await Gn(this.relayer.request(s),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(Jt.connection_stalled)}return dn(i+this.clientId)}async rpcBatchSubscribe(i){if(!i.length)return;const r=i[0].relay,s={method:ca(r.protocol).batchSubscribe,params:{topics:i.map(a=>a.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s});try{return await await Gn(this.relayer.request(s),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Payload stalled"),this.relayer.events.emit(Jt.connection_stalled)}}rpcUnsubscribe(i,r,s){const a={method:ca(s.protocol).unsubscribe,params:{topic:i,id:r}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:a}),this.relayer.request(a)}onSubscribe(i,r){this.setSubscription(i,ec(Mn({},r),{id:i})),this.pending.delete(r.topic)}onBatchSubscribe(i){i.length&&i.forEach(r=>{this.setSubscription(r.id,Mn({},r)),this.pending.delete(r.topic)})}async onUnsubscribe(i,r,s){this.events.removeAllListeners(r),this.hasSubscription(r,i)&&this.deleteSubscription(r,s),await this.relayer.messages.del(i)}async setRelayerSubscriptions(i){await this.relayer.core.storage.setItem(this.storageKey,i)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(i,r){this.subscriptions.has(i)||(this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:i,subscription:r}),this.addSubscription(i,r))}addSubscription(i,r){this.subscriptions.set(i,Mn({},r)),this.topicMap.set(r.topic,i),this.events.emit(Dr.created,r)}getSubscription(i){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:i});const r=this.subscriptions.get(i);if(!r){const{message:s}=ie("NO_MATCHING_KEY",`${this.name}: ${i}`);throw new Error(s)}return r}deleteSubscription(i,r){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:i,reason:r});const s=this.getSubscription(i);this.subscriptions.delete(i),this.topicMap.delete(s.topic,i),this.events.emit(Dr.deleted,ec(Mn({},s),{reason:r}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(Dr.sync)}async reset(){if(this.cached.length){const i=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<i;r++){const s=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(s)}}this.events.emit(Dr.resubscribed)}async restore(){try{const i=await this.getRelayerSubscriptions();if(typeof i>"u"||!i.length)return;if(this.subscriptions.size){const{message:r}=ie("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(r)}this.cached=i,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(i){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(i)}}async batchSubscribe(i){if(!i.length)return;const r=await this.rpcBatchSubscribe(i);gn(r)&&this.onBatchSubscribe(r.map((s,a)=>ec(Mn({},i[a]),{id:s})))}async onConnect(){this.restartInProgress||(await this.restart(),this.onEnable())}onDisconnect(){this.onDisable()}async checkPending(){if(!this.initialized||this.relayer.transportExplicitlyClosed)return;const i=[];this.pending.forEach(r=>{i.push(r)}),await this.batchSubscribe(i)}registerEventListeners(){this.relayer.core.heartbeat.on(yn.HEARTBEAT_EVENTS.pulse,async()=>{await this.checkPending()}),this.relayer.on(Jt.connect,async()=>{await this.onConnect()}),this.relayer.on(Jt.disconnect,()=>{this.onDisconnect()}),this.events.on(Dr.created,async i=>{const r=Dr.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:i}),await this.persist()}),this.events.on(Dr.deleted,async i=>{const r=Dr.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:i}),await this.persist()})}isInitialized(){if(!this.initialized){const{message:i}=ie("NOT_INITIALIZED",this.name);throw new Error(i)}}async restartToComplete(){this.restartInProgress&&await new Promise(i=>{const r=setInterval(()=>{this.restartInProgress||(clearInterval(r),i())},this.pollingInterval)})}}var gb=Object.defineProperty,cl=Object.getOwnPropertySymbols,yb=Object.prototype.hasOwnProperty,vb=Object.prototype.propertyIsEnumerable,ul=(c,i,r)=>i in c?gb(c,i,{enumerable:!0,configurable:!0,writable:!0,value:r}):c[i]=r,mb=(c,i)=>{for(var r in i||(i={}))yb.call(i,r)&&ul(c,r,i[r]);if(cl)for(var r of cl(i))vb.call(i,r)&&ul(c,r,i[r]);return c};class _b extends O1{constructor(i){super(i),this.protocol="wc",this.version=2,this.events=new mr.exports.EventEmitter,this.name=Mw,this.transportExplicitlyClosed=!1,this.initialized=!1,this.connectionAttemptInProgress=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","socket stalled"],this.hasExperiencedNetworkDisruption=!1,this.request=async r=>{this.logger.debug("Publishing Request Payload");try{return await this.toEstablishConnection(),await this.provider.request(r)}catch(s){throw this.logger.debug("Failed to Publish Request"),this.logger.error(s),s}},this.onPayloadHandler=r=>{this.onProviderPayload(r)},this.onConnectHandler=()=>{this.events.emit(Jt.connect)},this.onDisconnectHandler=()=>{this.onProviderDisconnect()},this.onProviderErrorHandler=r=>{this.logger.error(r),this.events.emit(Jt.error,r),this.logger.info("Fatal socket error received, closing transport"),this.transportClose()},this.registerProviderListeners=()=>{this.provider.on(ri.payload,this.onPayloadHandler),this.provider.on(ri.connect,this.onConnectHandler),this.provider.on(ri.disconnect,this.onDisconnectHandler),this.provider.on(ri.error,this.onProviderErrorHandler)},this.core=i.core,this.logger=typeof i.logger<"u"&&typeof i.logger!="string"?Ne.generateChildLogger(i.logger,this.name):Ne.pino(Ne.getDefaultLoggerOptions({level:i.logger||qw})),this.messages=new ab(this.logger,i.core),this.subscriber=new db(this,this.logger),this.publisher=new ob(this,this.logger),this.relayUrl=i?.relayUrl||cf,this.projectId=i.projectId,this.bundleId=sm(),this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await this.createProvider(),await Promise.all([this.messages.init(),this.subscriber.init()]);try{await this.transportOpen()}catch{this.logger.warn(`Connection via ${this.relayUrl} failed, attempting to connect via failover domain ${sl}...`),await this.restartTransport(sl)}this.initialized=!0,setTimeout(async()=>{this.subscriber.topics.length===0&&(this.logger.info("No topics subscribed to after init, closing transport"),await this.transportClose(),this.transportExplicitlyClosed=!1)},kw)}get context(){return Ne.getLoggerContext(this.logger)}get connected(){return this.provider.connection.connected}get connecting(){return this.provider.connection.connecting}async publish(i,r,s){this.isInitialized(),await this.publisher.publish(i,r,s),await this.recordMessageEvent({topic:i,message:r,publishedAt:Date.now()})}async subscribe(i,r){var s;this.isInitialized();let a=((s=this.subscriber.topicMap.get(i))==null?void 0:s[0])||"";if(a)return a;let l;const d=g=>{g.topic===i&&(this.subscriber.off(Dr.created,d),l())};return await Promise.all([new Promise(g=>{l=g,this.subscriber.on(Dr.created,d)}),new Promise(async g=>{a=await this.subscriber.subscribe(i,r),g()})]),a}async unsubscribe(i,r){this.isInitialized(),await this.subscriber.unsubscribe(i,r)}on(i,r){this.events.on(i,r)}once(i,r){this.events.once(i,r)}off(i,r){this.events.off(i,r)}removeListener(i,r){this.events.removeListener(i,r)}async transportClose(){this.transportExplicitlyClosed=!0,this.hasExperiencedNetworkDisruption&&this.connected?await Gn(this.provider.disconnect(),1e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.connected&&await this.provider.disconnect()}async transportOpen(i){if(this.transportExplicitlyClosed=!1,await this.confirmOnlineStateOrThrow(),!this.connectionAttemptInProgress){i&&i!==this.relayUrl&&(this.relayUrl=i,await this.transportClose(),await this.createProvider()),this.connectionAttemptInProgress=!0;try{await Promise.all([new Promise(r=>{if(!this.initialized)return r();this.subscriber.once(Dr.resubscribed,()=>{r()})}),new Promise(async(r,s)=>{try{await Gn(this.provider.connect(),1e4,`Socket stalled when trying to connect to ${this.relayUrl}`)}catch(a){s(a);return}r()})])}catch(r){this.logger.error(r);const s=r;if(!this.isConnectionStalled(s.message))throw r;this.provider.events.emit(ri.disconnect)}finally{this.connectionAttemptInProgress=!1,this.hasExperiencedNetworkDisruption=!1}}}async restartTransport(i){await this.confirmOnlineStateOrThrow(),!this.connectionAttemptInProgress&&(this.relayUrl=i||this.relayUrl,await this.transportClose(),await this.createProvider(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await Ah())throw new Error("No internet connection detected. Please restart your network and try again.")}isConnectionStalled(i){return this.staleConnectionErrors.some(r=>i.includes(r))}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const i=await this.core.crypto.signJWT(this.relayUrl);this.provider=new si(new X1(am({sdkVersion:Hw,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:i,useOnCloseEvent:!0,bundleId:this.bundleId}))),this.registerProviderListeners()}async recordMessageEvent(i){const{topic:r,message:s}=i;await this.messages.set(r,s)}async shouldIgnoreMessageEvent(i){const{topic:r,message:s}=i;if(!s||s.length===0)return this.logger.debug(`Ignoring invalid/empty message: ${s}`),!0;if(!await this.subscriber.isSubscribed(r))return this.logger.debug(`Ignoring message for non-subscribed topic ${r}`),!0;const a=this.messages.has(r,s);return a&&this.logger.debug(`Ignoring duplicate message: ${s}`),a}async onProviderPayload(i){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:i}),_c(i)){if(!i.method.endsWith(zw))return;const r=i.params,{topic:s,message:a,publishedAt:l}=r.data,d={topic:s,message:a,publishedAt:l};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(mb({type:"event",event:r.id},d)),this.events.emit(r.id,d),await this.acknowledgePayload(i),await this.onMessageEvent(d)}else wc(i)&&this.events.emit(Jt.message_ack,i)}async onMessageEvent(i){await this.shouldIgnoreMessageEvent(i)||(this.events.emit(Jt.message,i),await this.recordMessageEvent(i))}async acknowledgePayload(i){const r=ya(i.id,!0);await this.provider.connection.send(r)}unregisterProviderListeners(){this.provider.off(ri.payload,this.onPayloadHandler),this.provider.off(ri.connect,this.onConnectHandler),this.provider.off(ri.disconnect,this.onDisconnectHandler),this.provider.off(ri.error,this.onProviderErrorHandler)}async registerEventListeners(){this.events.on(Jt.connection_stalled,()=>{this.restartTransport().catch(r=>this.logger.error(r))});let i=await Ah();om(async r=>{this.initialized&&i!==r&&(i=r,r?await this.restartTransport().catch(s=>this.logger.error(s)):(this.hasExperiencedNetworkDisruption=!0,await this.transportClose().catch(s=>this.logger.error(s))))})}onProviderDisconnect(){this.events.emit(Jt.disconnect),this.attemptToReconnect()}attemptToReconnect(){this.transportExplicitlyClosed||(this.logger.info("attemptToReconnect called. Connecting..."),setTimeout(async()=>{await this.restartTransport().catch(i=>this.logger.error(i))},ue.toMiliseconds(Uw)))}isInitialized(){if(!this.initialized){const{message:i}=ie("NOT_INITIALIZED",this.name);throw new Error(i)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectionAttemptInProgress)return await new Promise(i=>{const r=setInterval(()=>{this.connected&&(clearInterval(r),i())},this.connectionStatusPollingInterval)});await this.restartTransport()}}}var wb=Object.defineProperty,hl=Object.getOwnPropertySymbols,bb=Object.prototype.hasOwnProperty,Eb=Object.prototype.propertyIsEnumerable,ll=(c,i,r)=>i in c?wb(c,i,{enumerable:!0,configurable:!0,writable:!0,value:r}):c[i]=r,fl=(c,i)=>{for(var r in i||(i={}))bb.call(i,r)&&ll(c,r,i[r]);if(hl)for(var r of hl(i))Eb.call(i,r)&&ll(c,r,i[r]);return c};class ma extends C1{constructor(i,r,s,a=Ei,l=void 0){super(i,r,s,a),this.core=i,this.logger=r,this.name=s,this.map=new Map,this.version=Kw,this.cached=[],this.initialized=!1,this.storagePrefix=Ei,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(d=>{this.getKey&&d!==null&&!wi(d)?this.map.set(this.getKey(d),d):W0(d)?this.map.set(d.id,d):J0(d)&&this.map.set(d.topic,d)}),this.cached=[],this.initialized=!0)},this.set=async(d,g)=>{this.isInitialized(),this.map.has(d)?await this.update(d,g):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:d,value:g}),this.map.set(d,g),await this.persist())},this.get=d=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:d}),this.getData(d)),this.getAll=d=>(this.isInitialized(),d?this.values.filter(g=>Object.keys(d).every(E=>Z1(g[E],d[E]))):this.values),this.update=async(d,g)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:d,update:g});const E=fl(fl({},this.getData(d)),g);this.map.set(d,E),await this.persist()},this.delete=async(d,g)=>{this.isInitialized(),this.map.has(d)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:d,reason:g}),this.map.delete(d),await this.persist())},this.logger=Ne.generateChildLogger(r,this.name),this.storagePrefix=a,this.getKey=l}get context(){return Ne.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}async setDataStore(i){await this.core.storage.setItem(this.storageKey,i)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(i){const r=this.map.get(i);if(!r){const{message:s}=ie("NO_MATCHING_KEY",`${this.name}: ${i}`);throw this.logger.error(s),new Error(s)}return r}async persist(){await this.setDataStore(this.values)}async restore(){try{const i=await this.getDataStore();if(typeof i>"u"||!i.length)return;if(this.map.size){const{message:r}=ie("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=i,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(i){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(i)}}isInitialized(){if(!this.initialized){const{message:i}=ie("NOT_INITIALIZED",this.name);throw new Error(i)}}}class Ib{constructor(i,r){this.core=i,this.logger=r,this.name=Jw,this.version=Yw,this.events=new mr.exports,this.initialized=!1,this.storagePrefix=Ei,this.ignoredPayloadTypes=[Nl],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:s})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...s])]},this.create=async()=>{this.isInitialized();const s=oc(),a=await this.core.crypto.setSymKey(s),l=Lr(ue.FIVE_MINUTES),d={protocol:of},g={topic:a,expiry:l,relay:d,active:!1},E=cm({protocol:this.core.protocol,version:this.core.version,topic:a,symKey:s,relay:d});return await this.pairings.set(a,g),await this.core.relayer.subscribe(a),this.core.expirer.set(a,l),{topic:a,uri:E}},this.pair=async s=>{this.isInitialized(),this.isValidPair(s);const{topic:a,symKey:l,relay:d}=Rh(s.uri);let g;if(this.pairings.keys.includes(a)&&(g=this.pairings.get(a),g.active))throw new Error(`Pairing already exists: ${a}. Please try again with a new connection URI.`);const E=Lr(ue.FIVE_MINUTES),y={topic:a,relay:d,expiry:E,active:!1};return await this.pairings.set(a,y),this.core.expirer.set(a,E),s.activatePairing&&await this.activate({topic:a}),this.events.emit(Kn.create,y),this.core.crypto.keychain.has(a)||(await this.core.crypto.setSymKey(l,a),await this.core.relayer.subscribe(a,{relay:d})),y},this.activate=async({topic:s})=>{this.isInitialized();const a=Lr(ue.THIRTY_DAYS);await this.pairings.update(s,{active:!0,expiry:a}),this.core.expirer.set(s,a)},this.ping=async s=>{this.isInitialized(),await this.isValidPing(s);const{topic:a}=s;if(this.pairings.keys.includes(a)){const l=await this.sendRequest(a,"wc_pairingPing",{}),{done:d,resolve:g,reject:E}=ln();this.events.once(Ft("pairing_ping",l),({error:y})=>{y?E(y):g()}),await d()}},this.updateExpiry=async({topic:s,expiry:a})=>{this.isInitialized(),await this.pairings.update(s,{expiry:a})},this.updateMetadata=async({topic:s,metadata:a})=>{this.isInitialized(),await this.pairings.update(s,{peerMetadata:a})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async s=>{this.isInitialized(),await this.isValidDisconnect(s);const{topic:a}=s;this.pairings.keys.includes(a)&&(await this.sendRequest(a,"wc_pairingDelete",Wt("USER_DISCONNECTED")),await this.deletePairing(a))},this.sendRequest=async(s,a,l)=>{const d=Vn(a,l),g=await this.core.crypto.encode(s,d),E=qn[a].req;return this.core.history.set(s,d),this.core.relayer.publish(s,g,E),d.id},this.sendResult=async(s,a,l)=>{const d=ya(s,l),g=await this.core.crypto.encode(a,d),E=await this.core.history.get(a,s),y=qn[E.request.method].res;await this.core.relayer.publish(a,g,y),await this.core.history.resolve(d)},this.sendError=async(s,a,l)=>{const d=mc(s,l),g=await this.core.crypto.encode(a,d),E=await this.core.history.get(a,s),y=qn[E.request.method]?qn[E.request.method].res:qn.unregistered_method.res;await this.core.relayer.publish(a,g,y),await this.core.history.resolve(d)},this.deletePairing=async(s,a)=>{await this.core.relayer.unsubscribe(s),await Promise.all([this.pairings.delete(s,Wt("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(s),a?Promise.resolve():this.core.expirer.del(s)])},this.cleanup=async()=>{const s=this.pairings.getAll().filter(a=>_i(a.expiry));await Promise.all(s.map(a=>this.deletePairing(a.topic)))},this.onRelayEventRequest=s=>{const{topic:a,payload:l}=s;switch(l.method){case"wc_pairingPing":return this.onPairingPingRequest(a,l);case"wc_pairingDelete":return this.onPairingDeleteRequest(a,l);default:return this.onUnknownRpcMethodRequest(a,l)}},this.onRelayEventResponse=async s=>{const{topic:a,payload:l}=s,d=(await this.core.history.get(a,l.id)).request.method;switch(d){case"wc_pairingPing":return this.onPairingPingResponse(a,l);default:return this.onUnknownRpcMethodResponse(d)}},this.onPairingPingRequest=async(s,a)=>{const{id:l}=a;try{this.isValidPing({topic:s}),await this.sendResult(l,s,!0),this.events.emit(Kn.ping,{id:l,topic:s})}catch(d){await this.sendError(l,s,d),this.logger.error(d)}},this.onPairingPingResponse=(s,a)=>{const{id:l}=a;setTimeout(()=>{mi(a)?this.events.emit(Ft("pairing_ping",l),{}):ni(a)&&this.events.emit(Ft("pairing_ping",l),{error:a.error})},500)},this.onPairingDeleteRequest=async(s,a)=>{const{id:l}=a;try{this.isValidDisconnect({topic:s}),await this.deletePairing(s),this.events.emit(Kn.delete,{id:l,topic:s})}catch(d){await this.sendError(l,s,d),this.logger.error(d)}},this.onUnknownRpcMethodRequest=async(s,a)=>{const{id:l,method:d}=a;try{if(this.registeredMethods.includes(d))return;const g=Wt("WC_METHOD_UNSUPPORTED",d);await this.sendError(l,s,g),this.logger.error(g)}catch(g){await this.sendError(l,s,g),this.logger.error(g)}},this.onUnknownRpcMethodResponse=s=>{this.registeredMethods.includes(s)||this.logger.error(Wt("WC_METHOD_UNSUPPORTED",s))},this.isValidPair=s=>{var a;if(!lr(s)){const{message:d}=ie("MISSING_OR_INVALID",`pair() params: ${s}`);throw new Error(d)}if(!um(s.uri)){const{message:d}=ie("MISSING_OR_INVALID",`pair() uri: ${s.uri}`);throw new Error(d)}const l=Rh(s.uri);if(!((a=l?.relay)!=null&&a.protocol)){const{message:d}=ie("MISSING_OR_INVALID","pair() uri#relay-protocol");throw new Error(d)}if(!(l!=null&&l.symKey)){const{message:d}=ie("MISSING_OR_INVALID","pair() uri#symKey");throw new Error(d)}},this.isValidPing=async s=>{if(!lr(s)){const{message:l}=ie("MISSING_OR_INVALID",`ping() params: ${s}`);throw new Error(l)}const{topic:a}=s;await this.isValidPairingTopic(a)},this.isValidDisconnect=async s=>{if(!lr(s)){const{message:l}=ie("MISSING_OR_INVALID",`disconnect() params: ${s}`);throw new Error(l)}const{topic:a}=s;await this.isValidPairingTopic(a)},this.isValidPairingTopic=async s=>{if(!fn(s,!1)){const{message:a}=ie("MISSING_OR_INVALID",`pairing topic should be a string: ${s}`);throw new Error(a)}if(!this.pairings.keys.includes(s)){const{message:a}=ie("NO_MATCHING_KEY",`pairing topic doesn't exist: ${s}`);throw new Error(a)}if(_i(this.pairings.get(s).expiry)){await this.deletePairing(s);const{message:a}=ie("EXPIRED",`pairing topic: ${s}`);throw new Error(a)}},this.core=i,this.logger=Ne.generateChildLogger(r,this.name),this.pairings=new ma(this.core,this.logger,this.name,this.storagePrefix)}get context(){return Ne.getLoggerContext(this.logger)}isInitialized(){if(!this.initialized){const{message:i}=ie("NOT_INITIALIZED",this.name);throw new Error(i)}}registerRelayerEvents(){this.core.relayer.on(Jt.message,async i=>{const{topic:r,message:s}=i;if(!this.pairings.keys.includes(r)||this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(s)))return;const a=await this.core.crypto.decode(r,s);try{_c(a)?(this.core.history.set(r,a),this.onRelayEventRequest({topic:r,payload:a})):wc(a)&&(await this.core.history.resolve(a),await this.onRelayEventResponse({topic:r,payload:a}),this.core.history.delete(r,a.id))}catch(l){this.logger.error(l)}})}registerExpirerEvents(){this.core.expirer.on(Cr.expired,async i=>{const{topic:r}=Fl(i.target);r&&this.pairings.keys.includes(r)&&(await this.deletePairing(r,!0),this.events.emit(Kn.expire,{topic:r}))})}}class xb extends x1{constructor(i,r){super(i,r),this.core=i,this.logger=r,this.records=new Map,this.events=new mr.exports.EventEmitter,this.name=Qw,this.version=Xw,this.cached=[],this.initialized=!1,this.storagePrefix=Ei,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(s=>this.records.set(s.id,s)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(s,a,l)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:s,request:a,chainId:l}),this.records.has(a.id))return;const d={id:a.id,topic:s,request:{method:a.method,params:a.params||null},chainId:l,expiry:Lr(ue.THIRTY_DAYS)};this.records.set(d.id,d),this.events.emit(kr.created,d)},this.resolve=async s=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:s}),!this.records.has(s.id))return;const a=await this.getRecord(s.id);typeof a.response>"u"&&(a.response=ni(s)?{error:s.error}:{result:s.result},this.records.set(a.id,a),this.events.emit(kr.updated,a))},this.get=async(s,a)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:s,id:a}),await this.getRecord(a)),this.delete=(s,a)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:a}),this.values.forEach(l=>{if(l.topic===s){if(typeof a<"u"&&l.id!==a)return;this.records.delete(l.id),this.events.emit(kr.deleted,l)}})},this.exists=async(s,a)=>(this.isInitialized(),this.records.has(a)?(await this.getRecord(a)).topic===s:!1),this.on=(s,a)=>{this.events.on(s,a)},this.once=(s,a)=>{this.events.once(s,a)},this.off=(s,a)=>{this.events.off(s,a)},this.removeListener=(s,a)=>{this.events.removeListener(s,a)},this.logger=Ne.generateChildLogger(r,this.name)}get context(){return Ne.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const i=[];return this.values.forEach(r=>{if(typeof r.response<"u")return;const s={topic:r.topic,request:Vn(r.request.method,r.request.params,r.id),chainId:r.chainId};return i.push(s)}),i}async setJsonRpcRecords(i){await this.core.storage.setItem(this.storageKey,i)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(i){this.isInitialized();const r=this.records.get(i);if(!r){const{message:s}=ie("NO_MATCHING_KEY",`${this.name}: ${i}`);throw new Error(s)}return r}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(kr.sync)}async restore(){try{const i=await this.getJsonRpcRecords();if(typeof i>"u"||!i.length)return;if(this.records.size){const{message:r}=ie("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=i,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(i){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(i)}}registerEventListeners(){this.events.on(kr.created,i=>{const r=kr.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:i}),this.persist()}),this.events.on(kr.updated,i=>{const r=kr.updated;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:i}),this.persist()}),this.events.on(kr.deleted,i=>{const r=kr.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:i}),this.persist()}),this.core.heartbeat.on(yn.HEARTBEAT_EVENTS.pulse,()=>{this.cleanup()})}cleanup(){try{this.records.forEach(i=>{ue.toMiliseconds(i.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${i.id}`),this.delete(i.topic,i.id))})}catch(i){this.logger.warn(i)}}isInitialized(){if(!this.initialized){const{message:i}=ie("NOT_INITIALIZED",this.name);throw new Error(i)}}}class Pb extends R1{constructor(i,r){super(i,r),this.core=i,this.logger=r,this.expirations=new Map,this.events=new mr.exports.EventEmitter,this.name=Zw,this.version=eb,this.cached=[],this.initialized=!1,this.storagePrefix=Ei,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(s=>this.expirations.set(s.target,s)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=s=>{try{const a=this.formatTarget(s);return typeof this.getExpiration(a)<"u"}catch{return!1}},this.set=(s,a)=>{this.isInitialized();const l=this.formatTarget(s),d={target:l,expiry:a};this.expirations.set(l,d),this.checkExpiry(l,d),this.events.emit(Cr.created,{target:l,expiration:d})},this.get=s=>{this.isInitialized();const a=this.formatTarget(s);return this.getExpiration(a)},this.del=s=>{if(this.isInitialized(),this.has(s)){const a=this.formatTarget(s),l=this.getExpiration(a);this.expirations.delete(a),this.events.emit(Cr.deleted,{target:a,expiration:l})}},this.on=(s,a)=>{this.events.on(s,a)},this.once=(s,a)=>{this.events.once(s,a)},this.off=(s,a)=>{this.events.off(s,a)},this.removeListener=(s,a)=>{this.events.removeListener(s,a)},this.logger=Ne.generateChildLogger(r,this.name)}get context(){return Ne.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(i){if(typeof i=="string")return hm(i);if(typeof i=="number")return lm(i);const{message:r}=ie("UNKNOWN_TYPE",`Target type: ${typeof i}`);throw new Error(r)}async setExpirations(i){await this.core.storage.setItem(this.storageKey,i)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(Cr.sync)}async restore(){try{const i=await this.getExpirations();if(typeof i>"u"||!i.length)return;if(this.expirations.size){const{message:r}=ie("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=i,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(i){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(i)}}getExpiration(i){const r=this.expirations.get(i);if(!r){const{message:s}=ie("NO_MATCHING_KEY",`${this.name}: ${i}`);throw this.logger.error(s),new Error(s)}return r}checkExpiry(i,r){const{expiry:s}=r;ue.toMiliseconds(s)-Date.now()<=0&&this.expire(i,r)}expire(i,r){this.expirations.delete(i),this.events.emit(Cr.expired,{target:i,expiration:r})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((i,r)=>this.checkExpiry(r,i))}registerEventListeners(){this.core.heartbeat.on(yn.HEARTBEAT_EVENTS.pulse,()=>this.checkExpirations()),this.events.on(Cr.created,i=>{const r=Cr.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:i}),this.persist()}),this.events.on(Cr.expired,i=>{const r=Cr.expired;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:i}),this.persist()}),this.events.on(Cr.deleted,i=>{const r=Cr.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:i}),this.persist()})}isInitialized(){if(!this.initialized){const{message:i}=ie("NOT_INITIALIZED",this.name);throw new Error(i)}}}class Sb extends T1{constructor(i,r){super(i,r),this.projectId=i,this.logger=r,this.name=Zo,this.initialized=!1,this.queue=[],this.verifyDisabled=!1,this.init=async s=>{if(this.verifyDisabled||fm()||!$l())return;const a=this.getVerifyUrl(s?.verifyUrl);this.verifyUrl!==a&&this.removeIframe(),this.verifyUrl=a;try{await this.createIframe()}catch(l){this.logger.info(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.info(l)}if(!this.initialized){this.removeIframe(),this.verifyUrl=pc;try{await this.createIframe()}catch(l){this.logger.info(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.info(l),this.verifyDisabled=!0}}},this.register=async s=>{this.initialized?this.sendPost(s.attestationId):(this.addToQueue(s.attestationId),await this.init())},this.resolve=async s=>{if(this.isDevEnv)return"";const a=this.getVerifyUrl(s?.verifyUrl);let l;try{l=await this.fetchAttestation(s.attestationId,a)}catch(d){this.logger.info(`failed to resolve attestation: ${s.attestationId} from url: ${a}`),this.logger.info(d),l=await this.fetchAttestation(s.attestationId,pc)}return l},this.fetchAttestation=async(s,a)=>{this.logger.info(`resolving attestation: ${s} from url: ${a}`);const l=this.startAbortTimer(ue.ONE_SECOND*2),d=await fetch(`${a}/attestation/${s}`,{signal:this.abortController.signal});return clearTimeout(l),d.status===200?await d.json():void 0},this.addToQueue=s=>{this.queue.push(s)},this.processQueue=()=>{this.queue.length!==0&&(this.queue.forEach(s=>this.sendPost(s)),this.queue=[])},this.sendPost=s=>{var a;try{if(!this.iframe)return;(a=this.iframe.contentWindow)==null||a.postMessage(s,"*"),this.logger.info(`postMessage sent: ${s} ${this.verifyUrl}`)}catch{}},this.createIframe=async()=>{let s;const a=l=>{l.data==="verify_ready"&&(this.initialized=!0,this.processQueue(),window.removeEventListener("message",a),s())};await Promise.race([new Promise(l=>{if(document.getElementById(Zo))return l();window.addEventListener("message",a);const d=document.createElement("iframe");d.id=Zo,d.src=`${this.verifyUrl}/${this.projectId}`,d.style.display="none",document.body.append(d),this.iframe=d,s=l}),new Promise((l,d)=>setTimeout(()=>{window.removeEventListener("message",a),d("verify iframe load timeout")},ue.toMiliseconds(ue.FIVE_SECONDS)))])},this.removeIframe=()=>{this.iframe&&(this.iframe.remove(),this.iframe=void 0,this.initialized=!1)},this.getVerifyUrl=s=>{let a=s||pn;return tb.includes(a)||(this.logger.info(`verify url: ${a}, not included in trusted list, assigning default: ${pn}`),a=pn),a},this.logger=Ne.generateChildLogger(r,this.name),this.verifyUrl=pn,this.abortController=new AbortController,this.isDevEnv=pm()&&{}.IS_VITEST}get context(){return Ne.getLoggerContext(this.logger)}startAbortTimer(i){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),ue.toMiliseconds(i))}}class Ob extends N1{constructor(i,r){super(i,r),this.projectId=i,this.logger=r,this.context=rb,this.registerDeviceToken=async s=>{const{clientId:a,token:l,notificationType:d,enableEncrypted:g=!1}=s,E=`${ib}/${this.projectId}/clients`;await r_(E,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:a,type:d,token:l,always_raw:g})})},this.logger=Ne.generateChildLogger(r,this.context)}}var Cb=Object.defineProperty,pl=Object.getOwnPropertySymbols,Ab=Object.prototype.hasOwnProperty,Rb=Object.prototype.propertyIsEnumerable,dl=(c,i,r)=>i in c?Cb(c,i,{enumerable:!0,configurable:!0,writable:!0,value:r}):c[i]=r,gl=(c,i)=>{for(var r in i||(i={}))Ab.call(i,r)&&dl(c,r,i[r]);if(pl)for(var r of pl(i))Rb.call(i,r)&&dl(c,r,i[r]);return c};class Ic extends I1{constructor(i){super(i),this.protocol=af,this.version=Ow,this.name=Ec,this.events=new mr.exports.EventEmitter,this.initialized=!1,this.on=(s,a)=>this.events.on(s,a),this.once=(s,a)=>this.events.once(s,a),this.off=(s,a)=>this.events.off(s,a),this.removeListener=(s,a)=>this.events.removeListener(s,a),this.projectId=i?.projectId,this.relayUrl=i?.relayUrl||cf,this.customStoragePrefix=i!=null&&i.customStoragePrefix?`:${i.customStoragePrefix}`:"";const r=typeof i?.logger<"u"&&typeof i?.logger!="string"?i.logger:Ne.pino(Ne.getDefaultLoggerOptions({level:i?.logger||Cw.logger}));this.logger=Ne.generateChildLogger(r,this.name),this.heartbeat=new yn.HeartBeat,this.crypto=new sb(this,this.logger,i?.keychain),this.history=new xb(this,this.logger),this.expirer=new Pb(this,this.logger),this.storage=i!=null&&i.storage?i.storage:new d1(gl(gl({},Aw),i?.storageOptions)),this.relayer=new _b({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new Ib(this,this.logger),this.verify=new Sb(this.projectId||"",this.logger),this.echoClient=new Ob(this.projectId||"",this.logger)}static async init(i){const r=new Ic(i);await r.initialize();const s=await r.crypto.getClientId();return await r.storage.setItem(Bw,s),r}get context(){return Ne.getLoggerContext(this.logger)}async start(){this.initialized||await this.initialize()}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.initialized=!0,this.logger.info("Core Initialization Success")}catch(i){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,i),this.logger.error(i.message),i}}}const Tb=Ic,uf="wc",hf=2,lf="client",xc=`${uf}@${hf}:${lf}:`,tc={name:lf,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.com"},yl="WALLETCONNECT_DEEPLINK_CHOICE",Nb="proposal",ff="Proposal expired",Fb="session",sa=ue.SEVEN_DAYS,$b="engine",zn={wc_sessionPropose:{req:{ttl:ue.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:ue.FIVE_MINUTES,prompt:!1,tag:1101}},wc_sessionSettle:{req:{ttl:ue.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:ue.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:ue.ONE_DAY,prompt:!1,tag:1104},res:{ttl:ue.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:ue.ONE_DAY,prompt:!1,tag:1106},res:{ttl:ue.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:ue.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:ue.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:ue.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:ue.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:ue.ONE_DAY,prompt:!1,tag:1112},res:{ttl:ue.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:ue.THIRTY_SECONDS,prompt:!1,tag:1114},res:{ttl:ue.THIRTY_SECONDS,prompt:!1,tag:1115}}},rc={min:ue.FIVE_MINUTES,max:ue.SEVEN_DAYS},ii={idle:"IDLE",active:"ACTIVE"},Db="request",Lb=["wc_sessionPropose","wc_sessionRequest","wc_authRequest"];var jb=Object.defineProperty,qb=Object.defineProperties,Mb=Object.getOwnPropertyDescriptors,vl=Object.getOwnPropertySymbols,zb=Object.prototype.hasOwnProperty,Ub=Object.prototype.propertyIsEnumerable,ml=(c,i,r)=>i in c?jb(c,i,{enumerable:!0,configurable:!0,writable:!0,value:r}):c[i]=r,ur=(c,i)=>{for(var r in i||(i={}))zb.call(i,r)&&ml(c,r,i[r]);if(vl)for(var r of vl(i))Ub.call(i,r)&&ml(c,r,i[r]);return c},Un=(c,i)=>qb(c,Mb(i));class Hb extends $1{constructor(i){super(i),this.name=$b,this.events=new mr.exports,this.initialized=!1,this.ignoredPayloadTypes=[Nl],this.requestQueue={state:ii.idle,queue:[]},this.sessionRequestQueue={state:ii.idle,queue:[]},this.requestQueueDelay=ue.ONE_SECOND,this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),this.client.core.pairing.register({methods:Object.keys(zn)}),this.initialized=!0,setTimeout(()=>{this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},ue.toMiliseconds(this.requestQueueDelay)))},this.connect=async r=>{await this.isInitialized();const s=Un(ur({},r),{requiredNamespaces:r.requiredNamespaces||{},optionalNamespaces:r.optionalNamespaces||{}});await this.isValidConnect(s);const{pairingTopic:a,requiredNamespaces:l,optionalNamespaces:d,sessionProperties:g,relays:E}=s;let y=a,S,T=!1;if(y&&(T=this.client.core.pairing.pairings.get(y).active),!y||!T){const{topic:fe,uri:ve}=await this.client.core.pairing.create();y=fe,S=ve}const $=await this.client.core.crypto.generateKeyPair(),B=ur({requiredNamespaces:l,optionalNamespaces:d,relays:E??[{protocol:of}],proposer:{publicKey:$,metadata:this.client.metadata}},g&&{sessionProperties:g}),{reject:j,resolve:Q,done:ae}=ln(ue.FIVE_MINUTES,ff);if(this.events.once(Ft("session_connect"),async({error:fe,session:ve})=>{if(fe)j(fe);else if(ve){ve.self.publicKey=$;const me=Un(ur({},ve),{requiredNamespaces:ve.requiredNamespaces,optionalNamespaces:ve.optionalNamespaces});await this.client.session.set(ve.topic,me),await this.setExpiry(ve.topic,ve.expiry),y&&await this.client.core.pairing.updateMetadata({topic:y,metadata:ve.peer.metadata}),Q(me)}}),!y){const{message:fe}=ie("NO_MATCHING_KEY",`connect() pairing topic: ${y}`);throw new Error(fe)}const he=await this.sendRequest({topic:y,method:"wc_sessionPropose",params:B}),le=Lr(ue.FIVE_MINUTES);return await this.setProposal(he,ur({id:he,expiry:le},B)),{uri:S,approval:ae}},this.pair=async r=>(await this.isInitialized(),await this.client.core.pairing.pair(r)),this.approve=async r=>{await this.isInitialized(),await this.isValidApprove(r);const{id:s,relayProtocol:a,namespaces:l,sessionProperties:d}=r,g=this.client.proposal.get(s);let{pairingTopic:E,proposer:y,requiredNamespaces:S,optionalNamespaces:T}=g;E=E||"",ua(S)||(S=dm(l,"approve()"));const $=await this.client.core.crypto.generateKeyPair(),B=y.publicKey,j=await this.client.core.crypto.generateSharedKey($,B);E&&s&&(await this.client.core.pairing.updateMetadata({topic:E,metadata:y.metadata}),await this.sendResult({id:s,topic:E,result:{relay:{protocol:a??"irn"},responderPublicKey:$}}),await this.client.proposal.delete(s,Wt("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:E}));const Q=ur({relay:{protocol:a??"irn"},namespaces:l,requiredNamespaces:S,optionalNamespaces:T,pairingTopic:E,controller:{publicKey:$,metadata:this.client.metadata},expiry:Lr(sa)},d&&{sessionProperties:d});await this.client.core.relayer.subscribe(j),await this.sendRequest({topic:j,method:"wc_sessionSettle",params:Q,throwOnFailedPublish:!0});const ae=Un(ur({},Q),{topic:j,pairingTopic:E,acknowledged:!1,self:Q.controller,peer:{publicKey:y.publicKey,metadata:y.metadata},controller:$});return await this.client.session.set(j,ae),await this.setExpiry(j,Lr(sa)),{topic:j,acknowledged:()=>new Promise(he=>setTimeout(()=>he(this.client.session.get(j)),500))}},this.reject=async r=>{await this.isInitialized(),await this.isValidReject(r);const{id:s,reason:a}=r,{pairingTopic:l}=this.client.proposal.get(s);l&&(await this.sendError(s,l,a),await this.client.proposal.delete(s,Wt("USER_DISCONNECTED")))},this.update=async r=>{await this.isInitialized(),await this.isValidUpdate(r);const{topic:s,namespaces:a}=r,l=await this.sendRequest({topic:s,method:"wc_sessionUpdate",params:{namespaces:a}}),{done:d,resolve:g,reject:E}=ln();return this.events.once(Ft("session_update",l),({error:y})=>{y?E(y):g()}),await this.client.session.update(s,{namespaces:a}),{acknowledged:d}},this.extend=async r=>{await this.isInitialized(),await this.isValidExtend(r);const{topic:s}=r,a=await this.sendRequest({topic:s,method:"wc_sessionExtend",params:{}}),{done:l,resolve:d,reject:g}=ln();return this.events.once(Ft("session_extend",a),({error:E})=>{E?g(E):d()}),await this.setExpiry(s,Lr(sa)),{acknowledged:l}},this.request=async r=>{await this.isInitialized(),await this.isValidRequest(r);const{chainId:s,request:a,topic:l,expiry:d}=r,g=qm(),{done:E,resolve:y,reject:S}=ln(d,"Request expired. Please try again.");return this.events.once(Ft("session_request",g),({error:T,result:$})=>{T?S(T):y($)}),await Promise.all([new Promise(async T=>{await this.sendRequest({clientRpcId:g,topic:l,method:"wc_sessionRequest",params:{request:a,chainId:s},expiry:d,throwOnFailedPublish:!0}).catch($=>S($)),this.client.events.emit("session_request_sent",{topic:l,request:a,chainId:s,id:g}),T()}),new Promise(async T=>{const $=await gm(this.client.core.storage,yl);ym({id:g,topic:l,wcDeepLink:$}),T()}),E()]).then(T=>T[2])},this.respond=async r=>{await this.isInitialized(),await this.isValidRespond(r);const{topic:s,response:a}=r,{id:l}=a;mi(a)?await this.sendResult({id:l,topic:s,result:a.result,throwOnFailedPublish:!0}):ni(a)&&await this.sendError(l,s,a.error),this.cleanupAfterResponse(r)},this.ping=async r=>{await this.isInitialized(),await this.isValidPing(r);const{topic:s}=r;if(this.client.session.keys.includes(s)){const a=await this.sendRequest({topic:s,method:"wc_sessionPing",params:{}}),{done:l,resolve:d,reject:g}=ln();this.events.once(Ft("session_ping",a),({error:E})=>{E?g(E):d()}),await l()}else this.client.core.pairing.pairings.keys.includes(s)&&await this.client.core.pairing.ping({topic:s})},this.emit=async r=>{await this.isInitialized(),await this.isValidEmit(r);const{topic:s,event:a,chainId:l}=r;await this.sendRequest({topic:s,method:"wc_sessionEvent",params:{event:a,chainId:l}})},this.disconnect=async r=>{await this.isInitialized(),await this.isValidDisconnect(r);const{topic:s}=r;this.client.session.keys.includes(s)?(await this.sendRequest({topic:s,method:"wc_sessionDelete",params:Wt("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession(s)):await this.client.core.pairing.disconnect({topic:s})},this.find=r=>(this.isInitialized(),this.client.session.getAll().filter(s=>vm(s,r))),this.getPendingSessionRequests=()=>(this.isInitialized(),this.client.pendingRequest.getAll()),this.cleanupDuplicatePairings=async r=>{if(r.pairingTopic)try{const s=this.client.core.pairing.pairings.get(r.pairingTopic),a=this.client.core.pairing.pairings.getAll().filter(l=>{var d,g;return((d=l.peerMetadata)==null?void 0:d.url)&&((g=l.peerMetadata)==null?void 0:g.url)===r.peer.metadata.url&&l.topic&&l.topic!==s.topic});if(a.length===0)return;this.client.logger.info(`Cleaning up ${a.length} duplicate pairing(s)`),await Promise.all(a.map(l=>this.client.core.pairing.disconnect({topic:l.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(s){this.client.logger.error(s)}},this.deleteSession=async(r,s)=>{const{self:a}=this.client.session.get(r);await this.client.core.relayer.unsubscribe(r),this.client.session.delete(r,Wt("USER_DISCONNECTED")),this.client.core.crypto.keychain.has(a.publicKey)&&await this.client.core.crypto.deleteKeyPair(a.publicKey),this.client.core.crypto.keychain.has(r)&&await this.client.core.crypto.deleteSymKey(r),s||this.client.core.expirer.del(r),this.client.core.storage.removeItem(yl).catch(l=>this.client.logger.warn(l)),this.getPendingSessionRequests().forEach(l=>{l.topic===r&&this.deletePendingSessionRequest(l.id,Wt("USER_DISCONNECTED"))})},this.deleteProposal=async(r,s)=>{await Promise.all([this.client.proposal.delete(r,Wt("USER_DISCONNECTED")),s?Promise.resolve():this.client.core.expirer.del(r)])},this.deletePendingSessionRequest=async(r,s,a=!1)=>{await Promise.all([this.client.pendingRequest.delete(r,s),a?Promise.resolve():this.client.core.expirer.del(r)]),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(l=>l.id!==r),a&&(this.sessionRequestQueue.state=ii.idle)},this.setExpiry=async(r,s)=>{this.client.session.keys.includes(r)&&await this.client.session.update(r,{expiry:s}),this.client.core.expirer.set(r,s)},this.setProposal=async(r,s)=>{await this.client.proposal.set(r,s),this.client.core.expirer.set(r,s.expiry)},this.setPendingSessionRequest=async r=>{const s=zn.wc_sessionRequest.req.ttl,{id:a,topic:l,params:d,verifyContext:g}=r;await this.client.pendingRequest.set(a,{id:a,topic:l,params:d,verifyContext:g}),s&&this.client.core.expirer.set(a,Lr(s))},this.sendRequest=async r=>{const{topic:s,method:a,params:l,expiry:d,relayRpcId:g,clientRpcId:E,throwOnFailedPublish:y}=r,S=Vn(a,l,E);if($l()&&Lb.includes(a)){const B=dn(JSON.stringify(S));this.client.core.verify.register({attestationId:B})}const T=await this.client.core.crypto.encode(s,S),$=zn[a].req;return d&&($.ttl=d),g&&($.id=g),this.client.core.history.set(s,S),y?($.internal=Un(ur({},$.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(s,T,$)):this.client.core.relayer.publish(s,T,$).catch(B=>this.client.logger.error(B)),S.id},this.sendResult=async r=>{const{id:s,topic:a,result:l,throwOnFailedPublish:d}=r,g=ya(s,l),E=await this.client.core.crypto.encode(a,g),y=await this.client.core.history.get(a,s),S=zn[y.request.method].res;d?(S.internal=Un(ur({},S.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(a,E,S)):this.client.core.relayer.publish(a,E,S).catch(T=>this.client.logger.error(T)),await this.client.core.history.resolve(g)},this.sendError=async(r,s,a)=>{const l=mc(r,a),d=await this.client.core.crypto.encode(s,l),g=await this.client.core.history.get(s,r),E=zn[g.request.method].res;this.client.core.relayer.publish(s,d,E),await this.client.core.history.resolve(l)},this.cleanup=async()=>{const r=[],s=[];this.client.session.getAll().forEach(a=>{_i(a.expiry)&&r.push(a.topic)}),this.client.proposal.getAll().forEach(a=>{_i(a.expiry)&&s.push(a.id)}),await Promise.all([...r.map(a=>this.deleteSession(a)),...s.map(a=>this.deleteProposal(a))])},this.onRelayEventRequest=async r=>{this.requestQueue.queue.push(r),await this.processRequestsQueue()},this.processRequestsQueue=async()=>{if(this.requestQueue.state===ii.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=ii.active;const r=this.requestQueue.queue.shift();if(r)try{this.processRequest(r),await new Promise(s=>setTimeout(s,300))}catch(s){this.client.logger.warn(s)}}this.requestQueue.state=ii.idle},this.processRequest=r=>{const{topic:s,payload:a}=r,l=a.method;switch(l){case"wc_sessionPropose":return this.onSessionProposeRequest(s,a);case"wc_sessionSettle":return this.onSessionSettleRequest(s,a);case"wc_sessionUpdate":return this.onSessionUpdateRequest(s,a);case"wc_sessionExtend":return this.onSessionExtendRequest(s,a);case"wc_sessionPing":return this.onSessionPingRequest(s,a);case"wc_sessionDelete":return this.onSessionDeleteRequest(s,a);case"wc_sessionRequest":return this.onSessionRequest(s,a);case"wc_sessionEvent":return this.onSessionEventRequest(s,a);default:return this.client.logger.info(`Unsupported request method ${l}`)}},this.onRelayEventResponse=async r=>{const{topic:s,payload:a}=r,l=(await this.client.core.history.get(s,a.id)).request.method;switch(l){case"wc_sessionPropose":return this.onSessionProposeResponse(s,a);case"wc_sessionSettle":return this.onSessionSettleResponse(s,a);case"wc_sessionUpdate":return this.onSessionUpdateResponse(s,a);case"wc_sessionExtend":return this.onSessionExtendResponse(s,a);case"wc_sessionPing":return this.onSessionPingResponse(s,a);case"wc_sessionRequest":return this.onSessionRequestResponse(s,a);default:return this.client.logger.info(`Unsupported response method ${l}`)}},this.onRelayEventUnknownPayload=r=>{const{topic:s}=r,{message:a}=ie("MISSING_OR_INVALID",`Decoded payload on topic ${s} is not identifiable as a JSON-RPC request or a response.`);throw new Error(a)},this.onSessionProposeRequest=async(r,s)=>{const{params:a,id:l}=s;try{this.isValidConnect(ur({},s.params));const d=Lr(ue.FIVE_MINUTES),g=ur({id:l,pairingTopic:r,expiry:d},a);await this.setProposal(l,g);const E=dn(JSON.stringify(s)),y=await this.getVerifyContext(E,g.proposer.metadata);this.client.events.emit("session_proposal",{id:l,params:g,verifyContext:y})}catch(d){await this.sendError(l,r,d),this.client.logger.error(d)}},this.onSessionProposeResponse=async(r,s)=>{const{id:a}=s;if(mi(s)){const{result:l}=s;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:l});const d=this.client.proposal.get(a);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:d});const g=d.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:g});const E=l.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:E});const y=await this.client.core.crypto.generateSharedKey(g,E);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:y});const S=await this.client.core.relayer.subscribe(y);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:S}),await this.client.core.pairing.activate({topic:r})}else ni(s)&&(await this.client.proposal.delete(a,Wt("USER_DISCONNECTED")),this.events.emit(Ft("session_connect"),{error:s.error}))},this.onSessionSettleRequest=async(r,s)=>{const{id:a,params:l}=s;try{this.isValidSessionSettleRequest(l);const{relay:d,controller:g,expiry:E,namespaces:y,requiredNamespaces:S,optionalNamespaces:T,sessionProperties:$,pairingTopic:B}=s.params,j=ur({topic:r,relay:d,expiry:E,namespaces:y,acknowledged:!0,pairingTopic:B,requiredNamespaces:S,optionalNamespaces:T,controller:g.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:g.publicKey,metadata:g.metadata}},$&&{sessionProperties:$});await this.sendResult({id:s.id,topic:r,result:!0}),this.events.emit(Ft("session_connect"),{session:j}),this.cleanupDuplicatePairings(j)}catch(d){await this.sendError(a,r,d),this.client.logger.error(d)}},this.onSessionSettleResponse=async(r,s)=>{const{id:a}=s;mi(s)?(await this.client.session.update(r,{acknowledged:!0}),this.events.emit(Ft("session_approve",a),{})):ni(s)&&(await this.client.session.delete(r,Wt("USER_DISCONNECTED")),this.events.emit(Ft("session_approve",a),{error:s.error}))},this.onSessionUpdateRequest=async(r,s)=>{const{params:a,id:l}=s;try{const d=`${r}_session_update`,g=ra.get(d);if(g&&this.isRequestOutOfSync(g,l)){this.client.logger.info(`Discarding out of sync request - ${l}`);return}this.isValidUpdate(ur({topic:r},a)),await this.client.session.update(r,{namespaces:a.namespaces}),await this.sendResult({id:l,topic:r,result:!0}),this.client.events.emit("session_update",{id:l,topic:r,params:a}),ra.set(d,l)}catch(d){await this.sendError(l,r,d),this.client.logger.error(d)}},this.isRequestOutOfSync=(r,s)=>parseInt(s.toString().slice(0,-3))<=parseInt(r.toString().slice(0,-3)),this.onSessionUpdateResponse=(r,s)=>{const{id:a}=s;mi(s)?this.events.emit(Ft("session_update",a),{}):ni(s)&&this.events.emit(Ft("session_update",a),{error:s.error})},this.onSessionExtendRequest=async(r,s)=>{const{id:a}=s;try{this.isValidExtend({topic:r}),await this.setExpiry(r,Lr(sa)),await this.sendResult({id:a,topic:r,result:!0}),this.client.events.emit("session_extend",{id:a,topic:r})}catch(l){await this.sendError(a,r,l),this.client.logger.error(l)}},this.onSessionExtendResponse=(r,s)=>{const{id:a}=s;mi(s)?this.events.emit(Ft("session_extend",a),{}):ni(s)&&this.events.emit(Ft("session_extend",a),{error:s.error})},this.onSessionPingRequest=async(r,s)=>{const{id:a}=s;try{this.isValidPing({topic:r}),await this.sendResult({id:a,topic:r,result:!0}),this.client.events.emit("session_ping",{id:a,topic:r})}catch(l){await this.sendError(a,r,l),this.client.logger.error(l)}},this.onSessionPingResponse=(r,s)=>{const{id:a}=s;setTimeout(()=>{mi(s)?this.events.emit(Ft("session_ping",a),{}):ni(s)&&this.events.emit(Ft("session_ping",a),{error:s.error})},500)},this.onSessionDeleteRequest=async(r,s)=>{const{id:a}=s;try{this.isValidDisconnect({topic:r,reason:s.params}),await Promise.all([new Promise(l=>{this.client.core.relayer.once(Jt.publish,async()=>{l(await this.deleteSession(r))})}),this.sendResult({id:a,topic:r,result:!0})]),this.client.events.emit("session_delete",{id:a,topic:r})}catch(l){this.client.logger.error(l)}},this.onSessionRequest=async(r,s)=>{const{id:a,params:l}=s;try{this.isValidRequest(ur({topic:r},l));const d=dn(JSON.stringify(Vn("wc_sessionRequest",l,a))),g=this.client.session.get(r),E=await this.getVerifyContext(d,g.peer.metadata),y={id:a,topic:r,params:l,verifyContext:E};await this.setPendingSessionRequest(y),this.addSessionRequestToSessionRequestQueue(y),this.processSessionRequestQueue()}catch(d){await this.sendError(a,r,d),this.client.logger.error(d)}},this.onSessionRequestResponse=(r,s)=>{const{id:a}=s;mi(s)?this.events.emit(Ft("session_request",a),{result:s.result}):ni(s)&&this.events.emit(Ft("session_request",a),{error:s.error})},this.onSessionEventRequest=async(r,s)=>{const{id:a,params:l}=s;try{const d=`${r}_session_event_${l.event.name}`,g=ra.get(d);if(g&&this.isRequestOutOfSync(g,a)){this.client.logger.info(`Discarding out of sync request - ${a}`);return}this.isValidEmit(ur({topic:r},l)),this.client.events.emit("session_event",{id:a,topic:r,params:l}),ra.set(d,a)}catch(d){await this.sendError(a,r,d),this.client.logger.error(d)}},this.addSessionRequestToSessionRequestQueue=r=>{this.sessionRequestQueue.queue.push(r)},this.cleanupAfterResponse=r=>{this.deletePendingSessionRequest(r.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=ii.idle,this.processSessionRequestQueue()},ue.toMiliseconds(this.requestQueueDelay))},this.processSessionRequestQueue=()=>{if(this.sessionRequestQueue.state===ii.active){this.client.logger.info("session request queue is already active.");return}const r=this.sessionRequestQueue.queue[0];if(!r){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=ii.active,this.client.events.emit("session_request",r)}catch(s){this.client.logger.error(s)}},this.onPairingCreated=r=>{if(r.active)return;const s=this.client.proposal.getAll().find(a=>a.pairingTopic===r.topic);s&&this.onSessionProposeRequest(r.topic,Vn("wc_sessionPropose",{requiredNamespaces:s.requiredNamespaces,optionalNamespaces:s.optionalNamespaces,relays:s.relays,proposer:s.proposer,sessionProperties:s.sessionProperties},s.id))},this.isValidConnect=async r=>{if(!lr(r)){const{message:E}=ie("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(r)}`);throw new Error(E)}const{pairingTopic:s,requiredNamespaces:a,optionalNamespaces:l,sessionProperties:d,relays:g}=r;if(wi(s)||await this.isValidPairingTopic(s),!mm(g,!0)){const{message:E}=ie("MISSING_OR_INVALID",`connect() relays: ${g}`);throw new Error(E)}!wi(a)&&ua(a)!==0&&this.validateNamespaces(a,"requiredNamespaces"),!wi(l)&&ua(l)!==0&&this.validateNamespaces(l,"optionalNamespaces"),wi(d)||this.validateSessionProps(d,"sessionProperties")},this.validateNamespaces=(r,s)=>{const a=_m(r,"connect()",s);if(a)throw new Error(a.message)},this.isValidApprove=async r=>{if(!lr(r))throw new Error(ie("MISSING_OR_INVALID",`approve() params: ${r}`).message);const{id:s,namespaces:a,relayProtocol:l,sessionProperties:d}=r;await this.isValidProposalId(s);const g=this.client.proposal.get(s),E=Ko(a,"approve()");if(E)throw new Error(E.message);const y=Th(g.requiredNamespaces,a,"approve()");if(y)throw new Error(y.message);if(!fn(l,!0)){const{message:S}=ie("MISSING_OR_INVALID",`approve() relayProtocol: ${l}`);throw new Error(S)}wi(d)||this.validateSessionProps(d,"sessionProperties")},this.isValidReject=async r=>{if(!lr(r)){const{message:l}=ie("MISSING_OR_INVALID",`reject() params: ${r}`);throw new Error(l)}const{id:s,reason:a}=r;if(await this.isValidProposalId(s),!wm(a)){const{message:l}=ie("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(a)}`);throw new Error(l)}},this.isValidSessionSettleRequest=r=>{if(!lr(r)){const{message:y}=ie("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${r}`);throw new Error(y)}const{relay:s,controller:a,namespaces:l,expiry:d}=r;if(!bm(s)){const{message:y}=ie("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(y)}const g=Em(a,"onSessionSettleRequest()");if(g)throw new Error(g.message);const E=Ko(l,"onSessionSettleRequest()");if(E)throw new Error(E.message);if(_i(d)){const{message:y}=ie("EXPIRED","onSessionSettleRequest()");throw new Error(y)}},this.isValidUpdate=async r=>{if(!lr(r)){const{message:E}=ie("MISSING_OR_INVALID",`update() params: ${r}`);throw new Error(E)}const{topic:s,namespaces:a}=r;await this.isValidSessionTopic(s);const l=this.client.session.get(s),d=Ko(a,"update()");if(d)throw new Error(d.message);const g=Th(l.requiredNamespaces,a,"update()");if(g)throw new Error(g.message)},this.isValidExtend=async r=>{if(!lr(r)){const{message:a}=ie("MISSING_OR_INVALID",`extend() params: ${r}`);throw new Error(a)}const{topic:s}=r;await this.isValidSessionTopic(s)},this.isValidRequest=async r=>{if(!lr(r)){const{message:E}=ie("MISSING_OR_INVALID",`request() params: ${r}`);throw new Error(E)}const{topic:s,request:a,chainId:l,expiry:d}=r;await this.isValidSessionTopic(s);const{namespaces:g}=this.client.session.get(s);if(!Nh(g,l)){const{message:E}=ie("MISSING_OR_INVALID",`request() chainId: ${l}`);throw new Error(E)}if(!Im(a)){const{message:E}=ie("MISSING_OR_INVALID",`request() ${JSON.stringify(a)}`);throw new Error(E)}if(!xm(g,l,a.method)){const{message:E}=ie("MISSING_OR_INVALID",`request() method: ${a.method}`);throw new Error(E)}if(d&&!Pm(d,rc)){const{message:E}=ie("MISSING_OR_INVALID",`request() expiry: ${d}. Expiry must be a number (in seconds) between ${rc.min} and ${rc.max}`);throw new Error(E)}},this.isValidRespond=async r=>{var s;if(!lr(r)){const{message:d}=ie("MISSING_OR_INVALID",`respond() params: ${r}`);throw new Error(d)}const{topic:a,response:l}=r;try{await this.isValidSessionTopic(a)}catch(d){throw(s=r?.response)!=null&&s.id&&this.cleanupAfterResponse(r),d}if(!Sm(l)){const{message:d}=ie("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(l)}`);throw new Error(d)}},this.isValidPing=async r=>{if(!lr(r)){const{message:a}=ie("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(a)}const{topic:s}=r;await this.isValidSessionOrPairingTopic(s)},this.isValidEmit=async r=>{if(!lr(r)){const{message:g}=ie("MISSING_OR_INVALID",`emit() params: ${r}`);throw new Error(g)}const{topic:s,event:a,chainId:l}=r;await this.isValidSessionTopic(s);const{namespaces:d}=this.client.session.get(s);if(!Nh(d,l)){const{message:g}=ie("MISSING_OR_INVALID",`emit() chainId: ${l}`);throw new Error(g)}if(!Om(a)){const{message:g}=ie("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(a)}`);throw new Error(g)}if(!Cm(d,l,a.name)){const{message:g}=ie("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(a)}`);throw new Error(g)}},this.isValidDisconnect=async r=>{if(!lr(r)){const{message:a}=ie("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(a)}const{topic:s}=r;await this.isValidSessionOrPairingTopic(s)},this.getVerifyContext=async(r,s)=>{const a={verified:{verifyUrl:s.verifyUrl||pn,validation:"UNKNOWN",origin:s.url||""}};try{const l=await this.client.core.verify.resolve({attestationId:r,verifyUrl:s.verifyUrl});l&&(a.verified.origin=l.origin,a.verified.isScam=l.isScam,a.verified.validation=l.origin===new URL(s.url).origin?"VALID":"INVALID")}catch(l){this.client.logger.info(l)}return this.client.logger.info(`Verify context: ${JSON.stringify(a)}`),a},this.validateSessionProps=(r,s)=>{Object.values(r).forEach(a=>{if(!fn(a,!1)){const{message:l}=ie("MISSING_OR_INVALID",`${s} must be in Record<string, string> format. Received: ${JSON.stringify(a)}`);throw new Error(l)}})}}async isInitialized(){if(!this.initialized){const{message:i}=ie("NOT_INITIALIZED",this.name);throw new Error(i)}await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(Jt.message,async i=>{const{topic:r,message:s}=i;if(this.ignoredPayloadTypes.includes(this.client.core.crypto.getPayloadType(s)))return;const a=await this.client.core.crypto.decode(r,s);try{_c(a)?(this.client.core.history.set(r,a),this.onRelayEventRequest({topic:r,payload:a})):wc(a)?(await this.client.core.history.resolve(a),await this.onRelayEventResponse({topic:r,payload:a}),this.client.core.history.delete(r,a.id)):this.onRelayEventUnknownPayload({topic:r,payload:a})}catch(l){this.client.logger.error(l)}})}registerExpirerEvents(){this.client.core.expirer.on(Cr.expired,async i=>{const{topic:r,id:s}=Fl(i.target);if(s&&this.client.pendingRequest.keys.includes(s))return await this.deletePendingSessionRequest(s,ie("EXPIRED"),!0);r?this.client.session.keys.includes(r)&&(await this.deleteSession(r,!0),this.client.events.emit("session_expire",{topic:r})):s&&(await this.deleteProposal(s,!0),this.client.events.emit("proposal_expire",{id:s}))})}registerPairingEvents(){this.client.core.pairing.events.on(Kn.create,i=>this.onPairingCreated(i))}isValidPairingTopic(i){if(!fn(i,!1)){const{message:r}=ie("MISSING_OR_INVALID",`pairing topic should be a string: ${i}`);throw new Error(r)}if(!this.client.core.pairing.pairings.keys.includes(i)){const{message:r}=ie("NO_MATCHING_KEY",`pairing topic doesn't exist: ${i}`);throw new Error(r)}if(_i(this.client.core.pairing.pairings.get(i).expiry)){const{message:r}=ie("EXPIRED",`pairing topic: ${i}`);throw new Error(r)}}async isValidSessionTopic(i){if(!fn(i,!1)){const{message:r}=ie("MISSING_OR_INVALID",`session topic should be a string: ${i}`);throw new Error(r)}if(!this.client.session.keys.includes(i)){const{message:r}=ie("NO_MATCHING_KEY",`session topic doesn't exist: ${i}`);throw new Error(r)}if(_i(this.client.session.get(i).expiry)){await this.deleteSession(i);const{message:r}=ie("EXPIRED",`session topic: ${i}`);throw new Error(r)}}async isValidSessionOrPairingTopic(i){if(this.client.session.keys.includes(i))await this.isValidSessionTopic(i);else if(this.client.core.pairing.pairings.keys.includes(i))this.isValidPairingTopic(i);else if(fn(i,!1)){const{message:r}=ie("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${i}`);throw new Error(r)}else{const{message:r}=ie("MISSING_OR_INVALID",`session or pairing topic should be a string: ${i}`);throw new Error(r)}}async isValidProposalId(i){if(!Am(i)){const{message:r}=ie("MISSING_OR_INVALID",`proposal id should be a number: ${i}`);throw new Error(r)}if(!this.client.proposal.keys.includes(i)){const{message:r}=ie("NO_MATCHING_KEY",`proposal id doesn't exist: ${i}`);throw new Error(r)}if(_i(this.client.proposal.get(i).expiry)){await this.deleteProposal(i);const{message:r}=ie("EXPIRED",`proposal id: ${i}`);throw new Error(r)}}}class kb extends ma{constructor(i,r){super(i,r,Nb,xc),this.core=i,this.logger=r}}class Kb extends ma{constructor(i,r){super(i,r,Fb,xc),this.core=i,this.logger=r}}class Bb extends ma{constructor(i,r){super(i,r,Db,xc,s=>s.id),this.core=i,this.logger=r}}class Pc extends F1{constructor(i){super(i),this.protocol=uf,this.version=hf,this.name=tc.name,this.events=new mr.exports.EventEmitter,this.on=(s,a)=>this.events.on(s,a),this.once=(s,a)=>this.events.once(s,a),this.off=(s,a)=>this.events.off(s,a),this.removeListener=(s,a)=>this.events.removeListener(s,a),this.removeAllListeners=s=>this.events.removeAllListeners(s),this.connect=async s=>{try{return await this.engine.connect(s)}catch(a){throw this.logger.error(a.message),a}},this.pair=async s=>{try{return await this.engine.pair(s)}catch(a){throw this.logger.error(a.message),a}},this.approve=async s=>{try{return await this.engine.approve(s)}catch(a){throw this.logger.error(a.message),a}},this.reject=async s=>{try{return await this.engine.reject(s)}catch(a){throw this.logger.error(a.message),a}},this.update=async s=>{try{return await this.engine.update(s)}catch(a){throw this.logger.error(a.message),a}},this.extend=async s=>{try{return await this.engine.extend(s)}catch(a){throw this.logger.error(a.message),a}},this.request=async s=>{try{return await this.engine.request(s)}catch(a){throw this.logger.error(a.message),a}},this.respond=async s=>{try{return await this.engine.respond(s)}catch(a){throw this.logger.error(a.message),a}},this.ping=async s=>{try{return await this.engine.ping(s)}catch(a){throw this.logger.error(a.message),a}},this.emit=async s=>{try{return await this.engine.emit(s)}catch(a){throw this.logger.error(a.message),a}},this.disconnect=async s=>{try{return await this.engine.disconnect(s)}catch(a){throw this.logger.error(a.message),a}},this.find=s=>{try{return this.engine.find(s)}catch(a){throw this.logger.error(a.message),a}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(s){throw this.logger.error(s.message),s}},this.name=i?.name||tc.name,this.metadata=i?.metadata||Rm();const r=typeof i?.logger<"u"&&typeof i?.logger!="string"?i.logger:Ne.pino(Ne.getDefaultLoggerOptions({level:i?.logger||tc.logger}));this.core=i?.core||new Tb(i),this.logger=Ne.generateChildLogger(r,this.name),this.session=new Kb(this.core,this.logger),this.proposal=new kb(this.core,this.logger),this.pendingRequest=new Bb(this.core,this.logger),this.engine=new Hb(this)}static async init(i){const r=new Pc(i);return await r.initialize(),r}get context(){return Ne.getLoggerContext(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.engine.init(),this.core.verify.init({verifyUrl:this.metadata.verifyUrl}),this.logger.info("SignClient Initialization Success")}catch(i){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(i.message),i}}}const _l="error",Vb="wss://relay.walletconnect.com",Gb="wc",Wb="universal_provider",wl=`${Gb}@2:${Wb}:`,Jb="https://rpc.walletconnect.com/v1/",ai={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};var Hn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},dc={exports:{}};/**
* @license
* Lodash <https://lodash.com/>
* Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
* Released under MIT license <https://lodash.com/license>
* Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
* Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
*/(function(c,i){(function(){var r,s="4.17.21",a=200,l="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",d="Expected a function",g="Invalid `variable` option passed into `_.template`",E="__lodash_hash_undefined__",y=500,S="__lodash_placeholder__",T=1,$=2,B=4,j=1,Q=2,ae=1,he=2,le=4,fe=8,ve=16,me=32,M=64,G=128,U=256,pe=512,m=30,I="...",P=800,L=16,_=1,w=2,Y=3,ee=1/0,Z=9007199254740991,F=17976931348623157e292,k=0/0,X=4294967295,ce=X-1,xe=X>>>1,jt=[["ary",G],["bind",ae],["bindKey",he],["curry",fe],["curryRight",ve],["flip",pe],["partial",me],["partialRight",M],["rearg",U]],be="[object Arguments]",It="[object Array]",z="[object AsyncFunction]",q="[object Boolean]",N="[object Date]",u="[object DOMException]",O="[object Error]",se="[object Function]",_e="[object GeneratorFunction]",Se="[object Map]",De="[object Number]",je="[object Null]",Re="[object Object]",xt="[object Promise]",mt="[object Proxy]",at="[object RegExp]",Me="[object Set]",Qe="[object String]",Xe="[object Symbol]",ot="[object Undefined]",ke="[object WeakMap]",Ze="[object WeakSet]",Le="[object ArrayBuffer]",Be="[object DataView]",ht="[object Float32Array]",Ue="[object Float64Array]",Pt="[object Int8Array]",$t="[object Int16Array]",Ht="[object Int32Array]",kt="[object Uint8Array]",qt="[object Uint8ClampedArray]",Yt="[object Uint16Array]",ir="[object Uint32Array]",jr=/\b__p \+= '';/g,Qt=/\b(__p \+=) '' \+/g,Kr=/(__e\(.*?\)|\b__t\)) \+\n'';/g,oi=/&(?:amp|lt|gt|quot|#39);/g,Pi=/[&<>"']/g,lt=RegExp(oi.source),rt=RegExp(Pi.source),ft=/<%-([\s\S]+?)%>/g,pt=/<%([\s\S]+?)%>/g,ct=/<%=([\s\S]+?)%>/g,it=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,St=/^\w*$/,Ot=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,dt=/[\\^$.*+?()[\]{}|]/g,Ct=RegExp(dt.source),gt=/^\s+/,_t=/\s/,yt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ye=/\{\n\/\* \[wrapped with (.+)\] \*/,At=/,? & /,Rt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,_a=/[()=,{}\[\]\/\s]/,wa=/\\(\\)?/g,ba=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,_r=/\w*$/,Ea=/^[-+]0x[0-9a-f]+$/i,Ia=/^0b[01]+$/i,xa=/^\[object .+?Constructor\]$/,Pa=/^0o[0-7]+$/i,Sa=/^(?:0|[1-9]\d*)$/,Br=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ki=/($^)/,Oa=/['\n\r\u2028\u2029\\]/g,Bi="\\ud800-\\udfff",Ca="\\u0300-\\u036f",Aa="\\ufe20-\\ufe2f",Vi="\\u20d0-\\u20ff",Xn=Ca+Aa+Vi,Zn="\\u2700-\\u27bf",Ar="a-z\\xdf-\\xf6\\xf8-\\xff",Ra="\\xac\\xb1\\xd7\\xf7",Ta="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Na="\\u2000-\\u206f",Fa=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",es="A-Z\\xc0-\\xd6\\xd8-\\xde",ts="\\ufe0e\\ufe0f",Si=Ra+Ta+Na+Fa,vn="['\u2019]",Oi="["+Bi+"]",mn="["+Si+"]",Ci="["+Xn+"]",rs="\\d+",$a="["+Zn+"]",is="["+Ar+"]",ns="[^"+Bi+Si+rs+Zn+Ar+es+"]",Gi="\\ud83c[\\udffb-\\udfff]",Da="(?:"+Ci+"|"+Gi+")",ss="[^"+Bi+"]",Wi="(?:\\ud83c[\\udde6-\\uddff]){2}",ci="[\\ud800-\\udbff][\\udc00-\\udfff]",fr="["+es+"]",as="\\u200d",os="(?:"+is+"|"+ns+")",qr="(?:"+fr+"|"+ns+")",cs="(?:"+vn+"(?:d|ll|m|re|s|t|ve))?",us="(?:"+vn+"(?:D|LL|M|RE|S|T|VE))?",hs=Da+"?",ls="["+ts+"]?",La="(?:"+as+"(?:"+[ss,Wi,ci].join("|")+")"+ls+hs+")*",Vr="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",fs="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",ps=ls+hs+La,Ji="(?:"+[$a,Wi,ci].join("|")+")"+ps,ja="(?:"+[ss+Ci+"?",Ci,Wi,ci,Oi].join("|")+")",_n=RegExp(vn,"g"),qa=RegExp(Ci,"g"),Yi=RegExp(Gi+"(?="+Gi+")|"+ja+ps,"g"),ds=RegExp([fr+"?"+is+"+"+cs+"(?="+[mn,fr,"$"].join("|")+")",qr+"+"+us+"(?="+[mn,fr+os,"$"].join("|")+")",fr+"?"+os+"+"+cs,fr+"+"+us,fs,Vr,rs,Ji].join("|"),"g"),gs=RegExp("["+as+Bi+Xn+ts+"]"),Ai=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ys=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Ma=-1,Ve={};Ve[ht]=Ve[Ue]=Ve[Pt]=Ve[$t]=Ve[Ht]=Ve[kt]=Ve[qt]=Ve[Yt]=Ve[ir]=!0,Ve[be]=Ve[It]=Ve[Le]=Ve[q]=Ve[Be]=Ve[N]=Ve[O]=Ve[se]=Ve[Se]=Ve[De]=Ve[Re]=Ve[at]=Ve[Me]=Ve[Qe]=Ve[ke]=!1;var Ke={};Ke[be]=Ke[It]=Ke[Le]=Ke[Be]=Ke[q]=Ke[N]=Ke[ht]=Ke[Ue]=Ke[Pt]=Ke[$t]=Ke[Ht]=Ke[Se]=Ke[De]=Ke[Re]=Ke[at]=Ke[Me]=Ke[Qe]=Ke[Xe]=Ke[kt]=Ke[qt]=Ke[Yt]=Ke[ir]=!0,Ke[O]=Ke[se]=Ke[ke]=!1;var v={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},C={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},W={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},re={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ge=parseFloat,Ee=parseInt,et=typeof Hn=="object"&&Hn&&Hn.Object===Object&&Hn,Tt=typeof self=="object"&&self&&self.Object===Object&&self,Fe=et||Tt||Function("return this")(),We=i&&!i.nodeType&&i,wt=We&&!0&&c&&!c.nodeType&&c,nr=wt&&wt.exports===We,Nt=nr&&et.process,tt=function(){try{var A=wt&&wt.require&&wt.require("util").types;return A||Nt&&Nt.binding&&Nt.binding("util")}catch{}}(),Xt=tt&&tt.isArrayBuffer,Rr=tt&&tt.isDate,wr=tt&&tt.isMap,Mr=tt&&tt.isRegExp,wn=tt&&tt.isSet,Ri=tt&&tt.isTypedArray;function Mt(A,H,D){switch(D.length){case 0:return A.call(H);case 1:return A.call(H,D[0]);case 2:return A.call(H,D[0],D[1]);case 3:return A.call(H,D[0],D[1],D[2])}return A.apply(H,D)}function gf(A,H,D,ne){for(var we=-1,qe=A==null?0:A.length;++we<qe;){var Dt=A[we];H(ne,Dt,D(Dt),A)}return ne}function br(A,H){for(var D=-1,ne=A==null?0:A.length;++D<ne&&H(A[D],D,A)!==!1;);return A}function yf(A,H){for(var D=A==null?0:A.length;D--&&H(A[D],D,A)!==!1;);return A}function Cc(A,H){for(var D=-1,ne=A==null?0:A.length;++D<ne;)if(!H(A[D],D,A))return!1;return!0}function ui(A,H){for(var D=-1,ne=A==null?0:A.length,we=0,qe=[];++D<ne;){var Dt=A[D];H(Dt,D,A)&&(qe[we++]=Dt)}return qe}function vs(A,H){var D=A==null?0:A.length;return!!D&&Qi(A,H,0)>-1}function za(A,H,D){for(var ne=-1,we=A==null?0:A.length;++ne<we;)if(D(H,A[ne]))return!0;return!1}function nt(A,H){for(var D=-1,ne=A==null?0:A.length,we=Array(ne);++D<ne;)we[D]=H(A[D],D,A);return we}function hi(A,H){for(var D=-1,ne=H.length,we=A.length;++D<ne;)A[we+D]=H[D];return A}function Ua(A,H,D,ne){var we=-1,qe=A==null?0:A.length;for(ne&&qe&&(D=A[++we]);++we<qe;)D=H(D,A[we],we,A);return D}function vf(A,H,D,ne){var we=A==null?0:A.length;for(ne&&we&&(D=A[--we]);we--;)D=H(D,A[we],we,A);return D}function Ha(A,H){for(var D=-1,ne=A==null?0:A.length;++D<ne;)if(H(A[D],D,A))return!0;return!1}var mf=ka("length");function _f(A){return A.split("")}function wf(A){return A.match(Rt)||[]}function Ac(A,H,D){var ne;return D(A,function(we,qe,Dt){if(H(we,qe,Dt))return ne=qe,!1}),ne}function ms(A,H,D,ne){for(var we=A.length,qe=D+(ne?1:-1);ne?qe--:++qe<we;)if(H(A[qe],qe,A))return qe;return-1}function Qi(A,H,D){return H===H?Nf(A,H,D):ms(A,Rc,D)}function bf(A,H,D,ne){for(var we=D-1,qe=A.length;++we<qe;)if(ne(A[we],H))return we;return-1}function Rc(A){return A!==A}function Tc(A,H){var D=A==null?0:A.length;return D?Ba(A,H)/D:k}function ka(A){return function(H){return H==null?r:H[A]}}function Ka(A){return function(H){return A==null?r:A[H]}}function Nc(A,H,D,ne,we){return we(A,function(qe,Dt,Je){D=ne?(ne=!1,qe):H(D,qe,Dt,Je)}),D}function Ef(A,H){var D=A.length;for(A.sort(H);D--;)A[D]=A[D].value;return A}function Ba(A,H){for(var D,ne=-1,we=A.length;++ne<we;){var qe=H(A[ne]);qe!==r&&(D=D===r?qe:D+qe)}return D}function Va(A,H){for(var D=-1,ne=Array(A);++D<A;)ne[D]=H(D);return ne}function If(A,H){return nt(H,function(D){return[D,A[D]]})}function Fc(A){return A&&A.slice(0,jc(A)+1).replace(gt,"")}function pr(A){return function(H){return A(H)}}function Ga(A,H){return nt(H,function(D){return A[D]})}function bn(A,H){return A.has(H)}function $c(A,H){for(var D=-1,ne=A.length;++D<ne&&Qi(H,A[D],0)>-1;);return D}function Dc(A,H){for(var D=A.length;D--&&Qi(H,A[D],0)>-1;);return D}function xf(A,H){for(var D=A.length,ne=0;D--;)A[D]===H&&++ne;return ne}var Pf=Ka(v),Sf=Ka(C);function Of(A){return"\\"+re[A]}function Cf(A,H){return A==null?r:A[H]}function Xi(A){return gs.test(A)}function Af(A){return Ai.test(A)}function Rf(A){for(var H,D=[];!(H=A.next()).done;)D.push(H.value);return D}function Wa(A){var H=-1,D=Array(A.size);return A.forEach(function(ne,we){D[++H]=[we,ne]}),D}function Lc(A,H){return function(D){return A(H(D))}}function li(A,H){for(var D=-1,ne=A.length,we=0,qe=[];++D<ne;){var Dt=A[D];(Dt===H||Dt===S)&&(A[D]=S,qe[we++]=D)}return qe}function _s(A){var H=-1,D=Array(A.size);return A.forEach(function(ne){D[++H]=ne}),D}function Tf(A){var H=-1,D=Array(A.size);return A.forEach(function(ne){D[++H]=[ne,ne]}),D}function Nf(A,H,D){for(var ne=D-1,we=A.length;++ne<we;)if(A[ne]===H)return ne;return-1}function Ff(A,H,D){for(var ne=D+1;ne--;)if(A[ne]===H)return ne;return ne}function Zi(A){return Xi(A)?Df(A):mf(A)}function Tr(A){return Xi(A)?Lf(A):_f(A)}function jc(A){for(var H=A.length;H--&&_t.test(A.charAt(H)););return H}var $f=Ka(W);function Df(A){for(var H=Yi.lastIndex=0;Yi.test(A);)++H;return H}function Lf(A){return A.match(Yi)||[]}function jf(A){return A.match(ds)||[]}var qf=function A(H){H=H==null?Fe:en.defaults(Fe.Object(),H,en.pick(Fe,ys));var D=H.Array,ne=H.Date,we=H.Error,qe=H.Function,Dt=H.Math,Je=H.Object,Ja=H.RegExp,Mf=H.String,Er=H.TypeError,ws=D.prototype,zf=qe.prototype,tn=Je.prototype,bs=H["__core-js_shared__"],Es=zf.toString,He=tn.hasOwnProperty,Uf=0,qc=function(){var e=/[^.]+$/.exec(bs&&bs.keys&&bs.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Is=tn.toString,Hf=Es.call(Je),kf=Fe._,Kf=Ja("^"+Es.call(He).replace(dt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),xs=nr?H.Buffer:r,fi=H.Symbol,Ps=H.Uint8Array,Mc=xs?xs.allocUnsafe:r,Ss=Lc(Je.getPrototypeOf,Je),zc=Je.create,Uc=tn.propertyIsEnumerable,Os=ws.splice,Hc=fi?fi.isConcatSpreadable:r,En=fi?fi.iterator:r,Ti=fi?fi.toStringTag:r,Cs=function(){try{var e=Li(Je,"defineProperty");return e({},"",{}),e}catch{}}(),Bf=H.clearTimeout!==Fe.clearTimeout&&H.clearTimeout,Vf=ne&&ne.now!==Fe.Date.now&&ne.now,Gf=H.setTimeout!==Fe.setTimeout&&H.setTimeout,As=Dt.ceil,Rs=Dt.floor,Ya=Je.getOwnPropertySymbols,Wf=xs?xs.isBuffer:r,kc=H.isFinite,Jf=ws.join,Yf=Lc(Je.keys,Je),Lt=Dt.max,Vt=Dt.min,Qf=ne.now,Xf=H.parseInt,Kc=Dt.random,Zf=ws.reverse,Qa=Li(H,"DataView"),In=Li(H,"Map"),Xa=Li(H,"Promise"),rn=Li(H,"Set"),xn=Li(H,"WeakMap"),Pn=Li(Je,"create"),Ts=xn&&new xn,nn={},ep=ji(Qa),tp=ji(In),rp=ji(Xa),ip=ji(rn),np=ji(xn),Ns=fi?fi.prototype:r,Sn=Ns?Ns.valueOf:r,Bc=Ns?Ns.toString:r;function f(e){if(vt(e)&&!Ie(e)&&!(e instanceof Te)){if(e instanceof Ir)return e;if(He.call(e,"__wrapped__"))return Vu(e)}return new Ir(e)}var sn=function(){function e(){}return function(t){if(!ut(t))return{};if(zc)return zc(t);e.prototype=t;var n=new e;return e.prototype=r,n}}();function Fs(){}function Ir(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=r}f.templateSettings={escape:ft,evaluate:pt,interpolate:ct,variable:"",imports:{_:f}},f.prototype=Fs.prototype,f.prototype.constructor=f,Ir.prototype=sn(Fs.prototype),Ir.prototype.constructor=Ir;function Te(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=X,this.__views__=[]}function sp(){var e=new Te(this.__wrapped__);return e.__actions__=sr(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=sr(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=sr(this.__views__),e}function ap(){if(this.__filtered__){var e=new Te(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function op(){var e=this.__wrapped__.value(),t=this.__dir__,n=Ie(e),o=t<0,h=n?e.length:0,p=_d(0,h,this.__views__),b=p.start,x=p.end,R=x-b,K=o?x:b-1,V=this.__iteratees__,J=V.length,te=0,oe=Vt(R,this.__takeCount__);if(!n||!o&&h==R&&oe==R)return gu(e,this.__actions__);var ge=[];e:for(;R--&&te<oe;){K+=t;for(var Oe=-1,ye=e[K];++Oe<J;){var Ae=V[Oe],$e=Ae.iteratee,yr=Ae.type,tr=$e(ye);if(yr==w)ye=tr;else if(!tr){if(yr==_)continue e;break e}}ge[te++]=ye}return ge}Te.prototype=sn(Fs.prototype),Te.prototype.constructor=Te;function Ni(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}function cp(){this.__data__=Pn?Pn(null):{},this.size=0}function up(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}function hp(e){var t=this.__data__;if(Pn){var n=t[e];return n===E?r:n}return He.call(t,e)?t[e]:r}function lp(e){var t=this.__data__;return Pn?t[e]!==r:He.call(t,e)}function fp(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Pn&&t===r?E:t,this}Ni.prototype.clear=cp,Ni.prototype.delete=up,Ni.prototype.get=hp,Ni.prototype.has=lp,Ni.prototype.set=fp;function Gr(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}function pp(){this.__data__=[],this.size=0}function dp(e){var t=this.__data__,n=$s(t,e);if(n<0)return!1;var o=t.length-1;return n==o?t.pop():Os.call(t,n,1),--this.size,!0}function gp(e){var t=this.__data__,n=$s(t,e);return n<0?r:t[n][1]}function yp(e){return $s(this.__data__,e)>-1}function vp(e,t){var n=this.__data__,o=$s(n,e);return o<0?(++this.size,n.push([e,t])):n[o][1]=t,this}Gr.prototype.clear=pp,Gr.prototype.delete=dp,Gr.prototype.get=gp,Gr.prototype.has=yp,Gr.prototype.set=vp;function Wr(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}function mp(){this.size=0,this.__data__={hash:new Ni,map:new(In||Gr),string:new Ni}}function _p(e){var t=Vs(this,e).delete(e);return this.size-=t?1:0,t}function wp(e){return Vs(this,e).get(e)}function bp(e){return Vs(this,e).has(e)}function Ep(e,t){var n=Vs(this,e),o=n.size;return n.set(e,t),this.size+=n.size==o?0:1,this}Wr.prototype.clear=mp,Wr.prototype.delete=_p,Wr.prototype.get=wp,Wr.prototype.has=bp,Wr.prototype.set=Ep;function Fi(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new Wr;++t<n;)this.add(e[t])}function Ip(e){return this.__data__.set(e,E),this}function xp(e){return this.__data__.has(e)}Fi.prototype.add=Fi.prototype.push=Ip,Fi.prototype.has=xp;function Nr(e){var t=this.__data__=new Gr(e);this.size=t.size}function Pp(){this.__data__=new Gr,this.size=0}function Sp(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}function Op(e){return this.__data__.get(e)}function Cp(e){return this.__data__.has(e)}function Ap(e,t){var n=this.__data__;if(n instanceof Gr){var o=n.__data__;if(!In||o.length<a-1)return o.push([e,t]),this.size=++n.size,this;n=this.__data__=new Wr(o)}return n.set(e,t),this.size=n.size,this}Nr.prototype.clear=Pp,Nr.prototype.delete=Sp,Nr.prototype.get=Op,Nr.prototype.has=Cp,Nr.prototype.set=Ap;function Vc(e,t){var n=Ie(e),o=!n&&qi(e),h=!n&&!o&&vi(e),p=!n&&!o&&!h&&un(e),b=n||o||h||p,x=b?Va(e.length,Mf):[],R=x.length;for(var K in e)(t||He.call(e,K))&&!(b&&(K=="length"||h&&(K=="offset"||K=="parent")||p&&(K=="buffer"||K=="byteLength"||K=="byteOffset")||Xr(K,R)))&&x.push(K);return x}function Gc(e){var t=e.length;return t?e[uo(0,t-1)]:r}function Rp(e,t){return Gs(sr(e),$i(t,0,e.length))}function Tp(e){return Gs(sr(e))}function Za(e,t,n){(n!==r&&!Fr(e[t],n)||n===r&&!(t in e))&&Jr(e,t,n)}function On(e,t,n){var o=e[t];(!(He.call(e,t)&&Fr(o,n))||n===r&&!(t in e))&&Jr(e,t,n)}function $s(e,t){for(var n=e.length;n--;)if(Fr(e[n][0],t))return n;return-1}function Np(e,t,n,o){return pi(e,function(h,p,b){t(o,h,n(h),b)}),o}function Wc(e,t){return e&&Ur(t,zt(t),e)}function Fp(e,t){return e&&Ur(t,or(t),e)}function Jr(e,t,n){t=="__proto__"&&Cs?Cs(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function eo(e,t){for(var n=-1,o=t.length,h=D(o),p=e==null;++n<o;)h[n]=p?r:Do(e,t[n]);return h}function $i(e,t,n){return e===e&&(n!==r&&(e=e<=n?e:n),t!==r&&(e=e>=t?e:t)),e}function xr(e,t,n,o,h,p){var b,x=t&T,R=t&$,K=t&B;if(n&&(b=h?n(e,o,h,p):n(e)),b!==r)return b;if(!ut(e))return e;var V=Ie(e);if(V){if(b=bd(e),!x)return sr(e,b)}else{var J=Gt(e),te=J==se||J==_e;if(vi(e))return mu(e,x);if(J==Re||J==be||te&&!h){if(b=R||te?{}:ju(e),!x)return R?hd(e,Fp(b,e)):ud(e,Wc(b,e))}else{if(!Ke[J])return h?e:{};b=Ed(e,J,x)}}p||(p=new Nr);var oe=p.get(e);if(oe)return oe;p.set(e,b),fh(e)?e.forEach(function(ye){b.add(xr(ye,t,n,ye,e,p))}):hh(e)&&e.forEach(function(ye,Ae){b.set(Ae,xr(ye,t,n,Ae,e,p))});var ge=K?R?bo:wo:R?or:zt,Oe=V?r:ge(e);return br(Oe||e,function(ye,Ae){Oe&&(Ae=ye,ye=e[Ae]),On(b,Ae,xr(ye,t,n,Ae,e,p))}),b}function $p(e){var t=zt(e);return function(n){return Jc(n,e,t)}}function Jc(e,t,n){var o=n.length;if(e==null)return!o;for(e=Je(e);o--;){var h=n[o],p=t[h],b=e[h];if(b===r&&!(h in e)||!p(b))return!1}return!0}function Yc(e,t,n){if(typeof e!="function")throw new Er(d);return $n(function(){e.apply(r,n)},t)}function Cn(e,t,n,o){var h=-1,p=vs,b=!0,x=e.length,R=[],K=t.length;if(!x)return R;n&&(t=nt(t,pr(n))),o?(p=za,b=!1):t.length>=a&&(p=bn,b=!1,t=new Fi(t));e:for(;++h<x;){var V=e[h],J=n==null?V:n(V);if(V=o||V!==0?V:0,b&&J===J){for(var te=K;te--;)if(t[te]===J)continue e;R.push(V)}else p(t,J,o)||R.push(V)}return R}var pi=Iu(zr),Qc=Iu(ro,!0);function Dp(e,t){var n=!0;return pi(e,function(o,h,p){return n=!!t(o,h,p),n}),n}function Ds(e,t,n){for(var o=-1,h=e.length;++o<h;){var p=e[o],b=t(p);if(b!=null&&(x===r?b===b&&!gr(b):n(b,x)))var x=b,R=p}return R}function Lp(e,t,n,o){var h=e.length;for(n=Pe(n),n<0&&(n=-n>h?0:h+n),o=o===r||o>h?h:Pe(o),o<0&&(o+=h),o=n>o?0:dh(o);n<o;)e[n++]=t;return e}function Xc(e,t){var n=[];return pi(e,function(o,h,p){t(o,h,p)&&n.push(o)}),n}function Kt(e,t,n,o,h){var p=-1,b=e.length;for(n||(n=xd),h||(h=[]);++p<b;){var x=e[p];t>0&&n(x)?t>1?Kt(x,t-1,n,o,h):hi(h,x):o||(h[h.length]=x)}return h}var to=xu(),Zc=xu(!0);function zr(e,t){return e&&to(e,t,zt)}function ro(e,t){return e&&Zc(e,t,zt)}function Ls(e,t){return ui(t,function(n){return Zr(e[n])})}function Di(e,t){t=gi(t,e);for(var n=0,o=t.length;e!=null&&n<o;)e=e[Hr(t[n++])];return n&&n==o?e:r}function eu(e,t,n){var o=t(e);return Ie(e)?o:hi(o,n(e))}function Zt(e){return e==null?e===r?ot:je:Ti&&Ti in Je(e)?md(e):Td(e)}function io(e,t){return e>t}function jp(e,t){return e!=null&&He.call(e,t)}function qp(e,t){return e!=null&&t in Je(e)}function Mp(e,t,n){return e>=Vt(t,n)&&e<Lt(t,n)}function no(e,t,n){for(var o=n?za:vs,h=e[0].length,p=e.length,b=p,x=D(p),R=1/0,K=[];b--;){var V=e[b];b&&t&&(V=nt(V,pr(t))),R=Vt(V.length,R),x[b]=!n&&(t||h>=120&&V.length>=120)?new Fi(b&&V):r}V=e[0];var J=-1,te=x[0];e:for(;++J<h&&K.length<R;){var oe=V[J],ge=t?t(oe):oe;if(oe=n||oe!==0?oe:0,!(te?bn(te,ge):o(K,ge,n))){for(b=p;--b;){var Oe=x[b];if(!(Oe?bn(Oe,ge):o(e[b],ge,n)))continue e}te&&te.push(ge),K.push(oe)}}return K}function zp(e,t,n,o){return zr(e,function(h,p,b){t(o,n(h),p,b)}),o}function An(e,t,n){t=gi(t,e),e=Uu(e,t);var o=e==null?e:e[Hr(Sr(t))];return o==null?r:Mt(o,e,n)}function tu(e){return vt(e)&&Zt(e)==be}function Up(e){return vt(e)&&Zt(e)==Le}function Hp(e){return vt(e)&&Zt(e)==N}function Rn(e,t,n,o,h){return e===t?!0:e==null||t==null||!vt(e)&&!vt(t)?e!==e&&t!==t:kp(e,t,n,o,Rn,h)}function kp(e,t,n,o,h,p){var b=Ie(e),x=Ie(t),R=b?It:Gt(e),K=x?It:Gt(t);R=R==be?Re:R,K=K==be?Re:K;var V=R==Re,J=K==Re,te=R==K;if(te&&vi(e)){if(!vi(t))return!1;b=!0,V=!1}if(te&&!V)return p||(p=new Nr),b||un(e)?$u(e,t,n,o,h,p):yd(e,t,R,n,o,h,p);if(!(n&j)){var oe=V&&He.call(e,"__wrapped__"),ge=J&&He.call(t,"__wrapped__");if(oe||ge){var Oe=oe?e.value():e,ye=ge?t.value():t;return p||(p=new Nr),h(Oe,ye,n,o,p)}}return te?(p||(p=new Nr),vd(e,t,n,o,h,p)):!1}function Kp(e){return vt(e)&&Gt(e)==Se}function so(e,t,n,o){var h=n.length,p=h,b=!o;if(e==null)return!p;for(e=Je(e);h--;){var x=n[h];if(b&&x[2]?x[1]!==e[x[0]]:!(x[0]in e))return!1}for(;++h<p;){x=n[h];var R=x[0],K=e[R],V=x[1];if(b&&x[2]){if(K===r&&!(R in e))return!1}else{var J=new Nr;if(o)var te=o(K,V,R,e,t,J);if(!(te===r?Rn(V,K,j|Q,o,J):te))return!1}}return!0}function ru(e){if(!ut(e)||Sd(e))return!1;var t=Zr(e)?Kf:xa;return t.test(ji(e))}function Bp(e){return vt(e)&&Zt(e)==at}function Vp(e){return vt(e)&&Gt(e)==Me}function Gp(e){return vt(e)&&Zs(e.length)&&!!Ve[Zt(e)]}function iu(e){return typeof e=="function"?e:e==null?cr:typeof e=="object"?Ie(e)?au(e[0],e[1]):su(e):Ph(e)}function ao(e){if(!Fn(e))return Yf(e);var t=[];for(var n in Je(e))He.call(e,n)&&n!="constructor"&&t.push(n);return t}function Wp(e){if(!ut(e))return Rd(e);var t=Fn(e),n=[];for(var o in e)o=="constructor"&&(t||!He.call(e,o))||n.push(o);return n}function oo(e,t){return e<t}function nu(e,t){var n=-1,o=ar(e)?D(e.length):[];return pi(e,function(h,p,b){o[++n]=t(h,p,b)}),o}function su(e){var t=Io(e);return t.length==1&&t[0][2]?Mu(t[0][0],t[0][1]):function(n){return n===e||so(n,e,t)}}function au(e,t){return Po(e)&&qu(t)?Mu(Hr(e),t):function(n){var o=Do(n,e);return o===r&&o===t?Lo(n,e):Rn(t,o,j|Q)}}function js(e,t,n,o,h){e!==t&&to(t,function(p,b){if(h||(h=new Nr),ut(p))Jp(e,t,b,n,js,o,h);else{var x=o?o(Oo(e,b),p,b+"",e,t,h):r;x===r&&(x=p),Za(e,b,x)}},or)}function Jp(e,t,n,o,h,p,b){var x=Oo(e,n),R=Oo(t,n),K=b.get(R);if(K){Za(e,n,K);return}var V=p?p(x,R,n+"",e,t,b):r,J=V===r;if(J){var te=Ie(R),oe=!te&&vi(R),ge=!te&&!oe&&un(R);V=R,te||oe||ge?Ie(x)?V=x:bt(x)?V=sr(x):oe?(J=!1,V=mu(R,!0)):ge?(J=!1,V=_u(R,!0)):V=[]:Dn(R)||qi(R)?(V=x,qi(x)?V=gh(x):(!ut(x)||Zr(x))&&(V=ju(R))):J=!1}J&&(b.set(R,V),h(V,R,o,p,b),b.delete(R)),Za(e,n,V)}function ou(e,t){var n=e.length;if(n)return t+=t<0?n:0,Xr(t,n)?e[t]:r}function cu(e,t,n){t.length?t=nt(t,function(p){return Ie(p)?function(b){return Di(b,p.length===1?p[0]:p)}:p}):t=[cr];var o=-1;t=nt(t,pr(de()));var h=nu(e,function(p,b,x){var R=nt(t,function(K){return K(p)});return{criteria:R,index:++o,value:p}});return Ef(h,function(p,b){return cd(p,b,n)})}function Yp(e,t){return uu(e,t,function(n,o){return Lo(e,o)})}function uu(e,t,n){for(var o=-1,h=t.length,p={};++o<h;){var b=t[o],x=Di(e,b);n(x,b)&&Tn(p,gi(b,e),x)}return p}function Qp(e){return function(t){return Di(t,e)}}function co(e,t,n,o){var h=o?bf:Qi,p=-1,b=t.length,x=e;for(e===t&&(t=sr(t)),n&&(x=nt(e,pr(n)));++p<b;)for(var R=0,K=t[p],V=n?n(K):K;(R=h(x,V,R,o))>-1;)x!==e&&Os.call(x,R,1),Os.call(e,R,1);return e}function hu(e,t){for(var n=e?t.length:0,o=n-1;n--;){var h=t[n];if(n==o||h!==p){var p=h;Xr(h)?Os.call(e,h,1):fo(e,h)}}return e}function uo(e,t){return e+Rs(Kc()*(t-e+1))}function Xp(e,t,n,o){for(var h=-1,p=Lt(As((t-e)/(n||1)),0),b=D(p);p--;)b[o?p:++h]=e,e+=n;return b}function ho(e,t){var n="";if(!e||t<1||t>Z)return n;do t%2&&(n+=e),t=Rs(t/2),t&&(e+=e);while(t);return n}function Ce(e,t){return Co(zu(e,t,cr),e+"")}function Zp(e){return Gc(hn(e))}function ed(e,t){var n=hn(e);return Gs(n,$i(t,0,n.length))}function Tn(e,t,n,o){if(!ut(e))return e;t=gi(t,e);for(var h=-1,p=t.length,b=p-1,x=e;x!=null&&++h<p;){var R=Hr(t[h]),K=n;if(R==="__proto__"||R==="constructor"||R==="prototype")return e;if(h!=b){var V=x[R];K=o?o(V,R,x):r,K===r&&(K=ut(V)?V:Xr(t[h+1])?[]:{})}On(x,R,K),x=x[R]}return e}var lu=Ts?function(e,t){return Ts.set(e,t),e}:cr,td=Cs?function(e,t){return Cs(e,"toString",{configurable:!0,enumerable:!1,value:qo(t),writable:!0})}:cr;function rd(e){return Gs(hn(e))}function Pr(e,t,n){var o=-1,h=e.length;t<0&&(t=-t>h?0:h+t),n=n>h?h:n,n<0&&(n+=h),h=t>n?0:n-t>>>0,t>>>=0;for(var p=D(h);++o<h;)p[o]=e[o+t];return p}function id(e,t){var n;return pi(e,function(o,h,p){return n=t(o,h,p),!n}),!!n}function qs(e,t,n){var o=0,h=e==null?o:e.length;if(typeof t=="number"&&t===t&&h<=xe){for(;o<h;){var p=o+h>>>1,b=e[p];b!==null&&!gr(b)&&(n?b<=t:b<t)?o=p+1:h=p}return h}return lo(e,t,cr,n)}function lo(e,t,n,o){var h=0,p=e==null?0:e.length;if(p===0)return 0;t=n(t);for(var b=t!==t,x=t===null,R=gr(t),K=t===r;h<p;){var V=Rs((h+p)/2),J=n(e[V]),te=J!==r,oe=J===null,ge=J===J,Oe=gr(J);if(b)var ye=o||ge;else K?ye=ge&&(o||te):x?ye=ge&&te&&(o||!oe):R?ye=ge&&te&&!oe&&(o||!Oe):oe||Oe?ye=!1:ye=o?J<=t:J<t;ye?h=V+1:p=V}return Vt(p,ce)}function fu(e,t){for(var n=-1,o=e.length,h=0,p=[];++n<o;){var b=e[n],x=t?t(b):b;if(!n||!Fr(x,R)){var R=x;p[h++]=b===0?0:b}}return p}function pu(e){return typeof e=="number"?e:gr(e)?k:+e}function dr(e){if(typeof e=="string")return e;if(Ie(e))return nt(e,dr)+"";if(gr(e))return Bc?Bc.call(e):"";var t=e+"";return t=="0"&&1/e==-ee?"-0":t}function di(e,t,n){var o=-1,h=vs,p=e.length,b=!0,x=[],R=x;if(n)b=!1,h=za;else if(p>=a){var K=t?null:dd(e);if(K)return _s(K);b=!1,h=bn,R=new Fi}else R=t?[]:x;e:for(;++o<p;){var V=e[o],J=t?t(V):V;if(V=n||V!==0?V:0,b&&J===J){for(var te=R.length;te--;)if(R[te]===J)continue e;t&&R.push(J),x.push(V)}else h(R,J,n)||(R!==x&&R.push(J),x.push(V))}return x}function fo(e,t){return t=gi(t,e),e=Uu(e,t),e==null||delete e[Hr(Sr(t))]}function du(e,t,n,o){return Tn(e,t,n(Di(e,t)),o)}function Ms(e,t,n,o){for(var h=e.length,p=o?h:-1;(o?p--:++p<h)&&t(e[p],p,e););return n?Pr(e,o?0:p,o?p+1:h):Pr(e,o?p+1:0,o?h:p)}function gu(e,t){var n=e;return n instanceof Te&&(n=n.value()),Ua(t,function(o,h){return h.func.apply(h.thisArg,hi([o],h.args))},n)}function po(e,t,n){var o=e.length;if(o<2)return o?di(e[0]):[];for(var h=-1,p=D(o);++h<o;)for(var b=e[h],x=-1;++x<o;)x!=h&&(p[h]=Cn(p[h]||b,e[x],t,n));return di(Kt(p,1),t,n)}function yu(e,t,n){for(var o=-1,h=e.length,p=t.length,b={};++o<h;){var x=o<p?t[o]:r;n(b,e[o],x)}return b}function go(e){return bt(e)?e:[]}function yo(e){return typeof e=="function"?e:cr}function gi(e,t){return Ie(e)?e:Po(e,t)?[e]:Bu(ze(e))}var nd=Ce;function yi(e,t,n){var o=e.length;return n=n===r?o:n,!t&&n>=o?e:Pr(e,t,n)}var vu=Bf||function(e){return Fe.clearTimeout(e)};function mu(e,t){if(t)return e.slice();var n=e.length,o=Mc?Mc(n):new e.constructor(n);return e.copy(o),o}function vo(e){var t=new e.constructor(e.byteLength);return new Ps(t).set(new Ps(e)),t}function sd(e,t){var n=t?vo(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}function ad(e){var t=new e.constructor(e.source,_r.exec(e));return t.lastIndex=e.lastIndex,t}function od(e){return Sn?Je(Sn.call(e)):{}}function _u(e,t){var n=t?vo(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function wu(e,t){if(e!==t){var n=e!==r,o=e===null,h=e===e,p=gr(e),b=t!==r,x=t===null,R=t===t,K=gr(t);if(!x&&!K&&!p&&e>t||p&&b&&R&&!x&&!K||o&&b&&R||!n&&R||!h)return 1;if(!o&&!p&&!K&&e<t||K&&n&&h&&!o&&!p||x&&n&&h||!b&&h||!R)return-1}return 0}function cd(e,t,n){for(var o=-1,h=e.criteria,p=t.criteria,b=h.length,x=n.length;++o<b;){var R=wu(h[o],p[o]);if(R){if(o>=x)return R;var K=n[o];return R*(K=="desc"?-1:1)}}return e.index-t.index}function bu(e,t,n,o){for(var h=-1,p=e.length,b=n.length,x=-1,R=t.length,K=Lt(p-b,0),V=D(R+K),J=!o;++x<R;)V[x]=t[x];for(;++h<b;)(J||h<p)&&(V[n[h]]=e[h]);for(;K--;)V[x++]=e[h++];return V}function Eu(e,t,n,o){for(var h=-1,p=e.length,b=-1,x=n.length,R=-1,K=t.length,V=Lt(p-x,0),J=D(V+K),te=!o;++h<V;)J[h]=e[h];for(var oe=h;++R<K;)J[oe+R]=t[R];for(;++b<x;)(te||h<p)&&(J[oe+n[b]]=e[h++]);return J}function sr(e,t){var n=-1,o=e.length;for(t||(t=D(o));++n<o;)t[n]=e[n];return t}function Ur(e,t,n,o){var h=!n;n||(n={});for(var p=-1,b=t.length;++p<b;){var x=t[p],R=o?o(n[x],e[x],x,n,e):r;R===r&&(R=e[x]),h?Jr(n,x,R):On(n,x,R)}return n}function ud(e,t){return Ur(e,xo(e),t)}function hd(e,t){return Ur(e,Du(e),t)}function zs(e,t){return function(n,o){var h=Ie(n)?gf:Np,p=t?t():{};return h(n,e,de(o,2),p)}}function an(e){return Ce(function(t,n){var o=-1,h=n.length,p=h>1?n[h-1]:r,b=h>2?n[2]:r;for(p=e.length>3&&typeof p=="function"?(h--,p):r,b&&er(n[0],n[1],b)&&(p=h<3?r:p,h=1),t=Je(t);++o<h;){var x=n[o];x&&e(t,x,o,p)}return t})}function Iu(e,t){return function(n,o){if(n==null)return n;if(!ar(n))return e(n,o);for(var h=n.length,p=t?h:-1,b=Je(n);(t?p--:++p<h)&&o(b[p],p,b)!==!1;);return n}}function xu(e){return function(t,n,o){for(var h=-1,p=Je(t),b=o(t),x=b.length;x--;){var R=b[e?x:++h];if(n(p[R],R,p)===!1)break}return t}}function ld(e,t,n){var o=t&ae,h=Nn(e);function p(){var b=this&&this!==Fe&&this instanceof p?h:e;return b.apply(o?n:this,arguments)}return p}function Pu(e){return function(t){t=ze(t);var n=Xi(t)?Tr(t):r,o=n?n[0]:t.charAt(0),h=n?yi(n,1).join(""):t.slice(1);return o[e]()+h}}function on(e){return function(t){return Ua(Ih(Eh(t).replace(_n,"")),e,"")}}function Nn(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=sn(e.prototype),o=e.apply(n,t);return ut(o)?o:n}}function fd(e,t,n){var o=Nn(e);function h(){for(var p=arguments.length,b=D(p),x=p,R=cn(h);x--;)b[x]=arguments[x];var K=p<3&&b[0]!==R&&b[p-1]!==R?[]:li(b,R);if(p-=K.length,p<n)return Ru(e,t,Us,h.placeholder,r,b,K,r,r,n-p);var V=this&&this!==Fe&&this instanceof h?o:e;return Mt(V,this,b)}return h}function Su(e){return function(t,n,o){var h=Je(t);if(!ar(t)){var p=de(n,3);t=zt(t),n=function(x){return p(h[x],x,h)}}var b=e(t,n,o);return b>-1?h[p?t[b]:b]:r}}function Ou(e){return Qr(function(t){var n=t.length,o=n,h=Ir.prototype.thru;for(e&&t.reverse();o--;){var p=t[o];if(typeof p!="function")throw new Er(d);if(h&&!b&&Bs(p)=="wrapper")var b=new Ir([],!0)}for(o=b?o:n;++o<n;){p=t[o];var x=Bs(p),R=x=="wrapper"?Eo(p):r;R&&So(R[0])&&R[1]==(G|fe|me|U)&&!R[4].length&&R[9]==1?b=b[Bs(R[0])].apply(b,R[3]):b=p.length==1&&So(p)?b[x]():b.thru(p)}return function(){var K=arguments,V=K[0];if(b&&K.length==1&&Ie(V))return b.plant(V).value();for(var J=0,te=n?t[J].apply(this,K):V;++J<n;)te=t[J].call(this,te);return te}})}function Us(e,t,n,o,h,p,b,x,R,K){var V=t&G,J=t&ae,te=t&he,oe=t&(fe|ve),ge=t&pe,Oe=te?r:Nn(e);function ye(){for(var Ae=arguments.length,$e=D(Ae),yr=Ae;yr--;)$e[yr]=arguments[yr];if(oe)var tr=cn(ye),vr=xf($e,tr);if(o&&($e=bu($e,o,h,oe)),p&&($e=Eu($e,p,b,oe)),Ae-=vr,oe&&Ae<K){var Et=li($e,tr);return Ru(e,t,Us,ye.placeholder,n,$e,Et,x,R,K-Ae)}var $r=J?n:this,ti=te?$r[e]:e;return Ae=$e.length,x?$e=Nd($e,x):ge&&Ae>1&&$e.reverse(),V&&R<Ae&&($e.length=R),this&&this!==Fe&&this instanceof ye&&(ti=Oe||Nn(ti)),ti.apply($r,$e)}return ye}function Cu(e,t){return function(n,o){return zp(n,e,t(o),{})}}function Hs(e,t){return function(n,o){var h;if(n===r&&o===r)return t;if(n!==r&&(h=n),o!==r){if(h===r)return o;typeof n=="string"||typeof o=="string"?(n=dr(n),o=dr(o)):(n=pu(n),o=pu(o)),h=e(n,o)}return h}}function mo(e){return Qr(function(t){return t=nt(t,pr(de())),Ce(function(n){var o=this;return e(t,function(h){return Mt(h,o,n)})})})}function ks(e,t){t=t===r?" ":dr(t);var n=t.length;if(n<2)return n?ho(t,e):t;var o=ho(t,As(e/Zi(t)));return Xi(t)?yi(Tr(o),0,e).join(""):o.slice(0,e)}function pd(e,t,n,o){var h=t&ae,p=Nn(e);function b(){for(var x=-1,R=arguments.length,K=-1,V=o.length,J=D(V+R),te=this&&this!==Fe&&this instanceof b?p:e;++K<V;)J[K]=o[K];for(;R--;)J[K++]=arguments[++x];return Mt(te,h?n:this,J)}return b}function Au(e){return function(t,n,o){return o&&typeof o!="number"&&er(t,n,o)&&(n=o=r),t=ei(t),n===r?(n=t,t=0):n=ei(n),o=o===r?t<n?1:-1:ei(o),Xp(t,n,o,e)}}function Ks(e){return function(t,n){return typeof t=="string"&&typeof n=="string"||(t=Or(t),n=Or(n)),e(t,n)}}function Ru(e,t,n,o,h,p,b,x,R,K){var V=t&fe,J=V?b:r,te=V?r:b,oe=V?p:r,ge=V?r:p;t|=V?me:M,t&=~(V?M:me),t&le||(t&=~(ae|he));var Oe=[e,t,h,oe,J,ge,te,x,R,K],ye=n.apply(r,Oe);return So(e)&&Hu(ye,Oe),ye.placeholder=o,ku(ye,e,t)}function _o(e){var t=Dt[e];return function(n,o){if(n=Or(n),o=o==null?0:Vt(Pe(o),292),o&&kc(n)){var h=(ze(n)+"e").split("e"),p=t(h[0]+"e"+(+h[1]+o));return h=(ze(p)+"e").split("e"),+(h[0]+"e"+(+h[1]-o))}return t(n)}}var dd=rn&&1/_s(new rn([,-0]))[1]==ee?function(e){return new rn(e)}:Uo;function Tu(e){return function(t){var n=Gt(t);return n==Se?Wa(t):n==Me?Tf(t):If(t,e(t))}}function Yr(e,t,n,o,h,p,b,x){var R=t&he;if(!R&&typeof e!="function")throw new Er(d);var K=o?o.length:0;if(K||(t&=~(me|M),o=h=r),b=b===r?b:Lt(Pe(b),0),x=x===r?x:Pe(x),K-=h?h.length:0,t&M){var V=o,J=h;o=h=r}var te=R?r:Eo(e),oe=[e,t,n,o,h,V,J,p,b,x];if(te&&Ad(oe,te),e=oe[0],t=oe[1],n=oe[2],o=oe[3],h=oe[4],x=oe[9]=oe[9]===r?R?0:e.length:Lt(oe[9]-K,0),!x&&t&(fe|ve)&&(t&=~(fe|ve)),!t||t==ae)var ge=ld(e,t,n);else t==fe||t==ve?ge=fd(e,t,x):(t==me||t==(ae|me))&&!h.length?ge=pd(e,t,n,o):ge=Us.apply(r,oe);var Oe=te?lu:Hu;return ku(Oe(ge,oe),e,t)}function Nu(e,t,n,o){return e===r||Fr(e,tn[n])&&!He.call(o,n)?t:e}function Fu(e,t,n,o,h,p){return ut(e)&&ut(t)&&(p.set(t,e),js(e,t,r,Fu,p),p.delete(t)),e}function gd(e){return Dn(e)?r:e}function $u(e,t,n,o,h,p){var b=n&j,x=e.length,R=t.length;if(x!=R&&!(b&&R>x))return!1;var K=p.get(e),V=p.get(t);if(K&&V)return K==t&&V==e;var J=-1,te=!0,oe=n&Q?new Fi:r;for(p.set(e,t),p.set(t,e);++J<x;){var ge=e[J],Oe=t[J];if(o)var ye=b?o(Oe,ge,J,t,e,p):o(ge,Oe,J,e,t,p);if(ye!==r){if(ye)continue;te=!1;break}if(oe){if(!Ha(t,function(Ae,$e){if(!bn(oe,$e)&&(ge===Ae||h(ge,Ae,n,o,p)))return oe.push($e)})){te=!1;break}}else if(!(ge===Oe||h(ge,Oe,n,o,p))){te=!1;break}}return p.delete(e),p.delete(t),te}function yd(e,t,n,o,h,p,b){switch(n){case Be:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Le:return!(e.byteLength!=t.byteLength||!p(new Ps(e),new Ps(t)));case q:case N:case De:return Fr(+e,+t);case O:return e.name==t.name&&e.message==t.message;case at:case Qe:return e==t+"";case Se:var x=Wa;case Me:var R=o&j;if(x||(x=_s),e.size!=t.size&&!R)return!1;var K=b.get(e);if(K)return K==t;o|=Q,b.set(e,t);var V=$u(x(e),x(t),o,h,p,b);return b.delete(e),V;case Xe:if(Sn)return Sn.call(e)==Sn.call(t)}return!1}function vd(e,t,n,o,h,p){var b=n&j,x=wo(e),R=x.length,K=wo(t),V=K.length;if(R!=V&&!b)return!1;for(var J=R;J--;){var te=x[J];if(!(b?te in t:He.call(t,te)))return!1}var oe=p.get(e),ge=p.get(t);if(oe&&ge)return oe==t&&ge==e;var Oe=!0;p.set(e,t),p.set(t,e);for(var ye=b;++J<R;){te=x[J];var Ae=e[te],$e=t[te];if(o)var yr=b?o($e,Ae,te,t,e,p):o(Ae,$e,te,e,t,p);if(!(yr===r?Ae===$e||h(Ae,$e,n,o,p):yr)){Oe=!1;break}ye||(ye=te=="constructor")}if(Oe&&!ye){var tr=e.constructor,vr=t.constructor;tr!=vr&&"constructor"in e&&"constructor"in t&&!(typeof tr=="function"&&tr instanceof tr&&typeof vr=="function"&&vr instanceof vr)&&(Oe=!1)}return p.delete(e),p.delete(t),Oe}function Qr(e){return Co(zu(e,r,Ju),e+"")}function wo(e){return eu(e,zt,xo)}function bo(e){return eu(e,or,Du)}var Eo=Ts?function(e){return Ts.get(e)}:Uo;function Bs(e){for(var t=e.name+"",n=nn[t],o=He.call(nn,t)?n.length:0;o--;){var h=n[o],p=h.func;if(p==null||p==e)return h.name}return t}function cn(e){var t=He.call(f,"placeholder")?f:e;return t.placeholder}function de(){var e=f.iteratee||Mo;return e=e===Mo?iu:e,arguments.length?e(arguments[0],arguments[1]):e}function Vs(e,t){var n=e.__data__;return Pd(t)?n[typeof t=="string"?"string":"hash"]:n.map}function Io(e){for(var t=zt(e),n=t.length;n--;){var o=t[n],h=e[o];t[n]=[o,h,qu(h)]}return t}function Li(e,t){var n=Cf(e,t);return ru(n)?n:r}function md(e){var t=He.call(e,Ti),n=e[Ti];try{e[Ti]=r;var o=!0}catch{}var h=Is.call(e);return o&&(t?e[Ti]=n:delete e[Ti]),h}var xo=Ya?function(e){return e==null?[]:(e=Je(e),ui(Ya(e),function(t){return Uc.call(e,t)}))}:Ho,Du=Ya?function(e){for(var t=[];e;)hi(t,xo(e)),e=Ss(e);return t}:Ho,Gt=Zt;(Qa&&Gt(new Qa(new ArrayBuffer(1)))!=Be||In&&Gt(new In)!=Se||Xa&&Gt(Xa.resolve())!=xt||rn&&Gt(new rn)!=Me||xn&&Gt(new xn)!=ke)&&(Gt=function(e){var t=Zt(e),n=t==Re?e.constructor:r,o=n?ji(n):"";if(o)switch(o){case ep:return Be;case tp:return Se;case rp:return xt;case ip:return Me;case np:return ke}return t});function _d(e,t,n){for(var o=-1,h=n.length;++o<h;){var p=n[o],b=p.size;switch(p.type){case"drop":e+=b;break;case"dropRight":t-=b;break;case"take":t=Vt(t,e+b);break;case"takeRight":e=Lt(e,t-b);break}}return{start:e,end:t}}function wd(e){var t=e.match(Ye);return t?t[1].split(At):[]}function Lu(e,t,n){t=gi(t,e);for(var o=-1,h=t.length,p=!1;++o<h;){var b=Hr(t[o]);if(!(p=e!=null&&n(e,b)))break;e=e[b]}return p||++o!=h?p:(h=e==null?0:e.length,!!h&&Zs(h)&&Xr(b,h)&&(Ie(e)||qi(e)))}function bd(e){var t=e.length,n=new e.constructor(t);return t&&typeof e[0]=="string"&&He.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function ju(e){return typeof e.constructor=="function"&&!Fn(e)?sn(Ss(e)):{}}function Ed(e,t,n){var o=e.constructor;switch(t){case Le:return vo(e);case q:case N:return new o(+e);case Be:return sd(e,n);case ht:case Ue:case Pt:case $t:case Ht:case kt:case qt:case Yt:case ir:return _u(e,n);case Se:return new o;case De:case Qe:return new o(e);case at:return ad(e);case Me:return new o;case Xe:return od(e)}}function Id(e,t){var n=t.length;if(!n)return e;var o=n-1;return t[o]=(n>1?"& ":"")+t[o],t=t.join(n>2?", ":" "),e.replace(yt,`{
/* [wrapped with `+t+`] */
`)}function xd(e){return Ie(e)||qi(e)||!!(Hc&&e&&e[Hc])}function Xr(e,t){var n=typeof e;return t=t??Z,!!t&&(n=="number"||n!="symbol"&&Sa.test(e))&&e>-1&&e%1==0&&e<t}function er(e,t,n){if(!ut(n))return!1;var o=typeof t;return(o=="number"?ar(n)&&Xr(t,n.length):o=="string"&&t in n)?Fr(n[t],e):!1}function Po(e,t){if(Ie(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||gr(e)?!0:St.test(e)||!it.test(e)||t!=null&&e in Je(t)}function Pd(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function So(e){var t=Bs(e),n=f[t];if(typeof n!="function"||!(t in Te.prototype))return!1;if(e===n)return!0;var o=Eo(n);return!!o&&e===o[0]}function Sd(e){return!!qc&&qc in e}var Od=bs?Zr:ko;function Fn(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||tn;return e===n}function qu(e){return e===e&&!ut(e)}function Mu(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==r||e in Je(n))}}function Cd(e){var t=Qs(e,function(o){return n.size===y&&n.clear(),o}),n=t.cache;return t}function Ad(e,t){var n=e[1],o=t[1],h=n|o,p=h<(ae|he|G),b=o==G&&n==fe||o==G&&n==U&&e[7].length<=t[8]||o==(G|U)&&t[7].length<=t[8]&&n==fe;if(!(p||b))return e;o&ae&&(e[2]=t[2],h|=n&ae?0:le);var x=t[3];if(x){var R=e[3];e[3]=R?bu(R,x,t[4]):x,e[4]=R?li(e[3],S):t[4]}return x=t[5],x&&(R=e[5],e[5]=R?Eu(R,x,t[6]):x,e[6]=R?li(e[5],S):t[6]),x=t[7],x&&(e[7]=x),o&G&&(e[8]=e[8]==null?t[8]:Vt(e[8],t[8])),e[9]==null&&(e[9]=t[9]),e[0]=t[0],e[1]=h,e}function Rd(e){var t=[];if(e!=null)for(var n in Je(e))t.push(n);return t}function Td(e){return Is.call(e)}function zu(e,t,n){return t=Lt(t===r?e.length-1:t,0),function(){for(var o=arguments,h=-1,p=Lt(o.length-t,0),b=D(p);++h<p;)b[h]=o[t+h];h=-1;for(var x=D(t+1);++h<t;)x[h]=o[h];return x[t]=n(b),Mt(e,this,x)}}function Uu(e,t){return t.length<2?e:Di(e,Pr(t,0,-1))}function Nd(e,t){for(var n=e.length,o=Vt(t.length,n),h=sr(e);o--;){var p=t[o];e[o]=Xr(p,n)?h[p]:r}return e}function Oo(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var Hu=Ku(lu),$n=Gf||function(e,t){return Fe.setTimeout(e,t)},Co=Ku(td);function ku(e,t,n){var o=t+"";return Co(e,Id(o,Fd(wd(o),n)))}function Ku(e){var t=0,n=0;return function(){var o=Qf(),h=L-(o-n);if(n=o,h>0){if(++t>=P)return arguments[0]}else t=0;return e.apply(r,arguments)}}function Gs(e,t){var n=-1,o=e.length,h=o-1;for(t=t===r?o:t;++n<t;){var p=uo(n,h),b=e[p];e[p]=e[n],e[n]=b}return e.length=t,e}var Bu=Cd(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(Ot,function(n,o,h,p){t.push(h?p.replace(wa,"$1"):o||n)}),t});function Hr(e){if(typeof e=="string"||gr(e))return e;var t=e+"";return t=="0"&&1/e==-ee?"-0":t}function ji(e){if(e!=null){try{return Es.call(e)}catch{}try{return e+""}catch{}}return""}function Fd(e,t){return br(jt,function(n){var o="_."+n[0];t&n[1]&&!vs(e,o)&&e.push(o)}),e.sort()}function Vu(e){if(e instanceof Te)return e.clone();var t=new Ir(e.__wrapped__,e.__chain__);return t.__actions__=sr(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function $d(e,t,n){(n?er(e,t,n):t===r)?t=1:t=Lt(Pe(t),0);var o=e==null?0:e.length;if(!o||t<1)return[];for(var h=0,p=0,b=D(As(o/t));h<o;)b[p++]=Pr(e,h,h+=t);return b}function Dd(e){for(var t=-1,n=e==null?0:e.length,o=0,h=[];++t<n;){var p=e[t];p&&(h[o++]=p)}return h}function Ld(){var e=arguments.length;if(!e)return[];for(var t=D(e-1),n=arguments[0],o=e;o--;)t[o-1]=arguments[o];return hi(Ie(n)?sr(n):[n],Kt(t,1))}var jd=Ce(function(e,t){return bt(e)?Cn(e,Kt(t,1,bt,!0)):[]}),qd=Ce(function(e,t){var n=Sr(t);return bt(n)&&(n=r),bt(e)?Cn(e,Kt(t,1,bt,!0),de(n,2)):[]}),Md=Ce(function(e,t){var n=Sr(t);return bt(n)&&(n=r),bt(e)?Cn(e,Kt(t,1,bt,!0),r,n):[]});function zd(e,t,n){var o=e==null?0:e.length;return o?(t=n||t===r?1:Pe(t),Pr(e,t<0?0:t,o)):[]}function Ud(e,t,n){var o=e==null?0:e.length;return o?(t=n||t===r?1:Pe(t),t=o-t,Pr(e,0,t<0?0:t)):[]}function Hd(e,t){return e&&e.length?Ms(e,de(t,3),!0,!0):[]}function kd(e,t){return e&&e.length?Ms(e,de(t,3),!0):[]}function Kd(e,t,n,o){var h=e==null?0:e.length;return h?(n&&typeof n!="number"&&er(e,t,n)&&(n=0,o=h),Lp(e,t,n,o)):[]}function Gu(e,t,n){var o=e==null?0:e.length;if(!o)return-1;var h=n==null?0:Pe(n);return h<0&&(h=Lt(o+h,0)),ms(e,de(t,3),h)}function Wu(e,t,n){var o=e==null?0:e.length;if(!o)return-1;var h=o-1;return n!==r&&(h=Pe(n),h=n<0?Lt(o+h,0):Vt(h,o-1)),ms(e,de(t,3),h,!0)}function Ju(e){var t=e==null?0:e.length;return t?Kt(e,1):[]}function Bd(e){var t=e==null?0:e.length;return t?Kt(e,ee):[]}function Vd(e,t){var n=e==null?0:e.length;return n?(t=t===r?1:Pe(t),Kt(e,t)):[]}function Gd(e){for(var t=-1,n=e==null?0:e.length,o={};++t<n;){var h=e[t];o[h[0]]=h[1]}return o}function Yu(e){return e&&e.length?e[0]:r}function Wd(e,t,n){var o=e==null?0:e.length;if(!o)return-1;var h=n==null?0:Pe(n);return h<0&&(h=Lt(o+h,0)),Qi(e,t,h)}function Jd(e){var t=e==null?0:e.length;return t?Pr(e,0,-1):[]}var Yd=Ce(function(e){var t=nt(e,go);return t.length&&t[0]===e[0]?no(t):[]}),Qd=Ce(function(e){var t=Sr(e),n=nt(e,go);return t===Sr(n)?t=r:n.pop(),n.length&&n[0]===e[0]?no(n,de(t,2)):[]}),Xd=Ce(function(e){var t=Sr(e),n=nt(e,go);return t=typeof t=="function"?t:r,t&&n.pop(),n.length&&n[0]===e[0]?no(n,r,t):[]});function Zd(e,t){return e==null?"":Jf.call(e,t)}function Sr(e){var t=e==null?0:e.length;return t?e[t-1]:r}function eg(e,t,n){var o=e==null?0:e.length;if(!o)return-1;var h=o;return n!==r&&(h=Pe(n),h=h<0?Lt(o+h,0):Vt(h,o-1)),t===t?Ff(e,t,h):ms(e,Rc,h,!0)}function tg(e,t){return e&&e.length?ou(e,Pe(t)):r}var rg=Ce(Qu);function Qu(e,t){return e&&e.length&&t&&t.length?co(e,t):e}function ig(e,t,n){return e&&e.length&&t&&t.length?co(e,t,de(n,2)):e}function ng(e,t,n){return e&&e.length&&t&&t.length?co(e,t,r,n):e}var sg=Qr(function(e,t){var n=e==null?0:e.length,o=eo(e,t);return hu(e,nt(t,function(h){return Xr(h,n)?+h:h}).sort(wu)),o});function ag(e,t){var n=[];if(!(e&&e.length))return n;var o=-1,h=[],p=e.length;for(t=de(t,3);++o<p;){var b=e[o];t(b,o,e)&&(n.push(b),h.push(o))}return hu(e,h),n}function Ao(e){return e==null?e:Zf.call(e)}function og(e,t,n){var o=e==null?0:e.length;return o?(n&&typeof n!="number"&&er(e,t,n)?(t=0,n=o):(t=t==null?0:Pe(t),n=n===r?o:Pe(n)),Pr(e,t,n)):[]}function cg(e,t){return qs(e,t)}function ug(e,t,n){return lo(e,t,de(n,2))}function hg(e,t){var n=e==null?0:e.length;if(n){var o=qs(e,t);if(o<n&&Fr(e[o],t))return o}return-1}function lg(e,t){return qs(e,t,!0)}function fg(e,t,n){return lo(e,t,de(n,2),!0)}function pg(e,t){var n=e==null?0:e.length;if(n){var o=qs(e,t,!0)-1;if(Fr(e[o],t))return o}return-1}function dg(e){return e&&e.length?fu(e):[]}function gg(e,t){return e&&e.length?fu(e,de(t,2)):[]}function yg(e){var t=e==null?0:e.length;return t?Pr(e,1,t):[]}function vg(e,t,n){return e&&e.length?(t=n||t===r?1:Pe(t),Pr(e,0,t<0?0:t)):[]}function mg(e,t,n){var o=e==null?0:e.length;return o?(t=n||t===r?1:Pe(t),t=o-t,Pr(e,t<0?0:t,o)):[]}function _g(e,t){return e&&e.length?Ms(e,de(t,3),!1,!0):[]}function wg(e,t){return e&&e.length?Ms(e,de(t,3)):[]}var bg=Ce(function(e){return di(Kt(e,1,bt,!0))}),Eg=Ce(function(e){var t=Sr(e);return bt(t)&&(t=r),di(Kt(e,1,bt,!0),de(t,2))}),Ig=Ce(function(e){var t=Sr(e);return t=typeof t=="function"?t:r,di(Kt(e,1,bt,!0),r,t)});function xg(e){return e&&e.length?di(e):[]}function Pg(e,t){return e&&e.length?di(e,de(t,2)):[]}function Sg(e,t){return t=typeof t=="function"?t:r,e&&e.length?di(e,r,t):[]}function Ro(e){if(!(e&&e.length))return[];var t=0;return e=ui(e,function(n){if(bt(n))return t=Lt(n.length,t),!0}),Va(t,function(n){return nt(e,ka(n))})}function Xu(e,t){if(!(e&&e.length))return[];var n=Ro(e);return t==null?n:nt(n,function(o){return Mt(t,r,o)})}var Og=Ce(function(e,t){return bt(e)?Cn(e,t):[]}),Cg=Ce(function(e){return po(ui(e,bt))}),Ag=Ce(function(e){var t=Sr(e);return bt(t)&&(t=r),po(ui(e,bt),de(t,2))}),Rg=Ce(function(e){var t=Sr(e);return t=typeof t=="function"?t:r,po(ui(e,bt),r,t)}),Tg=Ce(Ro);function Ng(e,t){return yu(e||[],t||[],On)}function Fg(e,t){return yu(e||[],t||[],Tn)}var $g=Ce(function(e){var t=e.length,n=t>1?e[t-1]:r;return n=typeof n=="function"?(e.pop(),n):r,Xu(e,n)});function Zu(e){var t=f(e);return t.__chain__=!0,t}function Dg(e,t){return t(e),e}function Ws(e,t){return t(e)}var Lg=Qr(function(e){var t=e.length,n=t?e[0]:0,o=this.__wrapped__,h=function(p){return eo(p,e)};return t>1||this.__actions__.length||!(o instanceof Te)||!Xr(n)?this.thru(h):(o=o.slice(n,+n+(t?1:0)),o.__actions__.push({func:Ws,args:[h],thisArg:r}),new Ir(o,this.__chain__).thru(function(p){return t&&!p.length&&p.push(r),p}))});function jg(){return Zu(this)}function qg(){return new Ir(this.value(),this.__chain__)}function Mg(){this.__values__===r&&(this.__values__=ph(this.value()));var e=this.__index__>=this.__values__.length,t=e?r:this.__values__[this.__index__++];return{done:e,value:t}}function zg(){return this}function Ug(e){for(var t,n=this;n instanceof Fs;){var o=Vu(n);o.__index__=0,o.__values__=r,t?h.__wrapped__=o:t=o;var h=o;n=n.__wrapped__}return h.__wrapped__=e,t}function Hg(){var e=this.__wrapped__;if(e instanceof Te){var t=e;return this.__actions__.length&&(t=new Te(this)),t=t.reverse(),t.__actions__.push({func:Ws,args:[Ao],thisArg:r}),new Ir(t,this.__chain__)}return this.thru(Ao)}function kg(){return gu(this.__wrapped__,this.__actions__)}var Kg=zs(function(e,t,n){He.call(e,n)?++e[n]:Jr(e,n,1)});function Bg(e,t,n){var o=Ie(e)?Cc:Dp;return n&&er(e,t,n)&&(t=r),o(e,de(t,3))}function Vg(e,t){var n=Ie(e)?ui:Xc;return n(e,de(t,3))}var Gg=Su(Gu),Wg=Su(Wu);function Jg(e,t){return Kt(Js(e,t),1)}function Yg(e,t){return Kt(Js(e,t),ee)}function Qg(e,t,n){return n=n===r?1:Pe(n),Kt(Js(e,t),n)}function eh(e,t){var n=Ie(e)?br:pi;return n(e,de(t,3))}function th(e,t){var n=Ie(e)?yf:Qc;return n(e,de(t,3))}var Xg=zs(function(e,t,n){He.call(e,n)?e[n].push(t):Jr(e,n,[t])});function Zg(e,t,n,o){e=ar(e)?e:hn(e),n=n&&!o?Pe(n):0;var h=e.length;return n<0&&(n=Lt(h+n,0)),ea(e)?n<=h&&e.indexOf(t,n)>-1:!!h&&Qi(e,t,n)>-1}var ey=Ce(function(e,t,n){var o=-1,h=typeof t=="function",p=ar(e)?D(e.length):[];return pi(e,function(b){p[++o]=h?Mt(t,b,n):An(b,t,n)}),p}),ty=zs(function(e,t,n){Jr(e,n,t)});function Js(e,t){var n=Ie(e)?nt:nu;return n(e,de(t,3))}function ry(e,t,n,o){return e==null?[]:(Ie(t)||(t=t==null?[]:[t]),n=o?r:n,Ie(n)||(n=n==null?[]:[n]),cu(e,t,n))}var iy=zs(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]});function ny(e,t,n){var o=Ie(e)?Ua:Nc,h=arguments.length<3;return o(e,de(t,4),n,h,pi)}function sy(e,t,n){var o=Ie(e)?vf:Nc,h=arguments.length<3;return o(e,de(t,4),n,h,Qc)}function ay(e,t){var n=Ie(e)?ui:Xc;return n(e,Xs(de(t,3)))}function oy(e){var t=Ie(e)?Gc:Zp;return t(e)}function cy(e,t,n){(n?er(e,t,n):t===r)?t=1:t=Pe(t);var o=Ie(e)?Rp:ed;return o(e,t)}function uy(e){var t=Ie(e)?Tp:rd;return t(e)}function hy(e){if(e==null)return 0;if(ar(e))return ea(e)?Zi(e):e.length;var t=Gt(e);return t==Se||t==Me?e.size:ao(e).length}function ly(e,t,n){var o=Ie(e)?Ha:id;return n&&er(e,t,n)&&(t=r),o(e,de(t,3))}var fy=Ce(function(e,t){if(e==null)return[];var n=t.length;return n>1&&er(e,t[0],t[1])?t=[]:n>2&&er(t[0],t[1],t[2])&&(t=[t[0]]),cu(e,Kt(t,1),[])}),Ys=Vf||function(){return Fe.Date.now()};function py(e,t){if(typeof t!="function")throw new Er(d);return e=Pe(e),function(){if(--e<1)return t.apply(this,arguments)}}function rh(e,t,n){return t=n?r:t,t=e&&t==null?e.length:t,Yr(e,G,r,r,r,r,t)}function ih(e,t){var n;if(typeof t!="function")throw new Er(d);return e=Pe(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=r),n}}var To=Ce(function(e,t,n){var o=ae;if(n.length){var h=li(n,cn(To));o|=me}return Yr(e,o,t,n,h)}),nh=Ce(function(e,t,n){var o=ae|he;if(n.length){var h=li(n,cn(nh));o|=me}return Yr(t,o,e,n,h)});function sh(e,t,n){t=n?r:t;var o=Yr(e,fe,r,r,r,r,r,t);return o.placeholder=sh.placeholder,o}function ah(e,t,n){t=n?r:t;var o=Yr(e,ve,r,r,r,r,r,t);return o.placeholder=ah.placeholder,o}function oh(e,t,n){var o,h,p,b,x,R,K=0,V=!1,J=!1,te=!0;if(typeof e!="function")throw new Er(d);t=Or(t)||0,ut(n)&&(V=!!n.leading,J="maxWait"in n,p=J?Lt(Or(n.maxWait)||0,t):p,te="trailing"in n?!!n.trailing:te);function oe(Et){var $r=o,ti=h;return o=h=r,K=Et,b=e.apply(ti,$r),b}function ge(Et){return K=Et,x=$n(Ae,t),V?oe(Et):b}function Oe(Et){var $r=Et-R,ti=Et-K,Sh=t-$r;return J?Vt(Sh,p-ti):Sh}function ye(Et){var $r=Et-R,ti=Et-K;return R===r||$r>=t||$r<0||J&&ti>=p}function Ae(){var Et=Ys();if(ye(Et))return $e(Et);x=$n(Ae,Oe(Et))}function $e(Et){return x=r,te&&o?oe(Et):(o=h=r,b)}function yr(){x!==r&&vu(x),K=0,o=R=h=x=r}function tr(){return x===r?b:$e(Ys())}function vr(){var Et=Ys(),$r=ye(Et);if(o=arguments,h=this,R=Et,$r){if(x===r)return ge(R);if(J)return vu(x),x=$n(Ae,t),oe(R)}return x===r&&(x=$n(Ae,t)),b}return vr.cancel=yr,vr.flush=tr,vr}var dy=Ce(function(e,t){return Yc(e,1,t)}),gy=Ce(function(e,t,n){return Yc(e,Or(t)||0,n)});function yy(e){return Yr(e,pe)}function Qs(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new Er(d);var n=function(){var o=arguments,h=t?t.apply(this,o):o[0],p=n.cache;if(p.has(h))return p.get(h);var b=e.apply(this,o);return n.cache=p.set(h,b)||p,b};return n.cache=new(Qs.Cache||Wr),n}Qs.Cache=Wr;function Xs(e){if(typeof e!="function")throw new Er(d);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function vy(e){return ih(2,e)}var my=nd(function(e,t){t=t.length==1&&Ie(t[0])?nt(t[0],pr(de())):nt(Kt(t,1),pr(de()));var n=t.length;return Ce(function(o){for(var h=-1,p=Vt(o.length,n);++h<p;)o[h]=t[h].call(this,o[h]);return Mt(e,this,o)})}),No=Ce(function(e,t){var n=li(t,cn(No));return Yr(e,me,r,t,n)}),ch=Ce(function(e,t){var n=li(t,cn(ch));return Yr(e,M,r,t,n)}),_y=Qr(function(e,t){return Yr(e,U,r,r,r,t)});function wy(e,t){if(typeof e!="function")throw new Er(d);return t=t===r?t:Pe(t),Ce(e,t)}function by(e,t){if(typeof e!="function")throw new Er(d);return t=t==null?0:Lt(Pe(t),0),Ce(function(n){var o=n[t],h=yi(n,0,t);return o&&hi(h,o),Mt(e,this,h)})}function Ey(e,t,n){var o=!0,h=!0;if(typeof e!="function")throw new Er(d);return ut(n)&&(o="leading"in n?!!n.leading:o,h="trailing"in n?!!n.trailing:h),oh(e,t,{leading:o,maxWait:t,trailing:h})}function Iy(e){return rh(e,1)}function xy(e,t){return No(yo(t),e)}function Py(){if(!arguments.length)return[];var e=arguments[0];return Ie(e)?e:[e]}function Sy(e){return xr(e,B)}function Oy(e,t){return t=typeof t=="function"?t:r,xr(e,B,t)}function Cy(e){return xr(e,T|B)}function Ay(e,t){return t=typeof t=="function"?t:r,xr(e,T|B,t)}function Ry(e,t){return t==null||Jc(e,t,zt(t))}function Fr(e,t){return e===t||e!==e&&t!==t}var Ty=Ks(io),Ny=Ks(function(e,t){return e>=t}),qi=tu(function(){return arguments}())?tu:function(e){return vt(e)&&He.call(e,"callee")&&!Uc.call(e,"callee")},Ie=D.isArray,Fy=Xt?pr(Xt):Up;function ar(e){return e!=null&&Zs(e.length)&&!Zr(e)}function bt(e){return vt(e)&&ar(e)}function $y(e){return e===!0||e===!1||vt(e)&&Zt(e)==q}var vi=Wf||ko,Dy=Rr?pr(Rr):Hp;function Ly(e){return vt(e)&&e.nodeType===1&&!Dn(e)}function jy(e){if(e==null)return!0;if(ar(e)&&(Ie(e)||typeof e=="string"||typeof e.splice=="function"||vi(e)||un(e)||qi(e)))return!e.length;var t=Gt(e);if(t==Se||t==Me)return!e.size;if(Fn(e))return!ao(e).length;for(var n in e)if(He.call(e,n))return!1;return!0}function qy(e,t){return Rn(e,t)}function My(e,t,n){n=typeof n=="function"?n:r;var o=n?n(e,t):r;return o===r?Rn(e,t,r,n):!!o}function Fo(e){if(!vt(e))return!1;var t=Zt(e);return t==O||t==u||typeof e.message=="string"&&typeof e.name=="string"&&!Dn(e)}function zy(e){return typeof e=="number"&&kc(e)}function Zr(e){if(!ut(e))return!1;var t=Zt(e);return t==se||t==_e||t==z||t==mt}function uh(e){return typeof e=="number"&&e==Pe(e)}function Zs(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Z}function ut(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}function vt(e){return e!=null&&typeof e=="object"}var hh=wr?pr(wr):Kp;function Uy(e,t){return e===t||so(e,t,Io(t))}function Hy(e,t,n){return n=typeof n=="function"?n:r,so(e,t,Io(t),n)}function ky(e){return lh(e)&&e!=+e}function Ky(e){if(Od(e))throw new we(l);return ru(e)}function By(e){return e===null}function Vy(e){return e==null}function lh(e){return typeof e=="number"||vt(e)&&Zt(e)==De}function Dn(e){if(!vt(e)||Zt(e)!=Re)return!1;var t=Ss(e);if(t===null)return!0;var n=He.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&Es.call(n)==Hf}var $o=Mr?pr(Mr):Bp;function Gy(e){return uh(e)&&e>=-Z&&e<=Z}var fh=wn?pr(wn):Vp;function ea(e){return typeof e=="string"||!Ie(e)&&vt(e)&&Zt(e)==Qe}function gr(e){return typeof e=="symbol"||vt(e)&&Zt(e)==Xe}var un=Ri?pr(Ri):Gp;function Wy(e){return e===r}function Jy(e){return vt(e)&&Gt(e)==ke}function Yy(e){return vt(e)&&Zt(e)==Ze}var Qy=Ks(oo),Xy=Ks(function(e,t){return e<=t});function ph(e){if(!e)return[];if(ar(e))return ea(e)?Tr(e):sr(e);if(En&&e[En])return Rf(e[En]());var t=Gt(e),n=t==Se?Wa:t==Me?_s:hn;return n(e)}function ei(e){if(!e)return e===0?e:0;if(e=Or(e),e===ee||e===-ee){var t=e<0?-1:1;return t*F}return e===e?e:0}function Pe(e){var t=ei(e),n=t%1;return t===t?n?t-n:t:0}function dh(e){return e?$i(Pe(e),0,X):0}function Or(e){if(typeof e=="number")return e;if(gr(e))return k;if(ut(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=ut(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=Fc(e);var n=Ia.test(e);return n||Pa.test(e)?Ee(e.slice(2),n?2:8):Ea.test(e)?k:+e}function gh(e){return Ur(e,or(e))}function Zy(e){return e?$i(Pe(e),-Z,Z):e===0?e:0}function ze(e){return e==null?"":dr(e)}var ev=an(function(e,t){if(Fn(t)||ar(t)){Ur(t,zt(t),e);return}for(var n in t)He.call(t,n)&&On(e,n,t[n])}),yh=an(function(e,t){Ur(t,or(t),e)}),ta=an(function(e,t,n,o){Ur(t,or(t),e,o)}),tv=an(function(e,t,n,o){Ur(t,zt(t),e,o)}),rv=Qr(eo);function iv(e,t){var n=sn(e);return t==null?n:Wc(n,t)}var nv=Ce(function(e,t){e=Je(e);var n=-1,o=t.length,h=o>2?t[2]:r;for(h&&er(t[0],t[1],h)&&(o=1);++n<o;)for(var p=t[n],b=or(p),x=-1,R=b.length;++x<R;){var K=b[x],V=e[K];(V===r||Fr(V,tn[K])&&!He.call(e,K))&&(e[K]=p[K])}return e}),sv=Ce(function(e){return e.push(r,Fu),Mt(vh,r,e)});function av(e,t){return Ac(e,de(t,3),zr)}function ov(e,t){return Ac(e,de(t,3),ro)}function cv(e,t){return e==null?e:to(e,de(t,3),or)}function uv(e,t){return e==null?e:Zc(e,de(t,3),or)}function hv(e,t){return e&&zr(e,de(t,3))}function lv(e,t){return e&&ro(e,de(t,3))}function fv(e){return e==null?[]:Ls(e,zt(e))}function pv(e){return e==null?[]:Ls(e,or(e))}function Do(e,t,n){var o=e==null?r:Di(e,t);return o===r?n:o}function dv(e,t){return e!=null&&Lu(e,t,jp)}function Lo(e,t){return e!=null&&Lu(e,t,qp)}var gv=Cu(function(e,t,n){t!=null&&typeof t.toString!="function"&&(t=Is.call(t)),e[t]=n},qo(cr)),yv=Cu(function(e,t,n){t!=null&&typeof t.toString!="function"&&(t=Is.call(t)),He.call(e,t)?e[t].push(n):e[t]=[n]},de),vv=Ce(An);function zt(e){return ar(e)?Vc(e):ao(e)}function or(e){return ar(e)?Vc(e,!0):Wp(e)}function mv(e,t){var n={};return t=de(t,3),zr(e,function(o,h,p){Jr(n,t(o,h,p),o)}),n}function _v(e,t){var n={};return t=de(t,3),zr(e,function(o,h,p){Jr(n,h,t(o,h,p))}),n}var wv=an(function(e,t,n){js(e,t,n)}),vh=an(function(e,t,n,o){js(e,t,n,o)}),bv=Qr(function(e,t){var n={};if(e==null)return n;var o=!1;t=nt(t,function(p){return p=gi(p,e),o||(o=p.length>1),p}),Ur(e,bo(e),n),o&&(n=xr(n,T|$|B,gd));for(var h=t.length;h--;)fo(n,t[h]);return n});function Ev(e,t){return mh(e,Xs(de(t)))}var Iv=Qr(function(e,t){return e==null?{}:Yp(e,t)});function mh(e,t){if(e==null)return{};var n=nt(bo(e),function(o){return[o]});return t=de(t),uu(e,n,function(o,h){return t(o,h[0])})}function xv(e,t,n){t=gi(t,e);var o=-1,h=t.length;for(h||(h=1,e=r);++o<h;){var p=e==null?r:e[Hr(t[o])];p===r&&(o=h,p=n),e=Zr(p)?p.call(e):p}return e}function Pv(e,t,n){return e==null?e:Tn(e,t,n)}function Sv(e,t,n,o){return o=typeof o=="function"?o:r,e==null?e:Tn(e,t,n,o)}var _h=Tu(zt),wh=Tu(or);function Ov(e,t,n){var o=Ie(e),h=o||vi(e)||un(e);if(t=de(t,4),n==null){var p=e&&e.constructor;h?n=o?new p:[]:ut(e)?n=Zr(p)?sn(Ss(e)):{}:n={}}return(h?br:zr)(e,function(b,x,R){return t(n,b,x,R)}),n}function Cv(e,t){return e==null?!0:fo(e,t)}function Av(e,t,n){return e==null?e:du(e,t,yo(n))}function Rv(e,t,n,o){return o=typeof o=="function"?o:r,e==null?e:du(e,t,yo(n),o)}function hn(e){return e==null?[]:Ga(e,zt(e))}function Tv(e){return e==null?[]:Ga(e,or(e))}function Nv(e,t,n){return n===r&&(n=t,t=r),n!==r&&(n=Or(n),n=n===n?n:0),t!==r&&(t=Or(t),t=t===t?t:0),$i(Or(e),t,n)}function Fv(e,t,n){return t=ei(t),n===r?(n=t,t=0):n=ei(n),e=Or(e),Mp(e,t,n)}function $v(e,t,n){if(n&&typeof n!="boolean"&&er(e,t,n)&&(t=n=r),n===r&&(typeof t=="boolean"?(n=t,t=r):typeof e=="boolean"&&(n=e,e=r)),e===r&&t===r?(e=0,t=1):(e=ei(e),t===r?(t=e,e=0):t=ei(t)),e>t){var o=e;e=t,t=o}if(n||e%1||t%1){var h=Kc();return Vt(e+h*(t-e+Ge("1e-"+((h+"").length-1))),t)}return uo(e,t)}var Dv=on(function(e,t,n){return t=t.toLowerCase(),e+(n?bh(t):t)});function bh(e){return jo(ze(e).toLowerCase())}function Eh(e){return e=ze(e),e&&e.replace(Br,Pf).replace(qa,"")}function Lv(e,t,n){e=ze(e),t=dr(t);var o=e.length;n=n===r?o:$i(Pe(n),0,o);var h=n;return n-=t.length,n>=0&&e.slice(n,h)==t}function jv(e){return e=ze(e),e&&rt.test(e)?e.replace(Pi,Sf):e}function qv(e){return e=ze(e),e&&Ct.test(e)?e.replace(dt,"\\$&"):e}var Mv=on(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),zv=on(function(e,t,n){return e+(n?" ":"")+t.toLowerCase()}),Uv=Pu("toLowerCase");function Hv(e,t,n){e=ze(e),t=Pe(t);var o=t?Zi(e):0;if(!t||o>=t)return e;var h=(t-o)/2;return ks(Rs(h),n)+e+ks(As(h),n)}function kv(e,t,n){e=ze(e),t=Pe(t);var o=t?Zi(e):0;return t&&o<t?e+ks(t-o,n):e}function Kv(e,t,n){e=ze(e),t=Pe(t);var o=t?Zi(e):0;return t&&o<t?ks(t-o,n)+e:e}function Bv(e,t,n){return n||t==null?t=0:t&&(t=+t),Xf(ze(e).replace(gt,""),t||0)}function Vv(e,t,n){return(n?er(e,t,n):t===r)?t=1:t=Pe(t),ho(ze(e),t)}function Gv(){var e=arguments,t=ze(e[0]);return e.length<3?t:t.replace(e[1],e[2])}var Wv=on(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()});function Jv(e,t,n){return n&&typeof n!="number"&&er(e,t,n)&&(t=n=r),n=n===r?X:n>>>0,n?(e=ze(e),e&&(typeof t=="string"||t!=null&&!$o(t))&&(t=dr(t),!t&&Xi(e))?yi(Tr(e),0,n):e.split(t,n)):[]}var Yv=on(function(e,t,n){return e+(n?" ":"")+jo(t)});function Qv(e,t,n){return e=ze(e),n=n==null?0:$i(Pe(n),0,e.length),t=dr(t),e.slice(n,n+t.length)==t}function Xv(e,t,n){var o=f.templateSettings;n&&er(e,t,n)&&(t=r),e=ze(e),t=ta({},t,o,Nu);var h=ta({},t.imports,o.imports,Nu),p=zt(h),b=Ga(h,p),x,R,K=0,V=t.interpolate||Ki,J="__p += '",te=Ja((t.escape||Ki).source+"|"+V.source+"|"+(V===ct?ba:Ki).source+"|"+(t.evaluate||Ki).source+"|$","g"),oe="//# sourceURL="+(He.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Ma+"]")+`
`;e.replace(te,function(ye,Ae,$e,yr,tr,vr){return $e||($e=yr),J+=e.slice(K,vr).replace(Oa,Of),Ae&&(x=!0,J+=`' +
__e(`+Ae+`) +
'`),tr&&(R=!0,J+=`';
`+tr+`;
__p += '`),$e&&(J+=`' +
((__t = (`+$e+`)) == null ? '' : __t) +
'`),K=vr+ye.length,ye}),J+=`';
`;var ge=He.call(t,"variable")&&t.variable;if(!ge)J=`with (obj) {
`+J+`
}
`;else if(_a.test(ge))throw new we(g);J=(R?J.replace(jr,""):J).replace(Qt,"$1").replace(Kr,"$1;"),J="function("+(ge||"obj")+`) {
`+(ge?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(x?", __e = _.escape":"")+(R?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+J+`return __p
}`;var Oe=xh(function(){return qe(p,oe+"return "+J).apply(r,b)});if(Oe.source=J,Fo(Oe))throw Oe;return Oe}function Zv(e){return ze(e).toLowerCase()}function e0(e){return ze(e).toUpperCase()}function t0(e,t,n){if(e=ze(e),e&&(n||t===r))return Fc(e);if(!e||!(t=dr(t)))return e;var o=Tr(e),h=Tr(t),p=$c(o,h),b=Dc(o,h)+1;return yi(o,p,b).join("")}function r0(e,t,n){if(e=ze(e),e&&(n||t===r))return e.slice(0,jc(e)+1);if(!e||!(t=dr(t)))return e;var o=Tr(e),h=Dc(o,Tr(t))+1;return yi(o,0,h).join("")}function i0(e,t,n){if(e=ze(e),e&&(n||t===r))return e.replace(gt,"");if(!e||!(t=dr(t)))return e;var o=Tr(e),h=$c(o,Tr(t));return yi(o,h).join("")}function n0(e,t){var n=m,o=I;if(ut(t)){var h="separator"in t?t.separator:h;n="length"in t?Pe(t.length):n,o="omission"in t?dr(t.omission):o}e=ze(e);var p=e.length;if(Xi(e)){var b=Tr(e);p=b.length}if(n>=p)return e;var x=n-Zi(o);if(x<1)return o;var R=b?yi(b,0,x).join(""):e.slice(0,x);if(h===r)return R+o;if(b&&(x+=R.length-x),$o(h)){if(e.slice(x).search(h)){var K,V=R;for(h.global||(h=Ja(h.source,ze(_r.exec(h))+"g")),h.lastIndex=0;K=h.exec(V);)var J=K.index;R=R.slice(0,J===r?x:J)}}else if(e.indexOf(dr(h),x)!=x){var te=R.lastIndexOf(h);te>-1&&(R=R.slice(0,te))}return R+o}function s0(e){return e=ze(e),e&&lt.test(e)?e.replace(oi,$f):e}var a0=on(function(e,t,n){return e+(n?" ":"")+t.toUpperCase()}),jo=Pu("toUpperCase");function Ih(e,t,n){return e=ze(e),t=n?r:t,t===r?Af(e)?jf(e):wf(e):e.match(t)||[]}var xh=Ce(function(e,t){try{return Mt(e,r,t)}catch(n){return Fo(n)?n:new we(n)}}),o0=Qr(function(e,t){return br(t,function(n){n=Hr(n),Jr(e,n,To(e[n],e))}),e});function c0(e){var t=e==null?0:e.length,n=de();return e=t?nt(e,function(o){if(typeof o[1]!="function")throw new Er(d);return[n(o[0]),o[1]]}):[],Ce(function(o){for(var h=-1;++h<t;){var p=e[h];if(Mt(p[0],this,o))return Mt(p[1],this,o)}})}function u0(e){return $p(xr(e,T))}function qo(e){return function(){return e}}function h0(e,t){return e==null||e!==e?t:e}var l0=Ou(),f0=Ou(!0);function cr(e){return e}function Mo(e){return iu(typeof e=="function"?e:xr(e,T))}function p0(e){return su(xr(e,T))}function d0(e,t){return au(e,xr(t,T))}var g0=Ce(function(e,t){return function(n){return An(n,e,t)}}),y0=Ce(function(e,t){return function(n){return An(e,n,t)}});function zo(e,t,n){var o=zt(t),h=Ls(t,o);n==null&&!(ut(t)&&(h.length||!o.length))&&(n=t,t=e,e=this,h=Ls(t,zt(t)));var p=!(ut(n)&&"chain"in n)||!!n.chain,b=Zr(e);return br(h,function(x){var R=t[x];e[x]=R,b&&(e.prototype[x]=function(){var K=this.__chain__;if(p||K){var V=e(this.__wrapped__),J=V.__actions__=sr(this.__actions__);return J.push({func:R,args:arguments,thisArg:e}),V.__chain__=K,V}return R.apply(e,hi([this.value()],arguments))})}),e}function v0(){return Fe._===this&&(Fe._=kf),this}function Uo(){}function m0(e){return e=Pe(e),Ce(function(t){return ou(t,e)})}var _0=mo(nt),w0=mo(Cc),b0=mo(Ha);function Ph(e){return Po(e)?ka(Hr(e)):Qp(e)}function E0(e){return function(t){return e==null?r:Di(e,t)}}var I0=Au(),x0=Au(!0);function Ho(){return[]}function ko(){return!1}function P0(){return{}}function S0(){return""}function O0(){return!0}function C0(e,t){if(e=Pe(e),e<1||e>Z)return[];var n=X,o=Vt(e,X);t=de(t),e-=X;for(var h=Va(o,t);++n<e;)t(n);return h}function A0(e){return Ie(e)?nt(e,Hr):gr(e)?[e]:sr(Bu(ze(e)))}function R0(e){var t=++Uf;return ze(e)+t}var T0=Hs(function(e,t){return e+t},0),N0=_o("ceil"),F0=Hs(function(e,t){return e/t},1),$0=_o("floor");function D0(e){return e&&e.length?Ds(e,cr,io):r}function L0(e,t){return e&&e.length?Ds(e,de(t,2),io):r}function j0(e){return Tc(e,cr)}function q0(e,t){return Tc(e,de(t,2))}function M0(e){return e&&e.length?Ds(e,cr,oo):r}function z0(e,t){return e&&e.length?Ds(e,de(t,2),oo):r}var U0=Hs(function(e,t){return e*t},1),H0=_o("round"),k0=Hs(function(e,t){return e-t},0);function K0(e){return e&&e.length?Ba(e,cr):0}function B0(e,t){return e&&e.length?Ba(e,de(t,2)):0}return f.after=py,f.ary=rh,f.assign=ev,f.assignIn=yh,f.assignInWith=ta,f.assignWith=tv,f.at=rv,f.before=ih,f.bind=To,f.bindAll=o0,f.bindKey=nh,f.castArray=Py,f.chain=Zu,f.chunk=$d,f.compact=Dd,f.concat=Ld,f.cond=c0,f.conforms=u0,f.constant=qo,f.countBy=Kg,f.create=iv,f.curry=sh,f.curryRight=ah,f.debounce=oh,f.defaults=nv,f.defaultsDeep=sv,f.defer=dy,f.delay=gy,f.difference=jd,f.differenceBy=qd,f.differenceWith=Md,f.drop=zd,f.dropRight=Ud,f.dropRightWhile=Hd,f.dropWhile=kd,f.fill=Kd,f.filter=Vg,f.flatMap=Jg,f.flatMapDeep=Yg,f.flatMapDepth=Qg,f.flatten=Ju,f.flattenDeep=Bd,f.flattenDepth=Vd,f.flip=yy,f.flow=l0,f.flowRight=f0,f.fromPairs=Gd,f.functions=fv,f.functionsIn=pv,f.groupBy=Xg,f.initial=Jd,f.intersection=Yd,f.intersectionBy=Qd,f.intersectionWith=Xd,f.invert=gv,f.invertBy=yv,f.invokeMap=ey,f.iteratee=Mo,f.keyBy=ty,f.keys=zt,f.keysIn=or,f.map=Js,f.mapKeys=mv,f.mapValues=_v,f.matches=p0,f.matchesProperty=d0,f.memoize=Qs,f.merge=wv,f.mergeWith=vh,f.method=g0,f.methodOf=y0,f.mixin=zo,f.negate=Xs,f.nthArg=m0,f.omit=bv,f.omitBy=Ev,f.once=vy,f.orderBy=ry,f.over=_0,f.overArgs=my,f.overEvery=w0,f.overSome=b0,f.partial=No,f.partialRight=ch,f.partition=iy,f.pick=Iv,f.pickBy=mh,f.property=Ph,f.propertyOf=E0,f.pull=rg,f.pullAll=Qu,f.pullAllBy=ig,f.pullAllWith=ng,f.pullAt=sg,f.range=I0,f.rangeRight=x0,f.rearg=_y,f.reject=ay,f.remove=ag,f.rest=wy,f.reverse=Ao,f.sampleSize=cy,f.set=Pv,f.setWith=Sv,f.shuffle=uy,f.slice=og,f.sortBy=fy,f.sortedUniq=dg,f.sortedUniqBy=gg,f.split=Jv,f.spread=by,f.tail=yg,f.take=vg,f.takeRight=mg,f.takeRightWhile=_g,f.takeWhile=wg,f.tap=Dg,f.throttle=Ey,f.thru=Ws,f.toArray=ph,f.toPairs=_h,f.toPairsIn=wh,f.toPath=A0,f.toPlainObject=gh,f.transform=Ov,f.unary=Iy,f.union=bg,f.unionBy=Eg,f.unionWith=Ig,f.uniq=xg,f.uniqBy=Pg,f.uniqWith=Sg,f.unset=Cv,f.unzip=Ro,f.unzipWith=Xu,f.update=Av,f.updateWith=Rv,f.values=hn,f.valuesIn=Tv,f.without=Og,f.words=Ih,f.wrap=xy,f.xor=Cg,f.xorBy=Ag,f.xorWith=Rg,f.zip=Tg,f.zipObject=Ng,f.zipObjectDeep=Fg,f.zipWith=$g,f.entries=_h,f.entriesIn=wh,f.extend=yh,f.extendWith=ta,zo(f,f),f.add=T0,f.attempt=xh,f.camelCase=Dv,f.capitalize=bh,f.ceil=N0,f.clamp=Nv,f.clone=Sy,f.cloneDeep=Cy,f.cloneDeepWith=Ay,f.cloneWith=Oy,f.conformsTo=Ry,f.deburr=Eh,f.defaultTo=h0,f.divide=F0,f.endsWith=Lv,f.eq=Fr,f.escape=jv,f.escapeRegExp=qv,f.every=Bg,f.find=Gg,f.findIndex=Gu,f.findKey=av,f.findLast=Wg,f.findLastIndex=Wu,f.findLastKey=ov,f.floor=$0,f.forEach=eh,f.forEachRight=th,f.forIn=cv,f.forInRight=uv,f.forOwn=hv,f.forOwnRight=lv,f.get=Do,f.gt=Ty,f.gte=Ny,f.has=dv,f.hasIn=Lo,f.head=Yu,f.identity=cr,f.includes=Zg,f.indexOf=Wd,f.inRange=Fv,f.invoke=vv,f.isArguments=qi,f.isArray=Ie,f.isArrayBuffer=Fy,f.isArrayLike=ar,f.isArrayLikeObject=bt,f.isBoolean=$y,f.isBuffer=vi,f.isDate=Dy,f.isElement=Ly,f.isEmpty=jy,f.isEqual=qy,f.isEqualWith=My,f.isError=Fo,f.isFinite=zy,f.isFunction=Zr,f.isInteger=uh,f.isLength=Zs,f.isMap=hh,f.isMatch=Uy,f.isMatchWith=Hy,f.isNaN=ky,f.isNative=Ky,f.isNil=Vy,f.isNull=By,f.isNumber=lh,f.isObject=ut,f.isObjectLike=vt,f.isPlainObject=Dn,f.isRegExp=$o,f.isSafeInteger=Gy,f.isSet=fh,f.isString=ea,f.isSymbol=gr,f.isTypedArray=un,f.isUndefined=Wy,f.isWeakMap=Jy,f.isWeakSet=Yy,f.join=Zd,f.kebabCase=Mv,f.last=Sr,f.lastIndexOf=eg,f.lowerCase=zv,f.lowerFirst=Uv,f.lt=Qy,f.lte=Xy,f.max=D0,f.maxBy=L0,f.mean=j0,f.meanBy=q0,f.min=M0,f.minBy=z0,f.stubArray=Ho,f.stubFalse=ko,f.stubObject=P0,f.stubString=S0,f.stubTrue=O0,f.multiply=U0,f.nth=tg,f.noConflict=v0,f.noop=Uo,f.now=Ys,f.pad=Hv,f.padEnd=kv,f.padStart=Kv,f.parseInt=Bv,f.random=$v,f.reduce=ny,f.reduceRight=sy,f.repeat=Vv,f.replace=Gv,f.result=xv,f.round=H0,f.runInContext=A,f.sample=oy,f.size=hy,f.snakeCase=Wv,f.some=ly,f.sortedIndex=cg,f.sortedIndexBy=ug,f.sortedIndexOf=hg,f.sortedLastIndex=lg,f.sortedLastIndexBy=fg,f.sortedLastIndexOf=pg,f.startCase=Yv,f.startsWith=Qv,f.subtract=k0,f.sum=K0,f.sumBy=B0,f.template=Xv,f.times=C0,f.toFinite=ei,f.toInteger=Pe,f.toLength=dh,f.toLower=Zv,f.toNumber=Or,f.toSafeInteger=Zy,f.toString=ze,f.toUpper=e0,f.trim=t0,f.trimEnd=r0,f.trimStart=i0,f.truncate=n0,f.unescape=s0,f.uniqueId=R0,f.upperCase=a0,f.upperFirst=jo,f.each=eh,f.eachRight=th,f.first=Yu,zo(f,function(){var e={};return zr(f,function(t,n){He.call(f.prototype,n)||(e[n]=t)}),e}(),{chain:!1}),f.VERSION=s,br(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){f[e].placeholder=f}),br(["drop","take"],function(e,t){Te.prototype[e]=function(n){n=n===r?1:Lt(Pe(n),0);var o=this.__filtered__&&!t?new Te(this):this.clone();return o.__filtered__?o.__takeCount__=Vt(n,o.__takeCount__):o.__views__.push({size:Vt(n,X),type:e+(o.__dir__<0?"Right":"")}),o},Te.prototype[e+"Right"]=function(n){return this.reverse()[e](n).reverse()}}),br(["filter","map","takeWhile"],function(e,t){var n=t+1,o=n==_||n==Y;Te.prototype[e]=function(h){var p=this.clone();return p.__iteratees__.push({iteratee:de(h,3),type:n}),p.__filtered__=p.__filtered__||o,p}}),br(["head","last"],function(e,t){var n="take"+(t?"Right":"");Te.prototype[e]=function(){return this[n](1).value()[0]}}),br(["initial","tail"],function(e,t){var n="drop"+(t?"":"Right");Te.prototype[e]=function(){return this.__filtered__?new Te(this):this[n](1)}}),Te.prototype.compact=function(){return this.filter(cr)},Te.prototype.find=function(e){return this.filter(e).head()},Te.prototype.findLast=function(e){return this.reverse().find(e)},Te.prototype.invokeMap=Ce(function(e,t){return typeof e=="function"?new Te(this):this.map(function(n){return An(n,e,t)})}),Te.prototype.reject=function(e){return this.filter(Xs(de(e)))},Te.prototype.slice=function(e,t){e=Pe(e);var n=this;return n.__filtered__&&(e>0||t<0)?new Te(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==r&&(t=Pe(t),n=t<0?n.dropRight(-t):n.take(t-e)),n)},Te.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Te.prototype.toArray=function(){return this.take(X)},zr(Te.prototype,function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),o=/^(?:head|last)$/.test(t),h=f[o?"take"+(t=="last"?"Right":""):t],p=o||/^find/.test(t);h&&(f.prototype[t]=function(){var b=this.__wrapped__,x=o?[1]:arguments,R=b instanceof Te,K=x[0],V=R||Ie(b),J=function(Ae){var $e=h.apply(f,hi([Ae],x));return o&&te?$e[0]:$e};V&&n&&typeof K=="function"&&K.length!=1&&(R=V=!1);var te=this.__chain__,oe=!!this.__actions__.length,ge=p&&!te,Oe=R&&!oe;if(!p&&V){b=Oe?b:new Te(this);var ye=e.apply(b,x);return ye.__actions__.push({func:Ws,args:[J],thisArg:r}),new Ir(ye,te)}return ge&&Oe?e.apply(this,x):(ye=this.thru(J),ge?o?ye.value()[0]:ye.value():ye)})}),br(["pop","push","shift","sort","splice","unshift"],function(e){var t=ws[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",o=/^(?:pop|shift)$/.test(e);f.prototype[e]=function(){var h=arguments;if(o&&!this.__chain__){var p=this.value();return t.apply(Ie(p)?p:[],h)}return this[n](function(b){return t.apply(Ie(b)?b:[],h)})}}),zr(Te.prototype,function(e,t){var n=f[t];if(n){var o=n.name+"";He.call(nn,o)||(nn[o]=[]),nn[o].push({name:t,func:n})}}),nn[Us(r,he).name]=[{name:"wrapper",func:r}],Te.prototype.clone=sp,Te.prototype.reverse=ap,Te.prototype.value=op,f.prototype.at=Lg,f.prototype.chain=jg,f.prototype.commit=qg,f.prototype.next=Mg,f.prototype.plant=Ug,f.prototype.reverse=Hg,f.prototype.toJSON=f.prototype.valueOf=f.prototype.value=kg,f.prototype.first=f.prototype.head,En&&(f.prototype[En]=zg),f},en=qf();wt?((wt.exports=en)._=en,We._=en):Fe._=en}).call(Hn)})(dc,dc.exports);var Yb=Object.defineProperty,Qb=Object.defineProperties,Xb=Object.getOwnPropertyDescriptors,bl=Object.getOwnPropertySymbols,Zb=Object.prototype.hasOwnProperty,eE=Object.prototype.propertyIsEnumerable,El=(c,i,r)=>i in c?Yb(c,i,{enumerable:!0,configurable:!0,writable:!0,value:r}):c[i]=r,aa=(c,i)=>{for(var r in i||(i={}))Zb.call(i,r)&&El(c,r,i[r]);if(bl)for(var r of bl(i))eE.call(i,r)&&El(c,r,i[r]);return c},tE=(c,i)=>Qb(c,Xb(i));function Ii(c,i,r){var s;const a=Tm(c);return((s=i.rpcMap)==null?void 0:s[a.reference])||`${Jb}?chainId=${a.namespace}:${a.reference}&projectId=${r}`}function ki(c){return c.includes(":")?c.split(":")[1]:c}function pf(c){return c.map(i=>`${i.split(":")[0]}:${i.split(":")[1]}`)}function rE(c,i){const r=Object.keys(i.namespaces).filter(a=>a.includes(c));if(!r.length)return[];const s=[];return r.forEach(a=>{const l=i.namespaces[a].accounts;s.push(...l)}),s}function iE(c={},i={}){const r=Il(c),s=Il(i);return dc.exports.merge(r,s)}function Il(c){var i,r,s,a;const l={};if(!ua(c))return l;for(const[d,g]of Object.entries(c)){const E=jl(d)?[d]:g.chains,y=g.methods||[],S=g.events||[],T=g.rpcMap||{},$=kn(d);l[$]=tE(aa(aa({},l[$]),g),{chains:Bo(E,(i=l[$])==null?void 0:i.chains),methods:Bo(y,(r=l[$])==null?void 0:r.methods),events:Bo(S,(s=l[$])==null?void 0:s.events),rpcMap:aa(aa({},T),(a=l[$])==null?void 0:a.rpcMap)})}return l}function nE(c){return c.includes(":")?c.split(":")[2]:c}function sE(c){const i={};for(const[r,s]of Object.entries(c)){const a=s.methods||[],l=s.events||[],d=s.accounts||[],g=jl(r)?[r]:s.chains?s.chains:pf(s.accounts);i[r]={chains:g,methods:a,events:l,accounts:d}}return i}function ic(c){return typeof c=="number"?c:c.includes("0x")?parseInt(c,16):c.includes(":")?Number(c.split(":")[1]):Number(c)}const df={},st=c=>df[c],nc=(c,i)=>{df[c]=i};class aE{constructor(i){this.name="polkadot",this.namespace=i.namespace,this.events=st("events"),this.client=st("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(i){this.namespace=Object.assign(this.namespace,i)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const i=this.namespace.chains[0];if(!i)throw new Error("ChainId not found");return i.split(":")[1]}request(i){return this.namespace.methods.includes(i.request.method)?this.client.request(i):this.getHttpProvider().request(i.request)}setDefaultChain(i,r){this.httpProviders[i]||this.setHttpProvider(i,r),this.chainId=i,this.events.emit(ai.DEFAULT_CHAIN_CHANGED,`${this.name}:${i}`)}getAccounts(){const i=this.namespace.accounts;return i?i.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2])||[]:[]}createHttpProviders(){const i={};return this.namespace.chains.forEach(r=>{var s;const a=ki(r);i[a]=this.createHttpProvider(a,(s=this.namespace.rpcMap)==null?void 0:s[r])}),i}getHttpProvider(){const i=`${this.name}:${this.chainId}`,r=this.httpProviders[i];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${i} not found`);return r}setHttpProvider(i,r){const s=this.createHttpProvider(i,r);s&&(this.httpProviders[i]=s)}createHttpProvider(i,r){const s=r||Ii(i,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${i}`);return new si(new xi(s,st("disableProviderPing")))}}class oE{constructor(i){this.name="eip155",this.namespace=i.namespace,this.events=st("events"),this.client=st("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(i){switch(i.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(i);case"eth_chainId":return parseInt(this.getDefaultChain())}return this.namespace.methods.includes(i.request.method)?await this.client.request(i):this.getHttpProvider().request(i.request)}updateNamespace(i){this.namespace=Object.assign(this.namespace,i)}setDefaultChain(i,r){this.httpProviders[i]||this.setHttpProvider(parseInt(i),r),this.chainId=parseInt(i),this.events.emit(ai.DEFAULT_CHAIN_CHANGED,`${this.name}:${i}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const i=this.namespace.chains[0];if(!i)throw new Error("ChainId not found");return i.split(":")[1]}createHttpProvider(i,r){const s=r||Ii(`${this.name}:${i}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${i}`);return new si(new xi(s,st("disableProviderPing")))}setHttpProvider(i,r){const s=this.createHttpProvider(i,r);s&&(this.httpProviders[i]=s)}createHttpProviders(){const i={};return this.namespace.chains.forEach(r=>{var s;const a=parseInt(ki(r));i[a]=this.createHttpProvider(a,(s=this.namespace.rpcMap)==null?void 0:s[r])}),i}getAccounts(){const i=this.namespace.accounts;return i?[...new Set(i.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}getHttpProvider(){const i=this.chainId,r=this.httpProviders[i];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${i} not found`);return r}async handleSwitchChain(i){var r,s;let a=i.request.params?(r=i.request.params[0])==null?void 0:r.chainId:"0x0";a=a.startsWith("0x")?a:`0x${a}`;const l=parseInt(a,16);if(this.isChainApproved(l))this.setDefaultChain(`${l}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:i.topic,request:{method:i.request.method,params:[{chainId:a}]},chainId:(s=this.namespace.chains)==null?void 0:s[0]}),this.setDefaultChain(`${l}`);else throw new Error(`Failed to switch to chain 'eip155:${l}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(i){return this.namespace.chains.includes(`${this.name}:${i}`)}}class cE{constructor(i){this.name="solana",this.namespace=i.namespace,this.events=st("events"),this.client=st("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(i){this.namespace=Object.assign(this.namespace,i)}requestAccounts(){return this.getAccounts()}request(i){return this.namespace.methods.includes(i.request.method)?this.client.request(i):this.getHttpProvider().request(i.request)}setDefaultChain(i,r){this.httpProviders[i]||this.setHttpProvider(i,r),this.chainId=i,this.events.emit(ai.DEFAULT_CHAIN_CHANGED,`${this.name}:${i}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const i=this.namespace.chains[0];if(!i)throw new Error("ChainId not found");return i.split(":")[1]}getAccounts(){const i=this.namespace.accounts;return i?[...new Set(i.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const i={};return this.namespace.chains.forEach(r=>{var s;const a=ki(r);i[a]=this.createHttpProvider(a,(s=this.namespace.rpcMap)==null?void 0:s[r])}),i}getHttpProvider(){const i=`${this.name}:${this.chainId}`,r=this.httpProviders[i];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${i} not found`);return r}setHttpProvider(i,r){const s=this.createHttpProvider(i,r);s&&(this.httpProviders[i]=s)}createHttpProvider(i,r){const s=r||Ii(i,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${i}`);return new si(new xi(s,st("disableProviderPing")))}}class uE{constructor(i){this.name="cosmos",this.namespace=i.namespace,this.events=st("events"),this.client=st("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(i){this.namespace=Object.assign(this.namespace,i)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const i=this.namespace.chains[0];if(!i)throw new Error("ChainId not found");return i.split(":")[1]}request(i){return this.namespace.methods.includes(i.request.method)?this.client.request(i):this.getHttpProvider().request(i.request)}setDefaultChain(i,r){this.httpProviders[i]||this.setHttpProvider(i,r),this.chainId=i,this.events.emit(ai.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const i=this.namespace.accounts;return i?[...new Set(i.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const i={};return this.namespace.chains.forEach(r=>{var s;const a=ki(r);i[a]=this.createHttpProvider(a,(s=this.namespace.rpcMap)==null?void 0:s[r])}),i}getHttpProvider(){const i=`${this.name}:${this.chainId}`,r=this.httpProviders[i];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${i} not found`);return r}setHttpProvider(i,r){const s=this.createHttpProvider(i,r);s&&(this.httpProviders[i]=s)}createHttpProvider(i,r){const s=r||Ii(i,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${i}`);return new si(new xi(s,st("disableProviderPing")))}}class hE{constructor(i){this.name="cip34",this.namespace=i.namespace,this.events=st("events"),this.client=st("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(i){this.namespace=Object.assign(this.namespace,i)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const i=this.namespace.chains[0];if(!i)throw new Error("ChainId not found");return i.split(":")[1]}request(i){return this.namespace.methods.includes(i.request.method)?this.client.request(i):this.getHttpProvider().request(i.request)}setDefaultChain(i,r){this.httpProviders[i]||this.setHttpProvider(i,r),this.chainId=i,this.events.emit(ai.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const i=this.namespace.accounts;return i?[...new Set(i.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const i={};return this.namespace.chains.forEach(r=>{const s=this.getCardanoRPCUrl(r),a=ki(r);i[a]=this.createHttpProvider(a,s)}),i}getHttpProvider(){const i=`${this.name}:${this.chainId}`,r=this.httpProviders[i];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${i} not found`);return r}getCardanoRPCUrl(i){const r=this.namespace.rpcMap;if(r)return r[i]}setHttpProvider(i,r){const s=this.createHttpProvider(i,r);s&&(this.httpProviders[i]=s)}createHttpProvider(i,r){const s=r||this.getCardanoRPCUrl(i);if(!s)throw new Error(`No RPC url provided for chainId: ${i}`);return new si(new xi(s,st("disableProviderPing")))}}class lE{constructor(i){this.name="elrond",this.namespace=i.namespace,this.events=st("events"),this.client=st("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(i){this.namespace=Object.assign(this.namespace,i)}requestAccounts(){return this.getAccounts()}request(i){return this.namespace.methods.includes(i.request.method)?this.client.request(i):this.getHttpProvider().request(i.request)}setDefaultChain(i,r){this.httpProviders[i]||this.setHttpProvider(i,r),this.chainId=i,this.events.emit(ai.DEFAULT_CHAIN_CHANGED,`${this.name}:${i}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const i=this.namespace.chains[0];if(!i)throw new Error("ChainId not found");return i.split(":")[1]}getAccounts(){const i=this.namespace.accounts;return i?[...new Set(i.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const i={};return this.namespace.chains.forEach(r=>{var s;const a=ki(r);i[a]=this.createHttpProvider(a,(s=this.namespace.rpcMap)==null?void 0:s[r])}),i}getHttpProvider(){const i=`${this.name}:${this.chainId}`,r=this.httpProviders[i];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${i} not found`);return r}setHttpProvider(i,r){const s=this.createHttpProvider(i,r);s&&(this.httpProviders[i]=s)}createHttpProvider(i,r){const s=r||Ii(i,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${i}`);return new si(new xi(s,st("disableProviderPing")))}}class fE{constructor(i){this.name="multiversx",this.namespace=i.namespace,this.events=st("events"),this.client=st("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(i){this.namespace=Object.assign(this.namespace,i)}requestAccounts(){return this.getAccounts()}request(i){return this.namespace.methods.includes(i.request.method)?this.client.request(i):this.getHttpProvider().request(i.request)}setDefaultChain(i,r){this.httpProviders[i]||this.setHttpProvider(i,r),this.chainId=i,this.events.emit(ai.DEFAULT_CHAIN_CHANGED,`${this.name}:${i}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const i=this.namespace.chains[0];if(!i)throw new Error("ChainId not found");return i.split(":")[1]}getAccounts(){const i=this.namespace.accounts;return i?[...new Set(i.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const i={};return this.namespace.chains.forEach(r=>{var s;const a=ki(r);i[a]=this.createHttpProvider(a,(s=this.namespace.rpcMap)==null?void 0:s[r])}),i}getHttpProvider(){const i=`${this.name}:${this.chainId}`,r=this.httpProviders[i];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${i} not found`);return r}setHttpProvider(i,r){const s=this.createHttpProvider(i,r);s&&(this.httpProviders[i]=s)}createHttpProvider(i,r){const s=r||Ii(i,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${i}`);return new si(new xi(s,st("disableProviderPing")))}}class pE{constructor(i){this.name="near",this.namespace=i.namespace,this.events=st("events"),this.client=st("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(i){this.namespace=Object.assign(this.namespace,i)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const i=this.namespace.chains[0];if(!i)throw new Error("ChainId not found");return i.split(":")[1]}request(i){return this.namespace.methods.includes(i.request.method)?this.client.request(i):this.getHttpProvider().request(i.request)}setDefaultChain(i,r){if(this.chainId=i,!this.httpProviders[i]){const s=r||Ii(`${this.name}:${i}`,this.namespace);if(!s)throw new Error(`No RPC url provided for chainId: ${i}`);this.setHttpProvider(i,s)}this.events.emit(ai.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const i=this.namespace.accounts;return i?i.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2])||[]:[]}createHttpProviders(){const i={};return this.namespace.chains.forEach(r=>{var s;i[r]=this.createHttpProvider(r,(s=this.namespace.rpcMap)==null?void 0:s[r])}),i}getHttpProvider(){const i=`${this.name}:${this.chainId}`,r=this.httpProviders[i];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${i} not found`);return r}setHttpProvider(i,r){const s=this.createHttpProvider(i,r);s&&(this.httpProviders[i]=s)}createHttpProvider(i,r){const s=r||Ii(i,this.namespace);return typeof s>"u"?void 0:new si(new xi(s,st("disableProviderPing")))}}var dE=Object.defineProperty,gE=Object.defineProperties,yE=Object.getOwnPropertyDescriptors,xl=Object.getOwnPropertySymbols,vE=Object.prototype.hasOwnProperty,mE=Object.prototype.propertyIsEnumerable,Pl=(c,i,r)=>i in c?dE(c,i,{enumerable:!0,configurable:!0,writable:!0,value:r}):c[i]=r,oa=(c,i)=>{for(var r in i||(i={}))vE.call(i,r)&&Pl(c,r,i[r]);if(xl)for(var r of xl(i))mE.call(i,r)&&Pl(c,r,i[r]);return c},sc=(c,i)=>gE(c,yE(i));class Sc{constructor(i){this.events=new mr.exports,this.rpcProviders={},this.shouldAbortPairingAttempt=!1,this.maxPairingAttempts=10,this.disableProviderPing=!1,this.providerOpts=i,this.logger=typeof i?.logger<"u"&&typeof i?.logger!="string"?i.logger:Ne.pino(Ne.getDefaultLoggerOptions({level:i?.logger||_l})),this.disableProviderPing=i?.disableProviderPing||!1}static async init(i){const r=new Sc(i);return await r.initialize(),r}async request(i,r){const[s,a]=this.validateChain(r);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(s).request({request:oa({},i),chainId:`${s}:${a}`,topic:this.session.topic})}sendAsync(i,r,s){const a=new Date().getTime();this.request(i,s).then(l=>r(null,ya(a,l))).catch(l=>r(l,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties}),await this.requestAccounts()}async disconnect(){var i;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(i=this.session)==null?void 0:i.topic,reason:Wt("USER_DISCONNECTED")}),await this.cleanup()}async connect(i){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(i),await this.cleanupPendingPairings(),!i.skipPairing)return await this.pair(i.pairingTopic)}on(i,r){this.events.on(i,r)}once(i,r){this.events.once(i,r)}removeListener(i,r){this.events.removeListener(i,r)}off(i,r){this.events.off(i,r)}get isWalletConnect(){return!0}async pair(i){this.shouldAbortPairingAttempt=!1;let r=0;do{if(this.shouldAbortPairingAttempt)throw new Error("Pairing aborted");if(r>=this.maxPairingAttempts)throw new Error("Max auto pairing attempts reached");const{uri:s,approval:a}=await this.client.connect({pairingTopic:i,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties});s&&(this.uri=s,this.events.emit("display_uri",s)),await a().then(l=>{this.session=l,this.namespaces||(this.namespaces=sE(l.namespaces),this.persist("namespaces",this.namespaces))}).catch(l=>{if(l.message!==ff)throw l;r++})}while(!this.session);return this.onConnect(),this.session}setDefaultChain(i,r){try{if(!this.session)return;const[s,a]=this.validateChain(i);this.getProvider(s).setDefaultChain(a,r)}catch(s){if(!/Please call connect/.test(s.message))throw s}}async cleanupPendingPairings(i={}){this.logger.info("Cleaning up inactive pairings...");const r=this.client.pairing.getAll();if(gn(r)){for(const s of r)i.deletePairings?this.client.core.expirer.set(s.topic,0):await this.client.core.relayer.subscriber.unsubscribe(s.topic);this.logger.info(`Inactive pairings cleared: ${r.length}`)}}abortPairingAttempt(){this.shouldAbortPairingAttempt=!0}async checkStorage(){if(this.namespaces=await this.getFromStore("namespaces"),this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.client.session.length){const i=this.client.session.keys.length-1;this.session=this.client.session.get(this.client.session.keys[i]),this.createProviders()}}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){this.client=this.providerOpts.client||await Pc.init({logger:this.providerOpts.logger||_l,relayUrl:this.providerOpts.relayUrl||Vb,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name}),this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const i=[...new Set(Object.keys(this.session.namespaces).map(r=>kn(r)))];nc("client",this.client),nc("events",this.events),nc("disableProviderPing",this.disableProviderPing),i.forEach(r=>{if(!this.session)return;const s=rE(r,this.session),a=pf(s),l=iE(this.namespaces,this.optionalNamespaces),d=sc(oa({},l[r]),{accounts:s,chains:a});switch(r){case"eip155":this.rpcProviders[r]=new oE({namespace:d});break;case"solana":this.rpcProviders[r]=new cE({namespace:d});break;case"cosmos":this.rpcProviders[r]=new uE({namespace:d});break;case"polkadot":this.rpcProviders[r]=new aE({namespace:d});break;case"cip34":this.rpcProviders[r]=new hE({namespace:d});break;case"elrond":this.rpcProviders[r]=new lE({namespace:d});break;case"multiversx":this.rpcProviders[r]=new fE({namespace:d});break;case"near":this.rpcProviders[r]=new pE({namespace:d});break}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",i=>{this.events.emit("session_ping",i)}),this.client.on("session_event",i=>{const{params:r}=i,{event:s}=r;if(s.name==="accountsChanged"){const a=s.data;a&&gn(a)&&this.events.emit("accountsChanged",a.map(nE))}else if(s.name==="chainChanged"){const a=r.chainId,l=r.event.data,d=kn(a),g=ic(a)!==ic(l)?`${d}:${ic(l)}`:a;this.onChainChanged(g)}else this.events.emit(s.name,s.data);this.events.emit("session_event",i)}),this.client.on("session_update",({topic:i,params:r})=>{var s;const{namespaces:a}=r,l=(s=this.client)==null?void 0:s.session.get(i);this.session=sc(oa({},l),{namespaces:a}),this.onSessionUpdate(),this.events.emit("session_update",{topic:i,params:r})}),this.client.on("session_delete",async i=>{await this.cleanup(),this.events.emit("session_delete",i),this.events.emit("disconnect",sc(oa({},Wt("USER_DISCONNECTED")),{data:i.topic}))}),this.on(ai.DEFAULT_CHAIN_CHANGED,i=>{this.onChainChanged(i,!0)})}getProvider(i){if(!this.rpcProviders[i])throw new Error(`Provider not found: ${i}`);return this.rpcProviders[i]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(i=>{var r;this.getProvider(i).updateNamespace((r=this.session)==null?void 0:r.namespaces[i])})}setNamespaces(i){const{namespaces:r,optionalNamespaces:s,sessionProperties:a}=i;r&&Object.keys(r).length&&(this.namespaces=r),s&&Object.keys(s).length&&(this.optionalNamespaces=s),this.sessionProperties=a,this.persist("namespaces",r),this.persist("optionalNamespaces",s)}validateChain(i){const[r,s]=i?.split(":")||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[r,s];if(r&&!Object.keys(this.namespaces||{}).map(d=>kn(d)).includes(r))throw new Error(`Namespace '${r}' is not configured. Please call connect() first with namespace config.`);if(r&&s)return[r,s];const a=kn(Object.keys(this.namespaces)[0]),l=this.rpcProviders[a].getDefaultChain();return[a,l]}async requestAccounts(){const[i]=this.validateChain();return await this.getProvider(i).requestAccounts()}onChainChanged(i,r=!1){var s;if(!this.namespaces)return;const[a,l]=this.validateChain(i);r||this.getProvider(a).setDefaultChain(l),((s=this.namespaces[a])!=null?s:this.namespaces[`${a}:${l}`]).defaultChain=l,this.persist("namespaces",this.namespaces),this.events.emit("chainChanged",l)}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.session=void 0,this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,this.persist("namespaces",void 0),this.persist("optionalNamespaces",void 0),this.persist("sessionProperties",void 0),await this.cleanupPendingPairings({deletePairings:!0})}persist(i,r){this.client.core.storage.setItem(`${wl}/${i}`,r)}async getFromStore(i){return await this.client.core.storage.getItem(`${wl}/${i}`)}}const _E=Sc,wE="wc",bE="ethereum_provider",EE=`${wE}@2:${bE}:`,IE="https://rpc.walletconnect.com/v1/",gc=["eth_sendTransaction","personal_sign"],xE=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode"],yc=["chainChanged","accountsChanged"],PE=["chainChanged","accountsChanged","message","disconnect","connect"];var SE=Object.defineProperty,OE=Object.defineProperties,CE=Object.getOwnPropertyDescriptors,Sl=Object.getOwnPropertySymbols,AE=Object.prototype.hasOwnProperty,RE=Object.prototype.propertyIsEnumerable,Ol=(c,i,r)=>i in c?SE(c,i,{enumerable:!0,configurable:!0,writable:!0,value:r}):c[i]=r,Bn=(c,i)=>{for(var r in i||(i={}))AE.call(i,r)&&Ol(c,r,i[r]);if(Sl)for(var r of Sl(i))RE.call(i,r)&&Ol(c,r,i[r]);return c},Cl=(c,i)=>OE(c,CE(i));function pa(c){return Number(c[0].split(":")[1])}function ac(c){return`0x${c.toString(16)}`}function TE(c){const{chains:i,optionalChains:r,methods:s,optionalMethods:a,events:l,optionalEvents:d,rpcMap:g}=c;if(!gn(i))throw new Error("Invalid chains");const E={chains:i,methods:s||gc,events:l||yc,rpcMap:Bn({},i.length?{[pa(i)]:g[pa(i)]}:{})},y=l?.filter(B=>!yc.includes(B)),S=s?.filter(B=>!gc.includes(B));if(!r&&!d&&!a&&!(y!=null&&y.length)&&!(S!=null&&S.length))return{required:i.length?E:void 0};const T=y?.length&&S?.length||!r,$={chains:[...new Set(T?E.chains.concat(r||[]):r)],methods:[...new Set(E.methods.concat(a!=null&&a.length?a:xE))],events:[...new Set(E.events.concat(d!=null&&d.length?d:PE))],rpcMap:g};return{required:i.length?E:void 0,optional:r.length?$:void 0}}class Oc{constructor(){this.events=new mr.exports.EventEmitter,this.namespace="eip155",this.accounts=[],this.chainId=1,this.STORAGE_KEY=EE,this.on=(i,r)=>(this.events.on(i,r),this),this.once=(i,r)=>(this.events.once(i,r),this),this.removeListener=(i,r)=>(this.events.removeListener(i,r),this),this.off=(i,r)=>(this.events.off(i,r),this),this.parseAccount=i=>this.isCompatibleChainId(i)?this.parseAccountId(i).address:i,this.signer={},this.rpc={}}static async init(i){const r=new Oc;return await r.initialize(i),r}async request(i){return await this.signer.request(i,this.formatChainId(this.chainId))}sendAsync(i,r){this.signer.sendAsync(i,r,this.formatChainId(this.chainId))}get connected(){return this.signer.client?this.signer.client.core.relayer.connected:!1}get connecting(){return this.signer.client?this.signer.client.core.relayer.connecting:!1}async enable(){return this.session||await this.connect(),await this.request({method:"eth_requestAccounts"})}async connect(i){if(!this.signer.client)throw new Error("Provider not initialized. Call init() first");this.loadConnectOpts(i);const{required:r,optional:s}=TE(this.rpc);try{const a=await new Promise(async(d,g)=>{var E;this.rpc.showQrModal&&((E=this.modal)==null||E.subscribeModal(y=>{!y.open&&!this.signer.session&&(this.signer.abortPairingAttempt(),g(new Error("Connection request reset. Please try again.")))})),await this.signer.connect(Cl(Bn({namespaces:Bn({},r&&{[this.namespace]:r})},s&&{optionalNamespaces:{[this.namespace]:s}}),{pairingTopic:i?.pairingTopic})).then(y=>{d(y)}).catch(y=>{g(new Error(y.message))})});if(!a)return;const l=Nm(a.namespaces,[this.namespace]);this.setChainIds(this.rpc.chains.length?this.rpc.chains:l),this.setAccounts(l),this.events.emit("connect",{chainId:ac(this.chainId)})}catch(a){throw this.signer.logger.error(a),a}finally{this.modal&&this.modal.closeModal()}}async disconnect(){this.session&&await this.signer.disconnect(),this.reset()}get isWalletConnect(){return!0}get session(){return this.signer.session}registerEventListeners(){this.signer.on("session_event",i=>{const{params:r}=i,{event:s}=r;s.name==="accountsChanged"?(this.accounts=this.parseAccounts(s.data),this.events.emit("accountsChanged",this.accounts)):s.name==="chainChanged"?this.setChainId(this.formatChainId(s.data)):this.events.emit(s.name,s.data),this.events.emit("session_event",i)}),this.signer.on("chainChanged",i=>{const r=parseInt(i);this.chainId=r,this.events.emit("chainChanged",ac(this.chainId)),this.persist()}),this.signer.on("session_update",i=>{this.events.emit("session_update",i)}),this.signer.on("session_delete",i=>{this.reset(),this.events.emit("session_delete",i),this.events.emit("disconnect",Cl(Bn({},Wt("USER_DISCONNECTED")),{data:i.topic,name:"USER_DISCONNECTED"}))}),this.signer.on("display_uri",i=>{var r,s;this.rpc.showQrModal&&((r=this.modal)==null||r.closeModal(),(s=this.modal)==null||s.openModal({uri:i})),this.events.emit("display_uri",i)})}switchEthereumChain(i){this.request({method:"wallet_switchEthereumChain",params:[{chainId:i.toString(16)}]})}isCompatibleChainId(i){return typeof i=="string"?i.startsWith(`${this.namespace}:`):!1}formatChainId(i){return`${this.namespace}:${i}`}parseChainId(i){return Number(i.split(":")[1])}setChainIds(i){const r=i.filter(s=>this.isCompatibleChainId(s)).map(s=>this.parseChainId(s));r.length&&(this.chainId=r[0],this.events.emit("chainChanged",ac(this.chainId)),this.persist())}setChainId(i){if(this.isCompatibleChainId(i)){const r=this.parseChainId(i);this.chainId=r,this.switchEthereumChain(r)}}parseAccountId(i){const[r,s,a]=i.split(":");return{chainId:`${r}:${s}`,address:a}}setAccounts(i){this.accounts=i.filter(r=>this.parseChainId(this.parseAccountId(r).chainId)===this.chainId).map(r=>this.parseAccountId(r).address),this.events.emit("accountsChanged",this.accounts)}getRpcConfig(i){var r,s;const a=(r=i?.chains)!=null?r:[],l=(s=i?.optionalChains)!=null?s:[],d=a.concat(l);if(!d.length)throw new Error("No chains specified in either `chains` or `optionalChains`");const g=a.length?i?.methods||gc:[],E=a.length?i?.events||yc:[],y=i?.optionalMethods||[],S=i?.optionalEvents||[],T=i?.rpcMap||this.buildRpcMap(d,i.projectId),$=i?.qrModalOptions||void 0;return{chains:a?.map(B=>this.formatChainId(B)),optionalChains:l.map(B=>this.formatChainId(B)),methods:g,events:E,optionalMethods:y,optionalEvents:S,rpcMap:T,showQrModal:!!(i!=null&&i.showQrModal),qrModalOptions:$,projectId:i.projectId,metadata:i.metadata}}buildRpcMap(i,r){const s={};return i.forEach(a=>{s[a]=this.getRpcUrl(a,r)}),s}async initialize(i){if(this.rpc=this.getRpcConfig(i),this.chainId=this.rpc.chains.length?pa(this.rpc.chains):pa(this.rpc.optionalChains),this.signer=await _E.init({projectId:this.rpc.projectId,metadata:this.rpc.metadata,disableProviderPing:i.disableProviderPing,relayUrl:i.relayUrl,storageOptions:i.storageOptions}),this.registerEventListeners(),await this.loadPersistedSession(),this.rpc.showQrModal){let r;try{const{WalletConnectModal:s}=await Fm(()=>import("./index.a1de4563.js").then(a=>a.i),["assets/index.a1de4563.js","assets/index.b91f8118.js","assets/index.3782289a.css"]);r=s}catch{throw new Error("To use QR modal, please install @walletconnect/modal package")}if(r)try{this.modal=new r(Bn({projectId:this.rpc.projectId},this.rpc.qrModalOptions))}catch(s){throw this.signer.logger.error(s),new Error("Could not generate WalletConnectModal Instance")}}}loadConnectOpts(i){if(!i)return;const{chains:r,optionalChains:s,rpcMap:a}=i;r&&gn(r)&&(this.rpc.chains=r.map(l=>this.formatChainId(l)),r.forEach(l=>{this.rpc.rpcMap[l]=a?.[l]||this.getRpcUrl(l)})),s&&gn(s)&&(this.rpc.optionalChains=[],this.rpc.optionalChains=s?.map(l=>this.formatChainId(l)),s.forEach(l=>{this.rpc.rpcMap[l]=a?.[l]||this.getRpcUrl(l)}))}getRpcUrl(i,r){var s;return((s=this.rpc.rpcMap)==null?void 0:s[i])||`${IE}?chainId=eip155:${i}&projectId=${r||this.rpc.projectId}`}async loadPersistedSession(){if(!this.session)return;const i=await this.signer.client.core.storage.getItem(`${this.STORAGE_KEY}/chainId`),r=this.session.namespaces[`${this.namespace}:${i}`]?this.session.namespaces[`${this.namespace}:${i}`]:this.session.namespaces[this.namespace];this.setChainIds(i?[this.formatChainId(i)]:r?.accounts),this.setAccounts(r?.accounts)}reset(){this.chainId=1,this.accounts=[]}persist(){this.session&&this.signer.client.core.storage.setItem(`${this.STORAGE_KEY}/chainId`,this.chainId)}parseAccounts(i){return typeof i=="string"||i instanceof String?[this.parseAccount(i)]:i.map(r=>this.parseAccount(r))}}const $E=Oc;export{$E as EthereumProvider,PE as OPTIONAL_EVENTS,xE as OPTIONAL_METHODS,yc as REQUIRED_EVENTS,gc as REQUIRED_METHODS,Oc as default};
